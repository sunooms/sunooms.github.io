<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>akebee</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="用来记录akebee的随笔以及技术记录的微博">
<meta property="og:type" content="website">
<meta property="og:title" content="akebee">
<meta property="og:url" content="https://sunooms.github.io/index.html">
<meta property="og:site_name" content="akebee">
<meta property="og:description" content="用来记录akebee的随笔以及技术记录的微博">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="akebee">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="akebee" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">akebee</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">akebee blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://sunooms.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-tool_use/java/SpringBoot/SpringBoot学习_2_mysql_mybatis" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/28/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_2_mysql_mybatis/" class="article-date">
  <time class="dt-published" datetime="2022-11-28T07:09:00.000Z" itemprop="datePublished">2022-11-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/28/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_2_mysql_mybatis/">SpringBoot 2.7教程：SpringBoot 整合 Mysql 项目应用 Mybatis-Plus</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<p>来源： https://blog.csdn.net/f88069684/article/details/125170370</p>
<p>Spring Boot 基础就不介绍了，推荐下这个实战教程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/javastacks/spring-boot-best-practice</span><br></pre></td></tr></table></figure>
<h1 id="springboot-2.7-教程springboot-整合-mysql-项目应用-mybatis-plus">SpringBoot 2.7 教程：SpringBoot 整合 Mysql 项目应用 Mybatis-Plus</h1>
<h2 id="主要目标">1 主要目标：</h2>
<ul>
<li>1 学习 SpringBoot Mysql 项目搭建</li>
<li>2 学习使用 Mybatis-Plus</li>
</ul>
<blockquote>
<p>注： 还有一个原因： 用 SpringBoot 官网 JPA 连接 MySQL 一直报错，公司项目用的是 Mybatis-Plus， 懒得调试 JPA，和公司项目保持一致。</p>
</blockquote>
<h2 id="创建一个通过-springboot-访问-mysql-数据库的新工程">2 创建一个通过 SpringBoot 访问 mysql 数据库的新工程</h2>
<ul>
<li>1 根据文档《VSCode 搭建 SpringBoot 开发环境》 ----》 创建 SpringBoot 项目，共 9 个步骤</li>
<li>2 创建过程中，选择 maven 和 java，配置 Group、Artifact</li>
<li>3 依赖选择： <code>Spring Web</code> <code>MySQL Driver</code> <code>MyBatis Plus</code></li>
<li>4 确定项目存放路径，点击生成</li>
<li>5 打开项目，VSCode 项目自动下载必要的依赖文件</li>
</ul>
<p>以 <code>IntelliJ IDEA</code> 为例 (直接参考来源文档，懒得自己在 VSCode 里截图，步骤基本类似)</p>
<ul>
<li><p>1 新建 Module <img src="https://img-blog.csdnimg.cn/f4d7704dfc2d4bf6b3c7995a5f6b1b2f.png" /></p></li>
<li><p>2 修改模板下载地址为阿里云 <img src="https://img-blog.csdnimg.cn/39daa5e4b9344a9db94ba0d9b4cbb2a7.png" /></p></li>
<li><p>3 配置 Group、Artifact <img src="https://img-blog.csdnimg.cn/5585926be466434a8c151781e24f23e0.png" /></p></li>
<li><p>4 搜索添加依赖 <img src="https://img-blog.csdnimg.cn/c19a8b4e525847f2bb6806fbf67edd29.png" /> <img src="https://img-blog.csdnimg.cn/6b3dc5f0826e4c52bb612fbd668e90a9.png" /> <img src="https://img-blog.csdnimg.cn/c80794254cc14b738f9aecdbef574e69.png" /></p></li>
<li><p>5 确定项目存放目录 <img src="https://img-blog.csdnimg.cn/82455550a6cb4cdb88fe9ea67278707a.png" /></p></li>
</ul>
<h2 id="修改-pom.xml-文件">3 修改 pom.xml 文件</h2>
<h3 id="确定-springboot-版本">3.1 确定 springboot 版本</h3>
<p>这个根据需要，目前 JAVA 版本是 17，springboot 是 2.7.6</p>
<p>新建项目，默认的 <code>java</code> 配置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties&gt;</span><br><span class="line">		&lt;java.version&gt;17&lt;/java.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br></pre></td></tr></table></figure>
<p>网上参考文档的配置如下。 java1.8 太老了，而且 SpringBoot3.0 必须支持 <code>JDK 17</code>,提前用 java 17 更合适，迟早要支持新版本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</span><br><span class="line">        &lt;spring-boot.version&gt;2.7.0&lt;/spring-boot.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br></pre></td></tr></table></figure>
<h3 id="确定-webmysqlmybatis-plus-依赖">3.2 确定 web、mysql、Mybatis-plus 依赖</h3>
<p>注意： 开发环境 VSCode，在选择依赖的时候，只有<code>Mybatis</code>，没有<code>Mybatis Plus</code> 直接修改 pom.xml: 注释掉 <code>Mybatis</code>,添加 <code>Mybatis Plus</code>,用官网目前最新的 3.5.2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.5.2&lt;/version&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;com.mysql&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
<p><strong>踩的坑：</strong></p>
<ul>
<li>因为是手工添加 <code>Mybatis Plus</code>, 刚开始从网上教程，拷贝的配置是：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.5.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p><strong>发现上面的配置，怎么也连接不了数据库，一直报错！</strong></p>
<p>经过一步步排查，终于发现<code>Mybatis Plus</code>有问题： 正确的 <code>artifactId</code> 是 <code>mybatis-plus-boot-starter</code>，不是 <code>mybatis-plus</code>! 这个小细节，真的很难查，浪费 2 天时间。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.5.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>完整的 <code>pom.xml</code> 文件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">	&lt;parent&gt;</span><br><span class="line">		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">		&lt;version&gt;2.7.6&lt;/version&gt;</span><br><span class="line">		&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">	&lt;/parent&gt;</span><br><span class="line">	&lt;groupId&gt;com.hylink&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;mybatismysql&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">	&lt;name&gt;mybatismysql&lt;/name&gt;</span><br><span class="line">	&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;</span><br><span class="line">	&lt;properties&gt;</span><br><span class="line">		&lt;java.version&gt;17&lt;/java.version&gt;</span><br><span class="line">	&lt;/properties&gt;</span><br><span class="line">	&lt;dependencies&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.5.2&lt;/version&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;com.mysql&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">	&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">	&lt;build&gt;</span><br><span class="line">		&lt;plugins&gt;</span><br><span class="line">			&lt;plugin&gt;</span><br><span class="line">				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">			&lt;/plugin&gt;</span><br><span class="line">		&lt;/plugins&gt;</span><br><span class="line">	&lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<h2 id="书写代码">4 书写代码</h2>
<h3 id="书写-entity.user-user-表对应的数据实体类">4.1 书写 <code>entity.User</code> <code>user</code> 表对应的数据实体类</h3>
<p>创建 <code>entity</code> 目录，此目录下<code>User.java</code>对应的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.mybatismysql.entity;</span><br><span class="line"></span><br><span class="line">import com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line">import com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line">import com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"></span><br><span class="line">@TableName(&quot;user&quot;)</span><br><span class="line">public class User &#123;</span><br><span class="line">    @TableId(type = IdType.AUTO)</span><br><span class="line">    private Integer userId;</span><br><span class="line">    private String userName;</span><br><span class="line">    private Integer userSex;</span><br><span class="line"></span><br><span class="line">    public Integer getUserId()&#123;</span><br><span class="line">        return userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserId(Integer userId)&#123;</span><br><span class="line">        this.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUserName()&#123;</span><br><span class="line">        return userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserName(String userName)&#123;</span><br><span class="line">        this.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Integer getUserSex()&#123;</span><br><span class="line">        return userSex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserSex(Integer userSex)&#123;</span><br><span class="line">        this.userSex = userSex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString()&#123;</span><br><span class="line">        return &quot;User&#123;&quot; +</span><br><span class="line">                &quot;userId=&quot; + userId +</span><br><span class="line">                &quot;, userName=&quot; + userName +</span><br><span class="line">                &quot;, userSex=&quot; + userSex +</span><br><span class="line">                &quot;&#125;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="书写-dao.userdao对应的类">4.2 书写 <code>dao.UserDao</code>对应的类</h3>
<p>创建 <code>dao</code> 目录，此目录下<code>UserDao.java</code>对应的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.mybatismysql.dao;</span><br><span class="line"></span><br><span class="line">import com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line">import com.hylink.mybatismysql.entity.User;</span><br><span class="line">import org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  @author xgm</span><br><span class="line"> *  @Description: example for learn springboot and mybatis mysql</span><br><span class="line"> *  @create 20220-11-28</span><br><span class="line"> *</span><br><span class="line">*/</span><br><span class="line">@Mapper</span><br><span class="line">public interface UserDao extends BaseMapper&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="书写-controller.usercontroller对应的类">4.3 书写 <code>controller.UserController</code>对应的类</h3>
<p>创建 <code>controller</code> 目录，此目录下<code>UserController.java</code>对应的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.mybatismysql.controller;</span><br><span class="line"></span><br><span class="line">import com.hylink.mybatismysql.dao.UserDao;</span><br><span class="line">import com.hylink.mybatismysql.entity.User;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.PutMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line">import org.springframework.web.bind.annotation.DeleteMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/user&quot;)</span><br><span class="line">public class UserController &#123;</span><br><span class="line"></span><br><span class="line">    @Resource</span><br><span class="line">    UserDao userDao;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获取mysql中的数据</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(&quot;welcome&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public String helloWorld() &#123;</span><br><span class="line">        return &quot;welcome!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加资源到mysql</span><br><span class="line">     */</span><br><span class="line">    @PutMapping(&quot;/add&quot;)</span><br><span class="line">    public String mysqlAdd()&#123;</span><br><span class="line">        User user = new User();</span><br><span class="line">        user.setUserName(&quot;zhangsan&quot;);</span><br><span class="line">        user.setUserSex(1);</span><br><span class="line">        userDao.insert(user);</span><br><span class="line">        return &quot;succ&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获取mysql中的数据</span><br><span class="line">     */</span><br><span class="line">    @GetMapping(&quot;/get&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public String mysqlGet() &#123;</span><br><span class="line">        User user = userDao.selectById(1);</span><br><span class="line">        if (user == null)&#123;</span><br><span class="line">            return &quot;has no user&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        String tmp_str = user.toString();</span><br><span class="line"></span><br><span class="line">        if (tmp_str.isEmpty())&#123;</span><br><span class="line">            return &quot;has no user!&quot;;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            return tmp_str;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * 修改mysql中的数据</span><br><span class="line">     */</span><br><span class="line">    @PostMapping(&quot;/edit&quot;)</span><br><span class="line">    public String mysqlEdit()&#123;</span><br><span class="line">        User user = new User();</span><br><span class="line">        user.setUserId(1);</span><br><span class="line"></span><br><span class="line">        user.setUserName(&quot;lisi&quot;);</span><br><span class="line">        user.setUserSex(1);</span><br><span class="line">        userDao.updateById(user);</span><br><span class="line">        return &quot;succ&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * 删除mysql中的数据</span><br><span class="line">     */</span><br><span class="line">    @DeleteMapping(&quot;/del&quot;)</span><br><span class="line">    public String mysqlDel()&#123;</span><br><span class="line">        userDao.deleteById(1);</span><br><span class="line">        return &quot;succ&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="配置-mysql-连接信息application.properties">4.4 配置 mysql 连接信息，application.properties</h3>
<p>因为要连接数据库，所以要加上数据库的配置信息，这个要根据实际情况进行配置</p>
<p>修改<code>src\main\resources\application.properties</code>文件，增加访问 mysql 的设置</p>
<p><strong>注意：</strong></p>
<ul>
<li>mysql 数据库用户的权限，先用<code>windows命令行</code>或者<code>MySQL Workbench</code>工具，提前验证下能否对 mysql 进行访问和设置</li>
</ul>
<p>MySQL 官网下载地址： <a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/workbench/">MySQL Workbench</a> 有些数据库管理工具是收费的，不推荐用破解版本! MySQL 官网有免费的数据库管理工具，直接下载使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 数据库驱动：</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line"># 数据源名称</span><br><span class="line">spring.datasource.name=db_example</span><br><span class="line"># 数据库连接地址</span><br><span class="line">spring.datasource.url=jdbc:mysql://127.0.0.1:3306/db_example?serverTimezone=UTC&amp;characterEncoding=utf-8&amp;useSSL=false</span><br><span class="line"># 数据库用户名&amp;密码：</span><br><span class="line">spring.datasource.username=sprintuser</span><br><span class="line">spring.datasource.password=ThePassword</span><br></pre></td></tr></table></figure>
<h3 id="创建数据库和表结构">4.5 创建数据库和表结构</h3>
<p><strong>注意：运行代码前，提前先在数据库中把 <code>user</code> 表创建好，否则运行会报错</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use db_example;</span><br><span class="line">CREATE TABLE `user` (</span><br><span class="line">  `user_id` int NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `user_name` varchar(255) CHARACTER SET latin1 NOT NULL,</span><br><span class="line">  `user_sex` int NOT NULL DEFAULT &#x27;0&#x27;,</span><br><span class="line">  PRIMARY KEY (`user_id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;</span><br></pre></td></tr></table></figure>
<h3 id="书写-mybatismysqlapplication.java">4.6 书写 <code>MybatismysqlApplication.java</code></h3>
<p><code>src\main\java\com\hylink\mybatismysql\MybatismysqlApplication.java</code>文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.mybatismysql;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.context.annotation.ComponentScan;</span><br><span class="line">import org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">@ComponentScan(value = &quot;com.hylink.mybatismysql&quot;)</span><br><span class="line">@MapperScan(&quot;com.hylink.mybatismysql&quot;)</span><br><span class="line">public class MybatismysqlApplication &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		SpringApplication.run(MybatismysqlApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，<code>Application.java</code>需要增加下面 2 个设置：</p>
<ul>
<li>1 <code>@ComponentScan(value = "com.hylink.mybatismysql")</code> 这里是用来查找 <code>controller</code> 目录，否则会找不到路由定向。代码按功能分目录存放，需要这个。</li>
<li>2 <code>@MapperScan("com.hylink.mybatismysql")</code> 这里是用来对应 <code>mybatis</code> 的，支持数据库的操作</li>
</ul>
<h2 id="启动-application-测试使用-postman-进行测试">5 启动 <code>Application</code> 测试使用 <code>Postman</code> 进行测试</h2>
<ul>
<li>1 PUT http://localhost:8080/user/add</li>
<li>2 GET http://localhost:8080/user/get</li>
<li>3 POST http://localhost:8080/user/edit</li>
<li>4 DELETE http://localhost:8080/user/del</li>
</ul>
<p><strong>注意：</strong></p>
<ul>
<li><p>1 先运行<code>PUT http://localhost:8080/user/add</code>添加数据，然后再运行下面的测试用例 原因： 测试代码，没有考虑异常，例如 <code>用户不存在</code> <code>用户id固定为 1</code></p></li>
<li><p>2 <code>DELETE</code> 操作后，因为用户 Id 是自增的，测试用例固定<code>用户id = 1</code>，再运行会出问题，找不到用户</p></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/28/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_2_mysql_mybatis/" data-id="clb4ew663004qcctj9hcq5kob" data-title="SpringBoot 2.7教程：SpringBoot 整合 Mysql 项目应用 Mybatis-Plus" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-tool_use/java/SpringBoot/SpingBoot学习_1_helloworld" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/24/tool_use/java/SpringBoot/SpingBoot%E5%AD%A6%E4%B9%A0_1_helloworld/" class="article-date">
  <time class="dt-published" datetime="2022-11-24T08:09:00.000Z" itemprop="datePublished">2022-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/24/tool_use/java/SpringBoot/SpingBoot%E5%AD%A6%E4%B9%A0_1_helloworld/">SpringBoot学习_1_helloworld</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="springboot-学习之-helloworld">SpringBoot 学习之 helloworld</h1>
<p>官网参考教程： https://spring.io/guides/gs/rest-service/</p>
<h2 id="sping-boot-简述">Sping Boot 简述</h2>
<p>最好的文档来自官方网站： https://docs.spring.io/spring-framework/docs/6.0.1/reference/html/</p>
<p>Spring Boot(英文中是“引导”的意思)，是用来简化 Spring 应用的搭建到开发的过程。应用开箱即用，只要通过 “just run”（可能是 java -jar 或 tomcat 或 maven 插件 run 或 shell 脚本），就可以启动项目。二者，Spring Boot 只要很少的 Spring 配置文件（例如那些 xml，property）。</p>
<p>因为“习惯优先于配置”的原则，使得 Spring Boot 在快速开发应用和微服务架构实践中得到广泛应用。</p>
<p>Javaer 装好 JDK 环境和 Maven 工具就可以开始学习 Boot 了~</p>
<h2 id="helloworld-实战详解">HelloWorld 实战详解</h2>
<p>首先得有个 maven 基础项目，可以直接使用 Maven 骨架工程生成 Maven 骨架 Web 项目:</p>
<ul>
<li>目前采用 VSCode 自动生成 SpringBoot 项目，具体文档见: 《VSCode 搭建 SpringBoot 开发环境》</li>
</ul>
<h3 id="pom.xml-配置">2.1 pom.xml 配置</h3>
<p>代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">	&lt;parent&gt;</span><br><span class="line">		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">		&lt;version&gt;2.7.5&lt;/version&gt;</span><br><span class="line">		&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">	&lt;/parent&gt;</span><br><span class="line">	&lt;groupId&gt;com.hylink&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;not_doctor_example&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">	&lt;name&gt;not_doctor_example&lt;/name&gt;</span><br><span class="line">	&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;</span><br><span class="line">	&lt;properties&gt;</span><br><span class="line">		&lt;java.version&gt;17&lt;/java.version&gt;</span><br><span class="line">	&lt;/properties&gt;</span><br><span class="line">	&lt;dependencies&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">			&lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">			&lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">	&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">	&lt;build&gt;</span><br><span class="line">		&lt;plugins&gt;</span><br><span class="line">			&lt;plugin&gt;</span><br><span class="line">				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">				&lt;configuration&gt;</span><br><span class="line">					&lt;excludes&gt;</span><br><span class="line">						&lt;exclude&gt;</span><br><span class="line">							&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">							&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">						&lt;/exclude&gt;</span><br><span class="line">					&lt;/excludes&gt;</span><br><span class="line">				&lt;/configuration&gt;</span><br><span class="line">			&lt;/plugin&gt;</span><br><span class="line">		&lt;/plugins&gt;</span><br><span class="line">	&lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<p>pom.xml 的主要部分：<code>groupId</code> <code>artifactId</code> <code>name</code> <code>dependencies</code></p>
<p>只要加入一个 Spring Boot 启动父依赖即可。 上面的多增加 2 个是从网上拷贝下来的常用依赖。</p>
<h3 id="controller-层">2.2 Controller 层</h3>
<p>直接在目录<code>f:\first_demo\not_doctor_example\src\main\java\com\hylink\not_doctor_example</code>下，创建<code>HelloWorldController.java</code>文件。 具体内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">public class HelloWorldController &#123;</span><br><span class="line"></span><br><span class="line">    @RequestMapping (&quot;/&quot;)</span><br><span class="line">    public String sayHello()&#123;</span><br><span class="line">        return &quot;Hello, world&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@RestController</code> 和<code>@RequestMapping</code> 注解是来自 <code>SpringMVC</code> 的注解，它们不是 <code>SpringBoot</code> 的特定部分。</p>
<ul>
<li>1 <code>@RestController</code>：提供实现了 <code>REST API</code>，可以服务 <code>JSON,XML</code> 或者其他。这里是以 <code>String</code> 的形式渲染出结果。</li>
<li>2 <code>@RequestMapping</code>：提供路由信息，<code>"/“</code>路径的 <code>HTTP Request</code> 都会被映射到 <code>sayHello</code> 方法进行处理。</li>
</ul>
<p>由此可见，SpringBoot 使用非常简单，router 的绑定，直接用 <code>@RequestMapping ("/")</code> 就搞定！ SpringBoot 自己分析这个 router，并提供 http 服务。</p>
<h3 id="启动应用类">2.3 启动应用类</h3>
<p>和第一段描述一样，开箱即用。如下面 Application 类：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.not_doctor_example;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class NotDoctorExampleApplication &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		SpringApplication.run(NotDoctorExampleApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>1 <code>@SpringBootApplication</code>：<code>Spring Boot</code> 应用的标识</p></li>
<li><p>2 <code>Application</code>很简单，一个<code>main</code>函数作为主入口。<code>SpringApplication</code>引导应用，并将 <code>Application</code> 本身作为参数传递给 <code>run</code> 方法。具体 <code>run</code> 方法会启动嵌入式的 <code>Tomcat</code> 并初始化 <code>Spring</code> 环境及其各 <code>Spring</code> 组件。</p></li>
</ul>
<h3 id="controller-层测试类">2.4 Controller 层测试类</h3>
<p>一个好的程序，不能缺少好的 UT。针对 HelloWorldController 的 UT 如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Spring Boot HelloWorldController 测试 - &#123;@link HelloWorldController&#125;</span><br><span class="line"> *</span><br><span class="line"> * Created on 2022/11/24.</span><br><span class="line"> */</span><br><span class="line">public class HelloWorldControllerTest &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testSayHello() &#123;</span><br><span class="line">        assertEquals( &quot;Hello,World!&quot; , new HelloWorldController().sayHello());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="运行">运行</h2>
<p>Just Run 的宗旨，运行很简单，直接右键 Run 运行 Application 类。同样你也可以 Debug Run。可以在控制台中看到：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Tomcat started on port(s): 8080 (http)</span><br><span class="line">Started Application  in 5.986 seconds (JVM running  for 7.398)</span><br></pre></td></tr></table></figure>
<p>然后访问 http://localhost:8080/ ,即可在页面中看到 Spring Boot 对你 say hello：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello, world</span><br></pre></td></tr></table></figure>
<h2 id="优化">优化</h2>
<p>在上面的例子中，<code>HelloWorldController.java</code> <code>Greeting.java</code> <code>GreetingController.java</code> <code>HelloWorldApplication.java</code> 这 4 个文件在同一个目录，在实际项目中不合理，需要优化。</p>
<p>优化的方法： 建立<code>Controller</code>和<code>Service</code>目录，对应的代码放到对应目录下</p>
<h3 id="service-目录">1 service 目录</h3>
<p>此目录实现“业务逻辑代码”</p>
<p>在<code>src\main\java\com\hylink\not_doctor_example</code>下建立<code>service</code>目录， 所有 service 的代码都放到此目录下。</p>
<p><code>src\main\java\com\hylink\not_doctor_example\service\Greeting.java</code>文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.not_doctor_example.service;</span><br><span class="line"></span><br><span class="line">public class Greeting &#123;</span><br><span class="line">    private final long id;</span><br><span class="line">    private final String content;</span><br><span class="line"></span><br><span class="line">    public Greeting(long id, String content)&#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">        this.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public long getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getContent() &#123;</span><br><span class="line">        return content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="controller-目录">2 Controller 目录</h3>
<p>此目录主要负责“业务流程控制”</p>
<p>在<code>src\main\java\com\hylink\not_doctor_example</code>下建立<code>controller</code>目录， 所有 Controller 的代码都放到此目录下。</p>
<p><code>src\main\java\com\hylink\not_doctor_example\controller\HelloWorldController.java</code>文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.not_doctor_example.controller;</span><br><span class="line"></span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">public class HelloWorldController &#123;</span><br><span class="line"></span><br><span class="line">    @RequestMapping (&quot;/&quot;)</span><br><span class="line">    public String sayHello()&#123;</span><br><span class="line">        return &quot;Hello, world&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此 Controller 实现的目录： 处理 HTTP 的"/"请求</p>
<p><code>src\main\java\com\hylink\not_doctor_example\controller\GreetingController.java</code>文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.not_doctor_example.controller;</span><br><span class="line"></span><br><span class="line">import java.util.concurrent.atomic.AtomicLong;</span><br><span class="line"></span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">import com.hylink.not_doctor_example.service.*;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">public class GreetingController &#123;</span><br><span class="line"></span><br><span class="line">    private static final String template = &quot;Hello, %s!&quot;;</span><br><span class="line">    private final AtomicLong counter = new AtomicLong();</span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;/greeting&quot;)</span><br><span class="line">    public Greeting greeting(@RequestParam(value = &quot;name&quot;, defaultValue = &quot;World&quot;)String name)&#123;</span><br><span class="line">        return new Greeting(counter.incrementAndGet(), String.format(template, name));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注： GreetingController.java 代码里，用到 service 的 Greeting</strong></p>
<h3 id="根目录-application.java">3 根目录 application.java</h3>
<p>此文件负责 SpringBoot 的启动</p>
<p><code>src\main\java\com\hylink\not_doctor_example\NotDoctorExampleApplication.java</code>文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.hylink.not_doctor_example;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.context.annotation.ComponentScan;</span><br><span class="line"></span><br><span class="line">@ComponentScan(value = &quot;com.hylink.not_doctor_example.controller&quot;)</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class NotDoctorExampleApplication &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		SpringApplication.run(NotDoctorExampleApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong></p>
<ul>
<li>1 <strong>要添加这句： <code>@ComponentScan(value = "com.hylink.not_doctor_example.controller")</code></strong> 如果不添加，服务启动后，会出现这样的错误：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WhiteLable Error Page</span><br><span class="line"></span><br><span class="line">This application has no explicit mapping for /error, so you are seeing this as a fallback.</span><br><span class="line"></span><br><span class="line">There was an unexpected error (type=Not Found, status=404)</span><br><span class="line">No message available</span><br></pre></td></tr></table></figure>
<ul>
<li>2 看别的项目，有点添加 <code>@MapperScan("com.hylink.wisemedical")</code> 这个是 mybatis 里的，以后有待验证</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import org.mybatis.spring.annotation.MapperScan;</span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author arvin</span><br><span class="line"> */</span><br><span class="line">@SpringBootApplication</span><br><span class="line">@MapperScan(&quot;com.hylink.not_doctor_example&quot;)</span><br><span class="line">@Configuration</span><br><span class="line">public class Application &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		SpringApplication.run(Application.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/24/tool_use/java/SpringBoot/SpingBoot%E5%AD%A6%E4%B9%A0_1_helloworld/" data-id="clb4ew65x003gcctj393u9475" data-title="SpringBoot学习_1_helloworld" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-tool_use/java/SpringBoot/SpringBoot学习_2_mysql" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/24/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_2_mysql/" class="article-date">
  <time class="dt-published" datetime="2022-11-24T08:09:00.000Z" itemprop="datePublished">2022-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/24/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_2_mysql/">SpringBoot学习_2_mysql</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<p>JPA 这个文档，和 MySQL8.0 数据库连接不上，windows 命令行是能连接数据库并操作的。 放弃 Springboot 的 JPA 链接数据库：</p>
<ul>
<li>公司项目，是 <code>mybatis-plus-boot-starter</code> 链接数据库</li>
</ul>
<h2 id="springboot-学习_2----mysql">SpringBoot 学习_2----&gt;mysql</h2>
<p>来源： https://spring.io/guides/gs/accessing-data-mysql/#initial</p>
<h2 id="创建一个通过-springboot-访问-mysql-数据库的新工程">1 创建一个通过 SpringBoot 访问 mysql 数据库的新工程</h2>
<ul>
<li>1 根据文档《VSCode 搭建 SpringBoot 开发环境》 ----》 创建 SpringBoot 项目，共 9 个步骤</li>
<li>2 创建过程中，选择 maven 和 java</li>
<li>3 依赖选择： <code>Spring Web</code> <code>Spring Data JPA</code> <code>MySQL Driver</code></li>
<li>4 点击生成</li>
<li>5 打开项目，VSCode 项目自动下载必要的依赖文件</li>
</ul>
<h2 id="创建对应的-mysql-数据库">2 创建对应的 MySQL 数据库</h2>
<p>在 windows 命令行打开 mysql:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\DELL&gt;mysql -uroot -p</span><br><span class="line">Enter password: ********</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 14</span><br><span class="line">Server version: 8.0.31 MySQL Community Server - GPL</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2022, Oracle and/or its affiliates.</span><br></pre></td></tr></table></figure>
<p>创建一个新的数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database db_example; -- 创建新的数据库</span><br><span class="line">mysql&gt; create user &#x27;springuser&#x27;@&#x27;%&#x27; identified by &#x27;ThePassword&#x27;; -- 创建新的数据库用户</span><br><span class="line">mysql&gt; grant all on db_example.* to &#x27;springuser&#x27;@&#x27;%&#x27;; -- 把新的数据库db_example所有权限给新用户</span><br></pre></td></tr></table></figure>
<h2 id="创建application.properties文件">3 创建<code>application.properties</code>文件</h2>
<p>SpringBoot 默认的数据库是<code>H2</code>。想要用 MySQL，需要在<code>application.properties</code>文件里进行配置 创建一个资源文件： <code>src/main/resources/application.properties</code>，里面内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.jpa.hibernate.ddl-auto=update</span><br><span class="line">spring.datasource.url=jdbc:mysql://$&#123;MYSQL_HOST:localhost&#125;:3306/db_example</span><br><span class="line">spring.datasource.username=springuser</span><br><span class="line">spring.datasource.password=ThePassword</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line">#spring.jpa.show-sql: true</span><br></pre></td></tr></table></figure>
<p>这里，<code>spring.jpa.hibernate.ddl-auto</code>的操作是：<code>none</code> <code>update</code> <code>create</code> or <code>create-drop</code>。具体见<a target="_blank" rel="noopener" href="https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl">Hibernate 文档</a></p>
<ul>
<li><code>None</code>： <code>MySQL</code>默认操作，不改变数据库结构</li>
<li><code>update</code>： Hibernate 根据 entity 的结构改变数据库</li>
<li><code>create</code>： 每次都新建数据库，关闭时不删除</li>
<li><code>create-drop</code>： 创建数据库并且<code>SessionFactory</code>关闭时删除</li>
</ul>
<p>1 一开始必须选 <code>create</code> 或者 <code>update</code>，因为刚开始没有数据库 2 运行之后，根据程序需要，改成 <code>update</code> 或者 <code>none</code> 3 只有在改变数据库数据结构的时候，才使用 <code>update</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">实际应用中，spring的数据库用户应该只有：`select` `update` `insert` `delete`这4个权限。</span><br><span class="line">请根据实际需求，设置数据库用户的权限。</span><br></pre></td></tr></table></figure>
<h2 id="创建-entity-模型">4 创建 <code>@Entity</code> 模型</h2>
<p>你必须要创建一个实体模型，例如：<code>src/main/java/com/demo_example/accessingdatamysql/User.java</code>,内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package com.example.accessingdatamysql;</span><br><span class="line"></span><br><span class="line">import javax.persistence.Entity;</span><br><span class="line">import javax.persistence.GeneratedValue;</span><br><span class="line">import javax.persistence.GenerationType;</span><br><span class="line">import javax.persistence.Id;</span><br><span class="line"></span><br><span class="line">@Entity // This tells Hibernate to make a table out of this class</span><br><span class="line">public class User &#123;</span><br><span class="line">  @Id</span><br><span class="line">  @GeneratedValue(strategy=GenerationType.AUTO)</span><br><span class="line">  private Integer id;</span><br><span class="line"></span><br><span class="line">  private String name;</span><br><span class="line"></span><br><span class="line">  private String email;</span><br><span class="line"></span><br><span class="line">  public Integer getId() &#123;</span><br><span class="line">    return id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void setId(Integer id) &#123;</span><br><span class="line">    this.id = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public String getName() &#123;</span><br><span class="line">    return name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void setName(String name) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public String getEmail() &#123;</span><br><span class="line">    return email;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void setEmail(String email) &#123;</span><br><span class="line">    this.email = email;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Hibernate 会自动根据这个实体模型转换成 MySQL 对应的数据库表</p>
<p>注意： 如果提示 <code>The import javax.persistence cannot be resolved</code> 修改项目的 <code>pom.xml</code> 文件，增加依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;</span><br><span class="line">   	&lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;</span><br><span class="line">   	&lt;version&gt;1.0.0.Final&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h2 id="创建仓库repository">5 创建仓库<code>Repository</code></h2>
<p>需要创建一个仓库，用来保存用户数据：<code>src/main/java/com/demo_example/accessingdatamysql/UserRepository.java</code>, 内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package com.example.accessingdatamysql;</span><br><span class="line"></span><br><span class="line">import org.springframework.data.repository.CrudRepository;</span><br><span class="line"></span><br><span class="line">import com.example.accessingdatamysql.User;</span><br><span class="line"></span><br><span class="line">// This will be AUTO IMPLEMENTED by Spring into a Bean called userRepository</span><br><span class="line">// CRUD refers Create, Read, Update, Delete</span><br><span class="line"></span><br><span class="line">public interface UserRepository extends CrudRepository&lt;User, Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>spring 会自动实现这个仓库的接口</p>
<h2 id="创建一个controller">6 创建一个<code>Controller</code></h2>
<p>需要创建一个处理 HTTP 请求的 controller，例如：<code>src/main/java/com/demo_example/accessingdatamysql/MainController.java</code> 内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package com.demo_example.accessingdatamysql;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line">import org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line">@Controller // 这里表示这个class是一个Controller</span><br><span class="line">@RequestMapping(path=&quot;/demo&quot;) //这个表示URL是以&quot;/demo&quot;开始的（在Application路径后面）</span><br><span class="line">public class MainController &#123;</span><br><span class="line">    @Autowired //这里通过调用UserRepository得到一个bean，由spring自动生成，我们要用到这个数据</span><br><span class="line">    private UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    @PostMapping(path=&quot;add&quot;) // 只映射POST请求</span><br><span class="line">    public @ResponseBody String addNewUser(@RequestParam String name, @RequestParam String email) &#123;</span><br><span class="line">        // @ResponseBody 意思是这个返回的string是response，not a view name</span><br><span class="line">        // @RequestParam 意思这个参数是GET或者POST请求里的参数</span><br><span class="line">        User n = new User();</span><br><span class="line">        n.setName(name);</span><br><span class="line">        n.setEmail(email);</span><br><span class="line">        userRepository.save(n);</span><br><span class="line">        return &quot;Saved&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @GetMapping(path=&quot;/all&quot;)</span><br><span class="line">    public @ResponseBody Iterable&lt;User&gt; getAllUsers() &#123;</span><br><span class="line">        // this returns a JSON or XML with the users</span><br><span class="line">        return userRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个示例只展示了 <code>POST</code> 和 <code>GET</code> 的用法。 <code>@RequestMapping</code>默认支持 HTTP 的所有请求</p>
</blockquote>
<h2 id="创建一个-application-class">7 创建一个 Application Class</h2>
<p>Spring 在初始化的时候，会自动创建一个简单的 Application Class。 下面这个示例</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/24/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_2_mysql/" data-id="clb4ew65y003jcctj7ne39tqm" data-title="SpringBoot学习_2_mysql" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-tool_use/java/SpringBoot/SpringBoot学习_3_项目的三层架构与代码角色" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/24/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_3_%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%A7%92%E8%89%B2/" class="article-date">
  <time class="dt-published" datetime="2022-11-24T08:09:00.000Z" itemprop="datePublished">2022-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/24/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_3_%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%A7%92%E8%89%B2/">SpringBoot学习_3_项目的三层架构与代码角色</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>来源： https://blog.csdn.net/Freer_von/article/details/126097642</p>
<h1 id="springboot-学习3项目的三层架构与代码角色">SpringBoot 学习<em>3</em>项目的三层架构与代码角色</h1>
<h2 id="一-spingboot-三层架构">一、 SpingBoot 三层架构</h2>
<p>目前，大部分后端项目主要目的是暴露功能接口（API）到网络上，由前端程序访问这些接口并获取数据，然后展示在界面上，它们之间遵从 Restful 规约；还有一部分项目暴露方法，让前端代码实现远程调用，采用的是 RPC 的思想。</p>
<p>但是无论如何，后端程序存在的意义就是交换、处理和记录数据。 以下介绍均基于后端项目暴露 API。</p>
<p><strong>注：</strong> 控制层和服务层的任何一个类都不应该有成员变量，以免造成并发问题。 后端三层架构的任何一个方法都需要考虑方法的健壮性问题，包括入参为空、返回值为空、代码逻辑出错等问题。</p>
<h3 id="控制层-controller">1 控制层： Controller</h3>
<p>控制层的主要作用是与前端进行交互，即暴露 API 到网络上，只负责接收数据和返回数据，对数据进行的任何复杂的处理都需要调用 Service 层的方法。</p>
<p>Controller 层负责具体的业务模块流程的控制，controller 层负责前后端交互：</p>
<ul>
<li>1 接受前端请求，</li>
<li>2 调用 service 层，</li>
<li>3 接收 service 层返回的数据，</li>
<li>4 最后返回具体的页面和数据到客户端。</li>
</ul>
<p>Controller 层像是一个服务员，他把客人（前端）点的菜（数据、请求的类型等）进行汇总什么口味、咸淡、量的多少，交给厨师长（Service 层），厨师长则告诉沾板厨师（Dao 1）、汤料房（Dao 2）、配菜厨师（Dao 3）等（统称 Dao 层）我需要什么样的半成品，副厨们（Dao 层）就负责完成厨师长（Service）交代的任务。</p>
<p>在具体的项目中，其流程为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Controller--&gt;service接口--&gt;serviceImpl--&gt;dao接口--&gt;daoImpl--&gt;mapper--&gt;db</span><br></pre></td></tr></table></figure>
<p>Controller 层调用 Service 层的方法，Service 层调用 Dao 层中的方法，其中调用的参数是使用 Entity 层进行传递的。</p>
<p>总的来说这样使业务逻辑更加清晰，写代码更加方便。其实就是提供一种规则，让你把相同类型的代码放在一起，这样就形成了层次，从而达到分层解耦、复用、便于测试和维护的目的。</p>
<h3 id="服务层service">2 服务层：Service</h3>
<p>服务层的主要作用是为了迎合业务需求，写一组方法完成对业务数据进行处理、调用持久化方法等操作。服务层的每一个方法的目的都是为了完成一个不可拆分业务的需求。</p>
<p>Service 层主要负责业务模块的逻辑应用设计。先设计放接口的类，再创建实现的类，然后在配置文件中进行配置其实现的关联。 service 层调用 dao 层接口，接收 dao 层返回的数据，完成项目的基本功能设计。</p>
<blockquote>
<p>封装 Service 层的业务逻辑有利于业务逻辑的独立性和重复利用性。</p>
</blockquote>
<h3 id="持久化层daorepositorymapper">3 持久化层：Dao、repository、Mapper</h3>
<p>持久化层的主要作用就是为了与数据库交互。例如：实现单表或多表的增删改查。</p>
<p>DAO 层=mapper 层，现在用 Mybatis 逆向工程生成的 mapper 层，其实就是 dao 层。DAO 层会调用 entity 层，DAO 中会定义实际使用到的方法，比如增删改查。DAO 层的数据源和数据库连接的参数都是在配置文件中进行配置的，配置文件一般在同层的 XML 文件夹中。数据持久化操作就是指，把数据放到持久化的介质中，同时提供增删改查操作。</p>
<h3 id="entity-层实体层-数据库在项目中的类">4 Entity 层：实体层 数据库在项目中的类</h3>
<p>Entity 层是实体层，也就是所谓的 model，也称为 pojo 层，是数据库在项目中的类，该文件包含实体类的属性和对应属性的 set、get 方法；</p>
<h2 id="二-后端代码角色">二、 后端代码角色</h2>
<p>后端代码角色除了三层架构对应的包和类，还有包括但不限于以下部分：</p>
<ul>
<li>全局变量(properties、yml)、</li>
<li>项目设置类(config)、</li>
<li>基础信息类(common)、</li>
<li>实体类(entity)、</li>
<li>工具类(util)、</li>
<li>数据传输类(dto)、</li>
<li>异常处理类(exception)</li>
</ul>
<h3 id="全局变量propertiesyml">1 全局变量(properties、yml)</h3>
<p>全局变量一般以资源文件的形式存放在 resource 目录下，文件名一般为 application.properties 或者 application.yml。</p>
<p>而且在实际应用中，不同的环境配置不同的文件，例如：上线运行环境名为 application-prod.properties、开发和测试环境名为 application-dev.properties。上线运行环境中的数据库中的数据一旦修改会造成严重错误，而开发测试环境中的数据是真实数据的一个副本或者假数据。</p>
<p>这些文件中的内容含有数据库连接需要的信息，如 username、password、driver、url 等；还有当前项目或应用的全局路径和接口，如 port、path 等；还可以使用 Profiles.active 指定当前环境的运行环境，但是不建议在这里或者使用@ActiveProfile 进行指定，如有需要指定运行环境，可以在启动时添加-Dspring.profiles.active = 指定值。</p>
<h3 id="项目设置类config">2 项目设置类(config)</h3>
<p>项目配置类一般用来指定当前 SpringBoot 项目的配置。如：指定扫描路径@ComponentScan 等</p>
<h3 id="基础信息类common">3 基础信息类(common)</h3>
<p>基础信息类的作用是规定 API 返回的基础信息，如规定返回格式为： {操作时间，错误信息，数据对象}</p>
<h3 id="实体类entity">4 实体类(entity)</h3>
<p>实体类的作用是对应数据库中的表，以便于读取和写入，或者使用框架。数据库中的一张表对应一个实体类，一个列名（字段）对应实体类的一个属性，一行对应该类的一个对象。</p>
<h3 id="数据传输类dto">5 数据传输类(dto)</h3>
<p>数据传输类是为了迎合业务需求而创建的类。 与实体类不同的是：</p>
<ul>
<li>（1）dto 一般是多个表组合起来对应的一张表</li>
<li>（2）属性名和数据库列名会有较大不同</li>
<li>（3）实体类用于与数据库交互，dto 用于作为参数在不同层级间传输，或者传输到前端</li>
</ul>
<p>为了迎合业务需求，dto 中的属性可能由多个表列名（字段）对应。 为了数据库安全性，dto 属性名不应该完全与数据库字段名相似</p>
<h3 id="工具类util">6 工具类(util)</h3>
<p>工具类一般是自己编写的用于数据处理的工具类 如：</p>
<ul>
<li>（1）为了验证文件正确性，求文件散列值</li>
<li>（2）为了便于处理，将对象转换为 Map</li>
<li>（…）等</li>
</ul>
<h3 id="异常处理类exception">7 异常处理类(exception)</h3>
<p>异常处理类是对异常进行处理的类，是一个自定义的 exception 类，在任何一个地方都可以抛出并且阻断当前任务。有助于给前端明确的提示信息，并且能够记录错误日志</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/24/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_3_%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%A7%92%E8%89%B2/" data-id="clb4ew663004rcctjg29f9wo7" data-title="SpringBoot学习_3_项目的三层架构与代码角色" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-tool_use/java/VSCode搭建SpringBoot开发环境" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/24/tool_use/java/VSCode%E6%90%AD%E5%BB%BASpringBoot%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" class="article-date">
  <time class="dt-published" datetime="2022-11-24T04:09:00.000Z" itemprop="datePublished">2022-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/24/tool_use/java/VSCode%E6%90%AD%E5%BB%BASpringBoot%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">VSCode搭建SpringBoot开发环境</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<p>参考文章： https://blog.csdn.net/qq_14818715/article/details/121766848</p>
<h1 id="简介">简介</h1>
<p>此文是介绍，如何用 VSCode 搭建 SpringBoot 开发环境，进行 java 开发</p>
<h2 id="一-安装对应的开发软件">一 安装对应的开发软件</h2>
<h3 id="jdk-环境配置">1 JDK 环境配置</h3>
<p>官网下载： <a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javase-downloads.html">Java SE Downloads</a></p>
<h4 id="下载-jdk">下载 JDK</h4>
<p>这里下载 Java 17 LTS： https://download.oracle.com/java/17/latest/jdk-17_windows-x64_bin.msi</p>
<p>安装目录选择： D:.5</p>
<blockquote>
<p>注： 默认路径里“Program Files”里有“空格”，为减少以后麻烦，换没空格的目录</p>
</blockquote>
<h4 id="设置-jdk-环境变量">设置 JDK 环境变量</h4>
<p>windows 10 的 "设置" --&gt; "系统" --&gt; "关于" --&gt; "系统信息" --&gt; "高级系统设置" --&gt; "环境变量" windows 的环境变量：</p>
<ul>
<li>JAVA_HOME：<code>你的 jdk 安装路径,例如： D:\software\Java\jdk-17.0.5</code></li>
<li>Path：<code>%JAVA_HOME%\bin</code></li>
<li>Path：<code>%JAVA_HOME%\jre\bin</code></li>
<li>CLASSPATH：<code>.;%JAVA_HOME%\bin;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar</code>;</li>
<li>JAVA_OPTIONS：<code>Xmx512M</code></li>
</ul>
<p>注意：CLASSPATH 在 jdk1.5 之后可以不在设置，但建议保留设置。如果在查看 java 版本时出现下列代码，则需要配置 JAVA*OPTIONS</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Unrecognized option: -Version</span><br><span class="line">Error: Could not create the Java Virtual Machine</span><br><span class="line">Error: A fatal exception has occurred. Program will exit.</span><br></pre></td></tr></table></figure>
<h4 id="测试是否安装成功">测试是否安装成功</h4>
<p>打开 windows 命令窗口，输入：<code>java</code> <code>javac</code> <code>java -version</code>，出现以下内容即为成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\DELL&gt;java</span><br><span class="line">用法：java [options] &lt;主类&gt; [args...]</span><br><span class="line">           （执行类）</span><br><span class="line">   或  java [options] -jar &lt;jar 文件&gt; [args...]</span><br><span class="line">           （执行 jar 文件）</span><br><span class="line">   或  java [options] -m &lt;模块&gt;[/&lt;主类&gt;] [args...]</span><br><span class="line">       java [options] --module &lt;模块&gt;[/&lt;主类&gt;] [args...]</span><br><span class="line">           （执行模块中的主类）</span><br><span class="line">   或  java [options] &lt;源文件&gt; [args]</span><br><span class="line">           （执行单个源文件程序）</span><br><span class="line"></span><br><span class="line"> 将主类、源文件、-jar &lt;jar 文件&gt;、-m 或</span><br><span class="line"> --module &lt;模块&gt;/&lt;主类&gt; 后的参数作为参数</span><br><span class="line"> 传递到主类。</span><br><span class="line"></span><br><span class="line"> 其中，选项包括：</span><br><span class="line"></span><br><span class="line">    -cp &lt;目录和 zip/jar 文件的类搜索路径&gt;</span><br><span class="line">    -classpath &lt;目录和 zip/jar 文件的类搜索路径&gt;</span><br><span class="line">    --class-path &lt;目录和 zip/jar 文件的类搜索路径&gt;</span><br><span class="line">                  使用 ; 分隔的, 用于搜索类文件的目录, JAR 档案</span><br><span class="line">                  和 ZIP 档案列表。</span><br><span class="line">    -p &lt;模块路径&gt;</span><br><span class="line">    --module-path &lt;模块路径&gt;...</span><br><span class="line">                  用 ; 分隔的目录列表, 每个目录</span><br><span class="line">                  都是一个包含模块的目录。</span><br><span class="line">    --upgrade-module-path &lt;模块路径&gt;...</span><br><span class="line">                  用 ; 分隔的目录列表, 每个目录</span><br><span class="line">                  都是一个包含模块的目录, 这些模块</span><br><span class="line">                  用于替换运行时映像中的可升级模块</span><br><span class="line">    --add-modules &lt;模块名称&gt;[,&lt;模块名称&gt;...]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:\Users\DELL&gt;javac</span><br><span class="line">用法: javac &lt;options&gt; &lt;source files&gt;</span><br><span class="line">其中, 可能的选项包括:</span><br><span class="line">  @&lt;filename&gt;                  从文件读取选项和文件名</span><br><span class="line">  -Akey[=value]                传递给注释处理程序的选项</span><br><span class="line">  --add-modules &lt;模块&gt;(,&lt;模块&gt;)*</span><br><span class="line">        除了初始模块之外要解析的根模块; 如果 &lt;module&gt;</span><br><span class="line">                为 ALL-MODULE-PATH, 则为模块路径中的所有模块。</span><br><span class="line">  --boot-class-path &lt;path&gt;, -bootclasspath &lt;path&gt;</span><br><span class="line">        覆盖引导类文件的位置</span><br><span class="line">  --class-path &lt;path&gt;, -classpath &lt;path&gt;, -cp &lt;path&gt;</span><br><span class="line">        指定查找用户类文件和注释处理程序的位置</span><br><span class="line">  -d &lt;directory&gt;               指定放置生成的类文件的位置</span><br><span class="line">  -deprecation                 输出使用已过时的 API 的源位置</span><br><span class="line">  --enable-preview             启用预览语言功能。要与 -source 或 --release 一起使用。</span><br><span class="line">  -encoding &lt;encoding&gt;         指定源文件使用的字符编码</span><br><span class="line">  -endorseddirs &lt;dirs&gt;         覆盖签名的标准路径的位置</span><br><span class="line">  -extdirs &lt;dirs&gt;              覆盖所安装扩展的位置</span><br><span class="line">  -g                           生成所有调试信息</span><br><span class="line">  -g:&#123;lines,vars,source&#125;       只生成某些调试信息</span><br><span class="line">  -g:none                      不生成任何调试信息</span><br><span class="line">  -h &lt;directory&gt;               指定放置生成的本机标头文件的位置</span><br><span class="line">  --help, -help, -?            输出此帮助消息</span><br><span class="line">  --help-extra, -X             输出额外选项的帮助</span><br><span class="line">  -implicit:&#123;none,class&#125;       指定是否为隐式引用文件生成类文件</span><br><span class="line">  -J&lt;flag&gt;                     直接将 &lt;标记&gt; 传递给运行时系统</span><br><span class="line">  --limit-modules &lt;模块&gt;(,&lt;模块&gt;)*</span><br><span class="line">        限制可观察模块的领域</span><br><span class="line">  --module &lt;模块&gt;(,&lt;模块&gt;)*, -m &lt;模块&gt;(,&lt;模块&gt;)*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:\Users\DELL&gt;java -version</span><br><span class="line">java version &quot;17.0.5&quot; 2022-10-18 LTS</span><br><span class="line">Java(TM) SE Runtime Environment (build 17.0.5+9-LTS-191)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 17.0.5+9-LTS-191, mixed mode, sharing)</span><br></pre></td></tr></table></figure>
<h3 id="maven-环境配置">2 Maven 环境配置</h3>
<h4 id="下载-maven">下载 Maven</h4>
<p>官网下载：<a target="_blank" rel="noopener" href="https://maven.apache.org/download.cgi">Download Apache Maven</a></p>
<p>这里选择最新版本：https://dlcdn.apache.org/maven/maven-3/3.8.6/binaries/apache-maven-3.8.6-bin.zip</p>
<p>Maven 不是按照程序，直接解压配置好环境就可以使用 把解压的 Mave 目录直接放到 <code>D:\sotware</code>，变成： <code>D:\software\apache-maven-3.8.6</code></p>
<h4 id="配置-maven-环境变量">配置 maven 环境变量</h4>
<p>windows 10 的 "设置" --&gt; "系统" --&gt; "关于" --&gt; "系统信息" --&gt; "高级系统设置" --&gt; "环境变量" windows 的环境变量：</p>
<ul>
<li>MAVEN_HOME：maven 路径</li>
<li>Path：%MAVEN_HOME%</li>
<li>M2_HOME：你的 settings.xml 文件位置</li>
</ul>
<h4 id="测试">测试</h4>
<p>打开 windows 命令窗口，输入：<code>mvn -v</code>出现以下内容即为成功：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\DELL&gt;mvn --version</span><br><span class="line">Apache Maven 3.8.6 (84538c9988a25aec085021c365c560670ad80f63)</span><br><span class="line">Maven home: D:\software\apache-maven-3.8.6</span><br><span class="line">Java version: 17.0.5, vendor: Oracle Corporation, runtime: D:\software\Java\jdk-17.0.5</span><br><span class="line">Default locale: zh_CN, platform encoding: GBK</span><br><span class="line">OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;</span><br></pre></td></tr></table></figure>
<h4 id="maven-配置">maven 配置</h4>
<p>下面的内容，<strong>阿里云镜像一定要配置，创建 springboot 项目，用阿里云镜像下载依赖文件，又快又不出错</strong> 不配置阿里云镜像，会随机出现<strong>下载超时</strong>（看网络情况，随机出现）</p>
<p>找到 maven 路径下 conf/settings.xml 文件，在文件在文件中添加相应代码；</p>
<ul>
<li>设置本地仓库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;localRepository&gt;本地仓库地址&lt;localRepository&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>修改默认的 JDK 版本</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;profile&gt;</span><br><span class="line">    &lt;id&gt;JDK-17&lt;/id&gt;</span><br><span class="line">    &lt;activation&gt;</span><br><span class="line">        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</span><br><span class="line">        &lt;jdk&gt;17&lt;/jdk&gt;</span><br><span class="line">    &lt;/activation&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;</span><br><span class="line">        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;</span><br><span class="line">        &lt;maven.compiler.compilerVersion&gt;17&lt;/maven.compiler.compilerVersion&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">&lt;/profile&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>添加阿里镜像源</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirrors&gt;</span><br><span class="line">    &lt;mirror&gt;</span><br><span class="line">        &lt;id&gt;aliyunmaven&lt;/id&gt;</span><br><span class="line">        &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span><br><span class="line">        &lt;name&gt;阿里云公共仓库&lt;/name&gt;</span><br><span class="line">        &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;</span><br><span class="line">    &lt;/mirror&gt;</span><br><span class="line">&lt;/mirrors&gt;</span><br></pre></td></tr></table></figure>
<p>注意：在<code>pom.xml</code>中也可以通过如下代码添加阿里云镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;repositories&gt;</span><br><span class="line">    &lt;repository&gt;</span><br><span class="line">        &lt;id&gt;spring&lt;/id&gt;</span><br><span class="line">        &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;</span><br><span class="line">        &lt;releases&gt;</span><br><span class="line">            &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">        &lt;/releases&gt;</span><br><span class="line">        &lt;snapshots&gt;</span><br><span class="line">            &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">        &lt;/snapshots&gt;</span><br><span class="line">    &lt;/repository&gt;</span><br><span class="line">&lt;/repository&gt;</span><br></pre></td></tr></table></figure>
<h3 id="mysql-环境配置">3 MySQL 环境配置</h3>
<h4 id="下载-mysql">下载 MySQL</h4>
<p>官网下载：<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">Download MySQL</a></p>
<p>下载最新的 8.0.31 版本： https://dev.mysql.com/get/Downloads/MySQLInstaller/mysql-installer-community-8.0.31.0.msi</p>
<h4 id="配置环境">配置环境</h4>
<p>Mysql 的安装就不详细写。 具体见：https://blog.csdn.net/qq_54796785/article/details/125215507</p>
<p>默认 root 的密码: Hy888888</p>
<h4 id="测试-1">测试</h4>
<p>打开 windows 命令窗口，输入：<code>mysql -uroot -p</code>,查询数据库<code>show databases;</code>出现以下内容即为成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\DELL&gt;mysql -uroot -p</span><br><span class="line">Enter password: ********</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 13</span><br><span class="line">Server version: 8.0.31 MySQL Community Server - GPL</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2022, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>
<h3 id="安装-vscode">4 安装 VSCode</h3>
<p>到 VSCode 官网下载最新版本： https://code.visualstudio.com/</p>
<h2 id="二-vscode-配置环境">二 VSCode 配置环境</h2>
<h3 id="打开-vscode-并安装以下两个插件">1 打开 VSCode 并安装以下两个插件：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Java Extension for Pack</span><br><span class="line">Spring Boot Extension Pack</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/388e859c032343b3aa6511e182195457.png" /></p>
<p><img src="https://img-blog.csdnimg.cn/68169c8fbbab4626a9782051c218e059.png" /></p>
<h3 id="配置-java-环境">2 配置 java 环境</h3>
<blockquote>
<p>注意：VSCode 目前仅支持 JDK11 及以上的版本，若使用 JDK11 以下的版本则构建项目时会发生错误。</p>
</blockquote>
<p>在 "文件" --&gt; "首选项" --&gt; "设置" 的界面，找到 "扩展" --&gt; "java 调试器" --&gt; "在 <code>settings.json</code> 中编辑" <code>files.exclude</code>里添加 <code>.classpath</code> <code>.project</code> <code>settings</code> <code>.factorypath</code>,别的是 VSCode 自动加的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/* for java配置---开始*/</span><br><span class="line">&quot;java.home&quot;: &quot;D:\\software\\Java\\jdk-17.0.5&quot;,</span><br><span class="line">&quot;files.exclude&quot;: &#123;</span><br><span class="line">    &quot;**/.git&quot;: true,</span><br><span class="line">    &quot;**/.svn&quot;: true,</span><br><span class="line">    &quot;**/.hg&quot;: true,</span><br><span class="line">    &quot;**/CVS&quot;: true,</span><br><span class="line">    &quot;**/.DS_Store&quot;: true,</span><br><span class="line">    &quot;**/Thumbs.db&quot;: true,</span><br><span class="line">    &quot;**/.classpath&quot;: true,</span><br><span class="line">    &quot;**/.project&quot;: true,</span><br><span class="line">    &quot;**/settings&quot;: true,</span><br><span class="line">    &quot;**/.factorypath&quot;: true</span><br><span class="line">&#125;</span><br><span class="line">/* for java配置---结束*/</span><br></pre></td></tr></table></figure>
<h3 id="配置-maven-环境">3 配置 Maven 环境</h3>
<p><img src="https://img-blog.csdnimg.cn/41d2e058198f4d788f72aa0789829dbc.png" /> <img src="https://img-blog.csdnimg.cn/aa11e6724f1c414c86c17fc1d86ab4cc.png" /></p>
<p>找到 "<code>扩展</code>" 里的 "<code>Java</code>" "<code>Maven for Java</code>"，设置下面 2 项：</p>
<ul>
<li>maven 的 settings.xml</li>
<li>maven 的可执行文件地址</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/5855d7b123044bfa999574f797bf5d7f.png" /> <img src="https://img-blog.csdnimg.cn/91bdc24e42a34ae6a8a288cdd28a7678.png" /></p>
<p>Java 和 Maven 配置完成，settings.json 里的设置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/* for java配置---开始*/</span><br><span class="line">    &quot;java.home&quot;: &quot;D:\\software\\Java\\jdk-17.0.5&quot;,</span><br><span class="line">    &quot;files.exclude&quot;: &#123;</span><br><span class="line">        &quot;**/.git&quot;: true,</span><br><span class="line">        &quot;**/.svn&quot;: true,</span><br><span class="line">        &quot;**/.hg&quot;: true,</span><br><span class="line">        &quot;**/CVS&quot;: true,</span><br><span class="line">        &quot;**/.DS_Store&quot;: true,</span><br><span class="line">        &quot;**/Thumbs.db&quot;: true,</span><br><span class="line">        &quot;**/.classpath&quot;: true,</span><br><span class="line">        &quot;**/.project&quot;: true,</span><br><span class="line">        &quot;**/settings&quot;: true,</span><br><span class="line">        &quot;**/.factorypath&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;java.configuration.maven.userSettings&quot;: &quot;D:\\software\\apache-maven-3.8.6\\conf\\settings.xml&quot;,</span><br><span class="line">    &quot;maven.executable.path&quot;: &quot;D:\\software\\apache-maven-3.8.6\\bin\\mvn&quot;</span><br><span class="line">    /* for java配置---结束*/</span><br></pre></td></tr></table></figure>
<h3 id="创建-springboot-项目">4 创建 SpringBoot 项目</h3>
<h4 id="使用ctrlshiftp调出命令并输入spring选择创建一个-maven-项目">1 使用<code>ctrl+shift+p</code>调出命令并输入<code>spring</code>选择创建一个 maven 项目</h4>
<p><img src="https://img-blog.csdnimg.cn/708474c3f4b44a6aa933ffc6c7abef2c.png" /></p>
<h4 id="选择-springboot-版本">2 选择 SpringBoot 版本</h4>
<p><img src="https://img-blog.csdnimg.cn/7f05cb17ceaa46c8b256a47238b26b08.png" /></p>
<h4 id="选择使用的语言">3 选择使用的语言</h4>
<p><img src="https://img-blog.csdnimg.cn/1aad2884eab64c2da08d094da6a158ee.png" /></p>
<h4 id="你的-group-id-和-artifact-id">4 你的 Group id 和 Artifact Id</h4>
<p><img src="https://img-blog.csdnimg.cn/c2c458ce35e6496c9e7dec0e942ed93b.png" /></p>
<h4 id="选择包类型">5 选择包类型</h4>
<p><img src="https://img-blog.csdnimg.cn/39d2f6c974b44a4ba75cded41d970c53.png" /></p>
<h4 id="选择-java-版本">6 选择 java 版本</h4>
<p><img src="https://img-blog.csdnimg.cn/aab29dcb49804527ae3ed925f9e9e701.png" /></p>
<h4 id="选择需要的依赖">7 选择需要的依赖</h4>
<p><img src="https://img-blog.csdnimg.cn/09e18e7a50014d33b872fae7802dfa2b.png" /></p>
<h4 id="选择保存位置等待创建成功">8 选择保存位置，等待创建成功</h4>
<p><img src="https://img-blog.csdnimg.cn/42d10950d3114942a1f9ad3bb0789bc4.png" /></p>
<h4 id="创建成功后-open-即可使用-f5-进行调试">9 创建成功后 Open 即可(使用 F5 进行调试)</h4>
<p><img src="https://img-blog.csdnimg.cn/6fa856e07263488483ae45aea37216aa.png" /></p>
<p>下面是创建成功后的目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">F:\first_demo&gt;dir /s /b /o:gn</span><br><span class="line">F:\first_demo\not_doctor_example</span><br><span class="line">F:\first_demo\not_doctor_example\.apt_generated_tests</span><br><span class="line">F:\first_demo\not_doctor_example\.mvn</span><br><span class="line">F:\first_demo\not_doctor_example\.vscode</span><br><span class="line">F:\first_demo\not_doctor_example\src</span><br><span class="line">F:\first_demo\not_doctor_example\target</span><br><span class="line">F:\first_demo\not_doctor_example\.gitignore</span><br><span class="line">F:\first_demo\not_doctor_example\HELP.md</span><br><span class="line">F:\first_demo\not_doctor_example\mvnw</span><br><span class="line">F:\first_demo\not_doctor_example\mvnw.cmd</span><br><span class="line">F:\first_demo\not_doctor_example\pom.xml</span><br><span class="line">F:\first_demo\not_doctor_example\.mvn\wrapper</span><br><span class="line">F:\first_demo\not_doctor_example\.mvn\wrapper\maven-wrapper.jar</span><br><span class="line">F:\first_demo\not_doctor_example\.mvn\wrapper\maven-wrapper.properties</span><br><span class="line">F:\first_demo\not_doctor_example\src\main</span><br><span class="line">F:\first_demo\not_doctor_example\src\test</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\java</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\resources</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\java\com</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\java\com\hylink</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\java\com\hylink\not_doctor_example</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\java\com\hylink\not_doctor_example\NotDoctorExampleApplication.java</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\resources\static</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\resources\templates</span><br><span class="line">F:\first_demo\not_doctor_example\src\main\resources\application.properties</span><br><span class="line">F:\first_demo\not_doctor_example\src\test\java</span><br><span class="line">F:\first_demo\not_doctor_example\src\test\java\com</span><br><span class="line">F:\first_demo\not_doctor_example\src\test\java\com\hylink</span><br><span class="line">F:\first_demo\not_doctor_example\src\test\java\com\hylink\not_doctor_example</span><br><span class="line">F:\first_demo\not_doctor_example\src\test\java\com\hylink\not_doctor_example\NotDoctorExampleApplicationTests.java</span><br><span class="line">F:\first_demo\not_doctor_example\target\classes</span><br><span class="line">F:\first_demo\not_doctor_example\target\generated-sources</span><br><span class="line">F:\first_demo\not_doctor_example\target\generated-test-sources</span><br><span class="line">F:\first_demo\not_doctor_example\target\test-classes</span><br><span class="line">F:\first_demo\not_doctor_example\target\classes\com</span><br><span class="line">F:\first_demo\not_doctor_example\target\classes\application.properties</span><br><span class="line">F:\first_demo\not_doctor_example\target\classes\com\hylink</span><br><span class="line">F:\first_demo\not_doctor_example\target\classes\com\hylink\not_doctor_example</span><br><span class="line">F:\first_demo\not_doctor_example\target\classes\com\hylink\not_doctor_example\NotDoctorExampleApplication.class</span><br><span class="line">F:\first_demo\not_doctor_example\target\generated-sources\annotations</span><br><span class="line">F:\first_demo\not_doctor_example\target\generated-test-sources\test-annotations</span><br><span class="line">F:\first_demo\not_doctor_example\target\test-classes\com</span><br><span class="line">F:\first_demo\not_doctor_example\target\test-classes\com\hylink</span><br><span class="line">F:\first_demo\not_doctor_example\target\test-classes\com\hylink\not_doctor_example</span><br><span class="line">F:\first_demo\not_doctor_example\target\test-classes\com\hylink\not_doctor_example\NotDoctorExampleApplicationTests.class</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/24/tool_use/java/VSCode%E6%90%AD%E5%BB%BASpringBoot%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" data-id="clb4ew65q002fcctj7v8o57fh" data-title="VSCode搭建SpringBoot开发环境" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/database/数据库常用操作" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/16/QT/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/" class="article-date">
  <time class="dt-published" datetime="2022-11-16T14:09:48.000Z" itemprop="datePublished">2022-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/16/QT/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/">数据库常用操作</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<p>来源： http://qtdebug.com/qtbook-db-mysql/</p>
<h1 id="数据库常用操作">数据库常用操作</h1>
<p>前面的章节介绍了怎么使用 Qt 连接访问数据库 SQLite 和 MySQL，在这一节里将介绍访问数据库的常用操作，主要内容有:</p>
<ul>
<li>QSqlDatabase</li>
<li>查询
<ul>
<li>使用 Prepared Query 查询</li>
<li>SQL 注入</li>
<li>使用 LIKE 模糊查询</li>
<li>解决列名冲突</li>
</ul></li>
<li>更新</li>
<li>删除</li>
<li>事务</li>
</ul>
<h2 id="准备数据库数据">1 准备数据库数据</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; 小提示</span><br><span class="line">&gt;</span><br><span class="line">&gt; 1. 数据库设计，推荐每个表都有一个无意义的主键，如命名为 id。</span><br><span class="line">&gt; 2. 尽量不使用外键，数据的逻辑关系使用上面提到的无意义的 id 来关联，</span><br><span class="line">&gt;      这样的好处是数据迁移的时候不需要考虑外键的因素而造成很多麻烦，</span><br><span class="line">&gt;      数据的逻辑关系由应用程序来控制，典型的应用有如很有名的电商开发框架 Hybris。</span><br><span class="line">&gt; 3. 因为没有用外键而不能级连删除，如果担心数据库里会留下一些垃圾数据，</span><br><span class="line">&gt;       可以用定时任务在系统负载比较轻的时候删除它们，例如晚上 3 点。</span><br><span class="line">&gt; 4. 如果时间需要根据不同的时区显示，时间相关的字段最好使用 timestamp</span><br><span class="line">&gt;       而不是 datetime，既存储时间的 UTC 毫秒值。</span><br><span class="line">&gt;    例如开发一个会议管理软件，日期使用 datetime 存储，同时有中国，美国，德国人参加会议，</span><br><span class="line">&gt;       如果大家看到开会时间是 2015-03-03 10:00:00，每个人都会自然的认为是自己当地的时间，</span><br><span class="line">&gt;       那么开会的时候就只有你自己一个人了。使用毫秒的话，显示的时候，</span><br><span class="line">&gt;       根据使用者的时区自动显示为当地时间。</span><br><span class="line">&gt;    **在开始讲解之前，先准备好需要用到的数据：**</span><br></pre></td></tr></table></figure>
<ul>
<li>1 创建数据库 <code>qt</code></li>
<li>2 然后在此数据库里创建 3 张表 <code>user</code>, <code>blog</code>, <code>comment</code></li>
<li>在每一张表里插入一些数据</li>
</ul>
<h3 id="创建-user-表">创建 <code>user</code> 表</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `user` (</span><br><span class="line">    `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">    `username` varchar(256) NOT NULL,</span><br><span class="line">    `password` varchar(256) NOT NULL,</span><br><span class="line">    `email` varchar(256) DEFAULT NULL,</span><br><span class="line">    `mobile` varchar(32) DEFAULT NULL,</span><br><span class="line">    PRIMARY KEY (`id`)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">INSERT INTO `user` (`id`, `username`, `password`, `email`, `mobile`) VALUES</span><br><span class="line">(1, &#x27;Alice&#x27;, &#x27;passw0rd&#x27;, NULL, NULL),</span><br><span class="line">(2, &#x27;Bob&#x27;, &#x27;Passw0rd&#x27;, NULL, NULL),</span><br><span class="line">(3, &#x27;Josh&#x27;, &#x27;Pa88w0rd&#x27;, NULL, NULL);</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>username</th>
<th>password</th>
<th>email</th>
<th>mobile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Alice</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="even">
<td>2</td>
<td>Bob</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Josh</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
</tbody>
</table>
<h3 id="创建-blog-表">创建 <code>blog</code> 表</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `blog` (</span><br><span class="line">    `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">    `user_id` int(11) NOT NULL,</span><br><span class="line">    `content` text NOT NULL,</span><br><span class="line">    `created_time` datetime NOT NULL,</span><br><span class="line">    `last_updated_time` datetime NOT NULL,</span><br><span class="line">    PRIMARY KEY (`id`)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">INSERT INTO `blog` (`id`, `user_id`, `content`, `created_time`, `last_updated_time`) VALUES</span><br><span class="line">(1, 1, &#x27;Content of blog 1.&#x27;, &#x27;2015-01-01 10:10:10&#x27;, &#x27;2015-01-01 10:10:10&#x27;),</span><br><span class="line">(2, 2, &#x27;Content of blog 2.&#x27;, &#x27;2015-02-02 20:20:20&#x27;, &#x27;2015-02-02 20:20:20&#x27;);</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>user_id</th>
<th>content</th>
<th>created_time</th>
<th>last_updated_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>Content of blog 1.</td>
<td>2015-01-01 10:10:10</td>
<td>2015-01-01 10:10:10</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>Content of blog 2.</td>
<td>2015-02-02 20:20:20</td>
<td>2015-02-02 20:20:20</td>
</tr>
</tbody>
</table>
<h3 id="创建-comment-表">创建 <code>comment</code> 表</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `comment` (</span><br><span class="line">    `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">    `user_id` int(11) NOT NULL,</span><br><span class="line">    `blog_id` int(11) NOT NULL,</span><br><span class="line">    `content` text NOT NULL,</span><br><span class="line">    `created_time` datetime NOT NULL,</span><br><span class="line">    PRIMARY KEY (`id`)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">INSERT INTO `comment` (`id`, `user_id`, `blog_id`, `content`, `created_time`) VALUES</span><br><span class="line">(1, 1, 1, &#x27;Very useful.&#x27;, &#x27;2015-01-02 11:11:11&#x27;),</span><br><span class="line">(2, 3, 2, &#x27;Super&#x27;, &#x27;2015-03-03 23:33:33&#x27;);</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>user_id</th>
<th>blog_id</th>
<th>content</th>
<th>created_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>Very useful.</td>
<td>2015-01-02 11:11:11</td>
</tr>
<tr class="even">
<td>2</td>
<td>3</td>
<td>2</td>
<td>Super</td>
<td>2015-03-03 23:33:33</td>
</tr>
</tbody>
</table>
<h2 id="qsqldatabase">2 QSqlDatabase</h2>
<p>访问数据库前必须先和数据库建立连接，Qt 里用 <code>QSqlDatabase</code> 表示一个数据库的连接（有点不习惯，既然表示的是连接，有没有觉得如果叫 QSqlConnection 会更好？可惜 Qt 不是我们设计的！），每个连接都有自己的名字 connectionName，用同一个 connectionName 得取的 QSqlDatabase 对象都是表示同一个连接。有一点需要注意，如果要在多线程里访问数据库，<code>每个线程都要使用不同的数据库连接</code>，即每个线程使用的 QSqlDatabase 的 connectionName 都不一样，否则可能会遇到很多预料不到的事。</p>
<h3 id="创建-qsqldatabase-对象用静态函数-qsqldatabaseadddatabase">创建 QSqlDatabase 对象用静态函数 <code>QSqlDatabase::addDatabase()</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QSqlDatabase QSqlDatabase::addDatabase(</span><br><span class="line">    const QString &amp;type,</span><br><span class="line">    const QString &amp;connectionName=QLatin1String(defaultConnection)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>第一个参数 type 是指定数据库的驱动，例如 "<code>QSQLITE</code>", "<code>QMYSQL</code>", "<code>QPSQL</code>"</li>
<li>第二个参数 connectionName 是连接的名字，可以是任意的字符串</li>
</ul>
<h3 id="获取-qsqldatabase-对象用静态函数-qsqldatabasedatabase">获取 QSqlDatabase 对象用静态函数 QSqlDatabase::database()</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QSqlDatabase QSqlDatabase::database(</span><br><span class="line">    const QString &amp;connectionName=QLatin1String(defaultConnection),</span><br><span class="line">    bool open=true</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>第一个参数 connectionName 是连接的名字，调用 <code>QSqlDatabase::addDatabase()</code> 创建连接时使用的连接名</li>
<li>第二个参数 open 为 true，返回连接前打开连接</li>
</ul>
<h3 id="使用默认的-connectionname-创建和获取连接">使用默认的 connectionName 创建和获取连接：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">void createDefaultConnection() &#123;</span><br><span class="line">    QSqlDatabase db = QSqlDatabase::addDatabase(&quot;QMYSQL&quot;);</span><br><span class="line">    db.setHostName(&quot;127.0.0.1&quot;);</span><br><span class="line">    db.setDatabaseName(&quot;qt&quot;); // 如果是 SQLite 则为数据库文件路径</span><br><span class="line">    db.setUserName(&quot;root&quot;);   // 如果是 SQLite 不需要</span><br><span class="line">    db.setPassword(&quot;root&quot;);   // 如果是 SQLite 不需要</span><br><span class="line"></span><br><span class="line">    if (!db.open()) &#123; // 连接数据库</span><br><span class="line">        qDebug() &lt;&lt; &quot;Connect to MySql error: &quot; &lt;&lt; db.lastError().text();</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSqlDatabase getDefaultConnection() &#123;</span><br><span class="line">    return QSqlDatabase::database();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>不提供 connectName，Qt 使用默认的 connectName qt_sql_default_connection</li>
<li>调用 createDefaultConnection() 创建数据库连接</li>
<li>调用 getConnectionByName() 取得数据库连接，多次调用这条语句得到的都是同一个数据库连接</li>
</ul>
<h3 id="给定-connectionname-创建和获取连接">给定 connectionName 创建和获取连接：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">void createConnectionByName(const QString &amp;connectionName) &#123;</span><br><span class="line">    QSqlDatabase db = QSqlDatabase::addDatabase(&quot;QMYSQL&quot;, connectionName);</span><br><span class="line">    db.setHostName(&quot;127.0.0.1&quot;);</span><br><span class="line">    db.setDatabaseName(&quot;qt&quot;); // 如果是 SQLite 则为数据库文件名</span><br><span class="line">    db.setUserName(&quot;root&quot;);   // 如果是 SQLite 不需要</span><br><span class="line">    db.setPassword(&quot;root&quot;);   // 如果是 SQLite 不需要</span><br><span class="line"></span><br><span class="line">    if (!db.open()) &#123; // 连接数据库</span><br><span class="line">        qDebug() &lt;&lt; &quot;Connect to MySql error: &quot; &lt;&lt; db.lastError().text();</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSqlDatabase getConnectionByName(const QString &amp;connectionName) &#123;</span><br><span class="line">    return QSqlDatabase::database(connectionName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>例如 connectName 为 “MyConnection”</li>
<li>调用 createConnectionByName(“MyConnection”) 创建数据库连接</li>
<li>调用 getConnectionByName(“MyConnection”) 取得数据库连接，多次调用这条语句得到的都是同一个数据库连接，因为连接的名字都是同一个</li>
</ul>
<p>重复使用同一个 connectionName 创建数据库连接不会创建多个同名的连接，也不会发生错误，只是会删除已经存在的连接，然后用此 connectionName 重新创建连接。这是很有用的，如程序开始运行的时候数据库连接是好用的，数据库后来崩溃了重启，已有的数据库连接就无效了导致不能访问数据库（不过调用 <code>QDatabase::isOpen()</code> 仍然返回 true），这时还是使用同一个 connectionName 再次创建数据库连接，就可以访问数据库了。</p>
<p><strong>为了防止连接断开导致不能访问数据库，于是每次使用数据库连接的时候就用同样的 connectionName 重新创建一个数据库连接</strong>，这种做法是不可取的，虽然保证了程序的正确性，但是效率很低，因为创建数据库连接底层是 Socket 连接，也就是创建连接时也要进行三次握手等操作。</p>
<p><strong>传递 QSqlDatabase 的栈对象而不是指针或者引用会不会占用很多栈空间，会不会由于调用它的复制构造函数而生成另一个 QSqlDatabase 对象导致什么问题？</strong></p>
<ul>
<li>首先 <code>sizeof(QSqlDatabase)</code> 输出 8，说明 QSqlDatabase 占用 8 个字节。 打开 QSqlDatabase 的源码也可以看到它只有 2 个指针的成员变量 char <em>defaultConnection 和 QSqlDatabasePrivate </em>d，空间不是问题</li>
<li>其次，它的复制构造函数创建的新对象和原来的对象共享 <code>char *defaultConnection</code> 和 <code>QSqlDatabasePrivate *d</code>，使用的是浅拷贝而不是深拷贝，数据也没问题</li>
</ul>
<p>所以可以放心的在函数之间传递 QSqlDatabase 对象而不用担心出什么问题。</p>
<h2 id="qsqlquery">3 QSqlQuery</h2>
<p>使用 QSqlQuery 来执行数据库操作，它有两个重要的构造函数，大多数时候也是用这两种形式来构造 QSqlQuery 对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 如果没有或者传入一个无效的 QSqlDatabase 对象，则使用默认的数据库连接</span><br><span class="line">// 如果 query 不是空字符串，则执行这个 query</span><br><span class="line">QSqlQuery::QSqlQuery(const QString &amp;query=QString(), QSqlDatabase db=QSqlDatabase())</span><br></pre></td></tr></table></figure>
<ul>
<li><code>QSqlQuery query("SELECT * FROM user")</code>，使用默认的数据库连接执行查询操作</li>
<li><code>QSqlQuery query</code>，则会使用默认的数据库连接创建一个 QSqlQuery 对象，但是不执行任何操作。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 使用指定的数据库连接创建 QSqlQuery 对象，如果数据库连接无效，则使用默认的数据库连接</span><br><span class="line">QSqlQuery::QSqlQuery(QSqlDatabase db)</span><br></pre></td></tr></table></figure>
<h2 id="查询操作">4 查询操作</h2>
<p>已经有了数据库和相关数据，了解了 QSqlDatabase 和 QSqlQuery，接下来就可以举例使用 QSqlQuery 执行数据库操作，分析可能遇到的问题以及解决办法。为了简单起见，都使用默认的数据库连接，思考一下下面的例子里怎么把默认的数据库连接换成我们自己指定的 connectionName 的连接呢？</p>
<h3 id="输出-user-表里所有的-id-username-password">4.1 输出 user 表里所有的 id, username, password</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 输出 user 表里所有的 id, username, password</span><br><span class="line"> */</span><br><span class="line">void outputIdUsernamePassword() &#123;</span><br><span class="line">    QSqlQuery query(&quot;SELECT id, username, password FROM user&quot;);</span><br><span class="line"></span><br><span class="line">    while (query.next()) &#123;</span><br><span class="line">        qDebug() &lt;&lt; QString(&quot;Id: %1, Username: %2, Password: %3&quot;)</span><br><span class="line">                    .arg(query.value(&quot;id&quot;).toInt())</span><br><span class="line">                    .arg(query.value(&quot;username&quot;).toString())</span><br><span class="line">                    .arg(query.value(&quot;password&quot;).toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出:</p>
<blockquote>
<p>“Id: 1, Username: Alice, Password: passw0rd” “Id: 2, Username: Bob, Password: Passw0rd” “Id: 3, Username: Josh, Password: Pa88w0rd”</p>
</blockquote>
<h3 id="输出-username-为-alice-的-user">4.2 输出 username 为 Alice 的 user</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1. 函数定义</span><br><span class="line">/**</span><br><span class="line"> * 输出 user 其 username 等于传入的参数 username</span><br><span class="line"> * @param username</span><br><span class="line"> */</span><br><span class="line">void outputUser(const QString &amp;username) &#123;</span><br><span class="line">    QString sql = &quot;SELECT * FROM user WHERE username=&#x27;&quot; + username + &quot;&#x27;&quot;;</span><br><span class="line">    QSqlQuery query(sql);</span><br><span class="line"></span><br><span class="line">    while (query.next()) &#123;</span><br><span class="line">        qDebug() &lt;&lt; QString(&quot;Id: %1, Username: %2, Password: %3&quot;)</span><br><span class="line">                    .arg(query.value(&quot;id&quot;).toInt())</span><br><span class="line">                    .arg(query.value(&quot;username&quot;).toString())</span><br><span class="line">                    .arg(query.value(&quot;password&quot;).toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">2. 函数调用</span><br><span class="line">outputUser(&quot;Alice&quot;);</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<blockquote>
<p>“Id: 1, Username: Alice, Password: passw0rd”</p>
</blockquote>
<p>输出结果和我们期待的一样。但是思考一下，上面的程序有没有什么问题？ 如果我们这么调用函数 <code>outputUser("Alice' OR '1=1")</code>，输出如下：</p>
<blockquote>
<p>“Id: 1, Username: Alice, Password: passw0rd” “Id: 2, Username: Bob, Password: Passw0rd” “Id: 3, Username: Josh, Password: Pa88w0rd”</p>
</blockquote>
<p>是不是有什么不对？<code>outputUser("Alice' OR '1=1")</code> 按我们的想法应该输出 username 等于 <code>Alice' OR '1=1</code> 的记录，即查询结果是空，但却输出了 user 表里的所有记录，完全和期望的不一样，一定是有什么地方出错了，<code>但是看上去都没什么问题呀，怎么都找不到错误吧！</code></p>
<p>这里我们引入一个概念叫做 <code>SQL 注入攻击</code>：</p>
<blockquote>
<p>SQL 注入攻击指的是通过构建特殊的输入作为参数传入，而这些输入大都是 SQL 语法里的一些组合，通过执行 SQL 语句进而执行攻击者所要的操作，其主要原因是程序没有细致地过滤用户输入的数据，致使非法数据侵入系统。</p>
</blockquote>
<p>上面的程序在查询一个用户的时候却输出了所有用户的信息，就是一个 <code>SQL 注入攻击</code>的例子，原因是使用的 <code>SQL 语句是用字符串相加拼凑出来的</code>，以至于参数中的特殊字符 <code>'</code> 没有被转义而拼成了 <code>SELECT \* FROM user WHERE username='Alice' OR '1=1'</code>，WHERE 条件里有 <code>OR '1=1'</code>，所以条件永远为真，于是输出了所有的记录，这样做是很危险的，如果因此而泄漏了公司机密信息，老板的小宇宙就要爆发了。</p>
<h3 id="怎么避免-sql-注入攻击">4.3 怎么避免 <code>SQL 注入攻击</code>？</h3>
<p>使用 <code>Prepared Query</code> 可以避免 <code>SQL 注入攻击</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 输出 user 其 username 等于传入的参数 username</span><br><span class="line"> * @param username</span><br><span class="line"> */</span><br><span class="line">void outputUserWithPreparedQuery(const QString &amp;username) &#123;</span><br><span class="line">    QString sql = &quot;SELECT * FROM user WHERE username=:username&quot;;</span><br><span class="line">    QSqlQuery query;    // [1] 可以传入数据库连接，但是不能传入 SQL 语句</span><br><span class="line">    query.prepare(sql); // [2] 声明使用 prepqred 的方式解析 SQL 语句</span><br><span class="line"></span><br><span class="line">    query.bindValue(&quot;:username&quot;, username); // [3] 把占位符替换为传入的参数</span><br><span class="line">    query.exec(); // [4] 执行数据库操作</span><br><span class="line"></span><br><span class="line">    while (query.next()) &#123; // [5]</span><br><span class="line">        qDebug() &lt;&lt; QString(&quot;Id: %1, Username: %2, Password: %3&quot;)</span><br><span class="line">                    .arg(query.value(&quot;id&quot;).toInt())</span><br><span class="line">                    .arg(query.value(&quot;username&quot;).toString())</span><br><span class="line">                    .arg(query.value(&quot;password&quot;).toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用 <code>outputUserWithPreparedQuery("Alice")</code> 输出：</p>
<blockquote>
<p>“Id: 1, Username: Alice, Password: passw0rd”</p>
</blockquote>
<p>调用 <code>outputUserWithPreparedQuery("Alice' OR '1=1")</code> 则没有输出，因为 user 表里没有 username 为 <code>Alice' OR '1=1</code> 的记录，太好了，SQL 注入攻击的问题很容易就解决了。</p>
<h4 id="使用-prepared-query-分为以下-5-步">使用 <code>Prepared Query</code> 分为以下 5 步：</h4>
<ul>
<li>1 创建 QSqlQuery 对象：<code>QSqlQuery query</code>;</li>
<li>2 调用 <code>query.prepare(sql);</code> 声明要使用 <code>Prepared Query</code> 的方式来解析 SQL 语句</li>
<li>3 调用 <code>bindValue()</code> 函数把占位符替换为传入的参数：<code>query.bindValue(":username", username);</code></li>
<li>4 所有的占位符都替换好后，调用 <code>query.exec();</code> 执行 SQL 语句</li>
<li>5 遍历查询结果</li>
</ul>
<p><strong>占位符的格式为：</strong> <code>:</code> 后跟一个单词，如 <code>:username</code>。</p>
<p><strong>思考一下下面几个问题：</strong></p>
<ul>
<li>1 <code>SELECT \* FROM user WHERE username=:username AND password=:password</code> 的占位符是什么呢？</li>
<li>2 Prepared Query 中 SQL 里的字符串需要用 <code>‘’</code> 括起来吗？</li>
<li>3 如果传入的参数是 QDateTime 类型，占位符应该怎么写？</li>
</ul>
<p><strong>答案：</strong></p>
<ul>
<li><p>1 这条 SQL 语句里有 2 个占位符，分别为 <code>:username</code> 和 <code>:password</code>（不要想成是 <del>username AND password=:password</del>）</p></li>
<li><p>2 不需要。普通 SQL 里字符串需要用 <code>''</code> 括起来，但是在这里不需要，Qt 在替换参数的时候会智能的根据参数的类型判断是否需要加上 <code>''</code>，如果传入的字符串参数里有 <code>'</code>，也会智能的将其转义，所以避免了 SQL 注入攻击。</p></li>
<li><p>3 写法也是一样的，<code>:</code> 后跟一个单词，可以看看下面的这个例子</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 输出 2015-02-01 10:10:10 后创建的 blog.</span><br><span class="line"> */</span><br><span class="line">void outputBlogWithPreparedQuery() &#123;</span><br><span class="line">    QDateTime dateTime = QDateTime::fromString(&quot;2015-02-01 10:10:10&quot;, &quot;yyyy-MM-dd hh:mm:ss&quot;);</span><br><span class="line"></span><br><span class="line">    QSqlQuery query;</span><br><span class="line">    query.prepare(&quot;SELECT * FROM blog WHERE created_time&gt;:createdTime&quot;);</span><br><span class="line">    query.bindValue(&quot;:createdTime&quot;, dateTime);</span><br><span class="line">    query.exec();</span><br><span class="line"></span><br><span class="line">    while (query.next()) &#123;</span><br><span class="line">        qDebug() &lt;&lt; QString(&quot;Id: %1, Content: %2, Created_Time: %3&quot;)</span><br><span class="line">                    .arg(query.value(&quot;id&quot;).toInt())</span><br><span class="line">                    .arg(query.value(&quot;content&quot;).toString())</span><br><span class="line">                    .arg(query.value(&quot;created_time&quot;).toDateTime().toString(&quot;yyyy-MM-dd hh:mm:ss&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<blockquote>
<blockquote>
<p>“Id: 2, Content: Content of blog 2., Created_Time: 2015-02-02 20:20:20”</p>
</blockquote>
</blockquote>
<h4 id="什么时候使用-prepared-query-呢插入时能使用吗删除时能使用吗">什么时候使用 Prepared Query 呢？插入时能使用吗？删除时能使用吗？</h4>
<ul>
<li>1 如果传入参数构造 SQL 语句，为了避免 <code>SQL 注入攻击</code>，所以这时需要使用</li>
<li>2 SQL 语句比较长时，使用 Prepared Query 的方式构造的 SQL 语句比用字符串相加的方式容易一些，可读性也好很多</li>
<li>3 插入和删除语句都能用</li>
</ul>
<h3 id="使用-like-模糊查询">4.4 使用 LIKE 模糊查询</h3>
<p>查询名字里有 <code>o</code> 的所有用户：<code>SELECT \* FROM user WHERE username LIKE '%o%'</code>，使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">query.prepare(&quot;SELECT * FROM user WHERE username LIKE &#x27;%:match%&#x27;&quot;);</span><br><span class="line">query.bindValue(&quot;:match&quot;, &quot;o&quot;);</span><br></pre></td></tr></table></figure>
<p>查询结果为空，因为 :match 是字符串，替换后 o 的两边会加上 '，所以生存的 SQL 语句为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM user WHERE username LIKE &#x27;%&#x27;o&#x27;%&#x27;</span><br></pre></td></tr></table></figure>
<p>这个 SQL 语句是错的，应该像下面这样使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">query.prepare(&quot;SELECT * FROM user WHERE username LIKE :match&quot;);</span><br><span class="line">query.bindValue(&quot;:match&quot;, &quot;%o%&quot;);</span><br></pre></td></tr></table></figure>
<p>也可以使用数据库的字符串连接函数（这个函数是数据库相关的）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">query.prepare(&quot;SELECT * FROM user WHERE username LIKE CONCAT(&#x27;%&#x27;, :match,&#x27;%&#x27;)&quot;);</span><br><span class="line">query.bindValue(&quot;:match&quot;, &quot;o&quot;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>MySql SELECT * FROM user WHERE username like CONCAT(‘%’,:match,’%’)</p>
</blockquote>
<blockquote>
<p>Oracle SELECT _ FROM user WHERE username like CONCAT(‘%’,:match,’%’) 或 SELECT _ FROM user WHERE username like ‘%’||:match||’%’</p>
</blockquote>
<blockquote>
<p>SQLServer SELECT * FROM user WHERE username like ‘%’+:match+’%’</p>
</blockquote>
<blockquote>
<p>DB2 SELECT _ FROM user WHERE username like CONCAT(‘%’,:match,’%’) 或 SELECT _ FROM user WHERE username like ‘%’||:match||’%’</p>
</blockquote>
<h3 id="多表查询时字段名冲突">4.5 多表查询时字段名冲突</h3>
<p>列出所有的 user，如果 user 有 blog，则列出 blog：<code>SELECT \* FROM user LEFT JOIN blog ON user.id = blog.user_id</code>。在数据库客户端执行这条 SQL 语句结果如下图：</p>
<figure>
<img src="https://s2.loli.net/2022/11/16/j5wTyhWPVktfxna.png" alt="DB-Query-1.png" /><figcaption aria-hidden="true">DB-Query-1.png</figcaption>
</figure>
<p>有 2 个列名都叫 id，第一个 id 是 user 表的 id，第二个 id 是 blog 表的 id。运行下面的程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void outputUserAndBlog() &#123;</span><br><span class="line">    QSqlQuery query(&quot;SELECT * FROM user LEFT JOIN blog ON user.id = blog.user_id&quot;);</span><br><span class="line"></span><br><span class="line">    while (query.next()) &#123;</span><br><span class="line">        qDebug() &lt;&lt; query.value(&quot;id&quot;).toInt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<blockquote>
<p>1 2 3</p>
</blockquote>
<p>取到的是第一列的 id，即 user 表的 id，并没有输出 blog 表的 id。如果我们想取得 blog 表的 id 应该怎么做呢？显然上面的 SQL 不行，但是我们可以给<code>查询字段重命名</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">void outputUserAndBlog() &#123;</span><br><span class="line">    QSqlQuery query(&quot;SELECT user.id as user_id, blog.id as blog_id, blog.content as content &quot;</span><br><span class="line">                    &quot;FROM user &quot;</span><br><span class="line">                    &quot;LEFT JOIN blog ON user.id = blog.user_id&quot;);</span><br><span class="line"></span><br><span class="line">    while (query.next()) &#123;</span><br><span class="line">        qDebug() &lt;&lt; QString(&quot;User_Id: %1, Blog_ID: %2, Blog_Content: %3&quot;)</span><br><span class="line">                    .arg(query.value(&quot;user_id&quot;).toInt())</span><br><span class="line">                    .arg(query.value(&quot;blog_id&quot;).toInt())</span><br><span class="line">                    .arg(query.value(&quot;content&quot;).toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<blockquote>
<p>“User_Id: 1, Blog_ID: 1, Blog_Content: Content of blog 1.” “User_Id: 2, Blog_ID: 2, Blog_Content: Content of blog 2.” “User_Id: 3, Blog_ID: 0, Blog_Content: “</p>
</blockquote>
<p>通过给查询字段重命名的方式，解决了 <code>多表查询时字段名冲突</code> 的问题。</p>
<h2 id="插入操作">5 插入操作</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 向 user 表里插入一个 user</span><br><span class="line"> * @param username</span><br><span class="line"> * @param password</span><br><span class="line"> */</span><br><span class="line">void insertUser(const QString &amp;username, const QString &amp;password) &#123;</span><br><span class="line">    QSqlQuery query;</span><br><span class="line">    query.prepare(&quot;INSERT INTO user (username, password) VALUES (:username, :password)&quot;);</span><br><span class="line">    query.bindValue(&quot;:username&quot;, username);</span><br><span class="line">    query.bindValue(&quot;:password&quot;, password);</span><br><span class="line">    query.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用 <code>insertUser("Qter", "secret")</code> 可以看到数据库里多出了刚才插入的数据。</p>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>username</th>
<th>password</th>
<th>email</th>
<th>mobile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Alice</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="even">
<td>2</td>
<td>Bob</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Josh</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="even">
<td>4</td>
<td>Qter</td>
<td>secret</td>
<td>NULL</td>
<td>NULL</td>
</tr>
</tbody>
</table>
<h2 id="删除操作">6 删除操作</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 删除名字等于传入的 username 的 user</span><br><span class="line"> * @param username</span><br><span class="line"> */</span><br><span class="line">void deleteUser(const QString &amp;username) &#123;</span><br><span class="line">    QSqlQuery query;</span><br><span class="line">    query.prepare(&quot;DELETE FROM user WHERE username=:username&quot;);</span><br><span class="line">    query.bindValue(&quot;:username&quot;, username);</span><br><span class="line">    query.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用 <code>deleteUser("Qter")</code> 则删除了 user 表里 username 为 Qter 的所有记录。</p>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>username</th>
<th>password</th>
<th>email</th>
<th>mobile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Alice</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="even">
<td>2</td>
<td>Bob</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Josh</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
</tbody>
</table>
<p>想像一个场景，如果使用删除 user 的代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void deleteUser2(const QString &amp;username) &#123;</span><br><span class="line">    QSqlQuery query(&quot;DELETE FROM user WHERE username=&#x27;&quot; + username + &quot;&#x27;&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用 <code>deleteUser("Qter' OR '1=1")</code>，结果是什么？大神，你把 user 表清空了，想一下，这种问题叫什么，怎么解决？</p>
<h2 id="事务">7 事务</h2>
<blockquote>
<p>事务（Transaction）是并发控制的单位，是用户定义的一个操作序列。这些操作要么都做，要么都不做，是一个不可分割的工作单位。通过事务，能将逻辑相关的一组操作绑定在一起，以便服务器保持数据的完整性。</p>
</blockquote>
<p><strong>Qt 里事物相关的函数：</strong></p>
<ul>
<li>1 是否支持事务：<code>bool QSqlDriver::hasFeature(DriverFeature feature) const</code>，返回 true 表示支持事务，返回 false 表示不支持事务</li>
<li>2 开启事务：<code>bool QSqlDatabase::​transaction()</code></li>
<li>3 提交事务：<code>bool QSqlDatabase::​commit()</code></li>
<li>4 回滚事务：<code>bool QSqlDatabase::rollback()</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 查看是否支持事物</span><br><span class="line"> */</span><br><span class="line">void isTransactionSupported() &#123;</span><br><span class="line">    createConnectionByName(&quot;Buda&quot;);</span><br><span class="line">    QSqlDatabase db = getConnectionByName(&quot;Buda&quot;);</span><br><span class="line"></span><br><span class="line">    if (db.driver()-&gt;hasFeature(QSqlDriver::Transactions)) &#123;</span><br><span class="line">        qDebug() &lt;&lt; &quot;支持事务&quot;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        qDebug() &lt;&lt; &quot;不支持事务&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>下面的例子展示了事务的使用：</strong></p>
<ul>
<li>1 开启事物</li>
<li>2 操作数据库</li>
<li>3 提交事务或者回滚事务</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">void transactionDemo() &#123;</span><br><span class="line">    createConnectionByName(&quot;Buda&quot;);</span><br><span class="line">    QSqlDatabase db = getConnectionByName(&quot;Buda&quot;);</span><br><span class="line"></span><br><span class="line">    db.transaction(); // [1] 开启事务</span><br><span class="line"></span><br><span class="line">    // [2] 执行 SQL，在事务提交前更新不会提交到数据库</span><br><span class="line">    QSqlQuery query1(&quot;INSERT INTO user (id, username, password) VALUES (1, &#x27;Biao&#x27;, &#x27;xxxx&#x27;)&quot;, db);</span><br><span class="line">    QSqlQuery query2(&quot;INSERT INTO user (id, username, password) VALUES (5, &#x27;Bing&#x27;, &#x27;xxxx&#x27;)&quot;, db);</span><br><span class="line"></span><br><span class="line">    if (query1.lastError().type() == QSqlError::NoError &amp;&amp;</span><br><span class="line">            query2.lastError().type() == QSqlError::NoError) &#123;</span><br><span class="line">        db.commit();   // [3] 提交事务</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        db.rollback(); // [3] 回滚事务</span><br><span class="line"></span><br><span class="line">        qDebug() &lt;&lt; query1.lastError().text();</span><br><span class="line">        qDebug() &lt;&lt; query2.lastError().text();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用 <code>transactionDemo()</code> 输出</p>
<blockquote>
<p>“Duplicate entry ‘1’ for key ‘PRIMARY’ QMYSQL: Unable to execute query” “ “</p>
</blockquote>
<p>可以看到 query1 执行时发生了主键冲突所以插入时报错，因为数据库里已经有一条记录其 id 为 1，而 query2 执行成功，但是在数据库里却没有看到 query2 插入的用户 <code>Bing</code>，这是因为我们使用了事务，只有 query1 和 query2 同时都插入成功后才会提交事务，如果其中任意一个插入失败都会导致整个插入操作失败。</p>
<p><code>把 query1 里的 1 改成 4</code>，再次调用 <code>transactionDemo()</code>，可以看到这次插入成功了。</p>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>username</th>
<th>password</th>
<th>email</th>
<th>mobile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Alice</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="even">
<td>2</td>
<td>Bob</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Josh</td>
<td>passw0rd</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="even">
<td>4</td>
<td>Biao</td>
<td>xxxx</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Bing</td>
<td>xxxx</td>
<td>NULL</td>
<td>NULL</td>
</tr>
</tbody>
</table>
<p><strong>思考一下，我们要向 user 表里插入 100000 个用户：</strong></p>
<ul>
<li>1 开启事务每次插入 1000 个</li>
<li>2 不使用事务插入 1 个</li>
</ul>
<p>哪一个的效率高，相差大吗？</p>
<p><code>事务是面向数据库连接的</code>，<strong>思考一个问题，开启事务，更新数据库，提交|回滚事务不在同一个函数里可以吗</strong>？</p>
<h2 id="结束语">结束语</h2>
<p>这一节我们主要讲了 QSqlDataBase，QSqlQuery 的常用操作，使用 Prepared Query 的方式避免 SQL 注入攻击提高了系统的安全性，以及介绍了事务的使用。</p>
<blockquote>
<p><code>再次提示</code> 尽可能的使用 Prepared Query 的方式来构造 SQL 语句，尤其是其中的部分内容由调用者传入，因为我们不能控制调用者传入的内容，但是我们可以控制自己的代码。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/16/QT/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/" data-id="clb4ew658000rcctj45peav1o" data-title="数据库常用操作" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/database/" rel="tag">database</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/database/访问 QT Mysql" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/16/QT/database/%E8%AE%BF%E9%97%AE%20QT%20Mysql/" class="article-date">
  <time class="dt-published" datetime="2022-11-16T10:09:48.000Z" itemprop="datePublished">2022-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/16/QT/database/%E8%AE%BF%E9%97%AE%20QT%20Mysql/">访问 QT MySql</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>来源： http://qtdebug.com/qtbook-db-mysql/</p>
<h1 id="访问-qt-mysql">访问 QT MySql</h1>
<p>Qt 里访问 MySQL 是件很简单的事，但也有可能很不简单。说其简单是因为熟悉的人都知道只需要有 MySQL 的驱动插件和复制 MySQL 的动态链接库到程序可识别的环境变量的路径下即可，对于不熟悉的人来说，看到 Qt 给我们的错误信息简单到 <code>QMYSQL driver not loaded</code>，从这一句简单的提示里却找不到任何头绪，不知道应该怎么做，在网络上搜索了很多文章，照着做有的人问题解决了，有的人试过了很多种方法问题仍然存在。在这一节里，我们会一步一步的来分析，解决访问 MySQL 的问题。访问其他数据库也可以用同样的方法解决。</p>
<p>Qt 访问 MySQL 需要 2 个动态链接库文件，一个是 Qt 自己的 <code>MySQL 驱动插件</code>，另一个是 <code>MySQL 提供的动态链接库</code>，缺一不可。在程序里指定要访问的数据库为 MySQL，Qt 会自动的加载 <code>MySQL 驱动插件</code>，其实现依赖于 <code>MySQL 的动态链接库</code> 访问 MySQL。</p>
<blockquote>
<p>暂时用不到 mysql，此文件不写了。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/16/QT/database/%E8%AE%BF%E9%97%AE%20QT%20Mysql/" data-id="clb4ew657000ncctjc0czehjk" data-title="访问 QT MySql" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/database/" rel="tag">database</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/database/访问 QT SQLite" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/15/QT/database/%E8%AE%BF%E9%97%AE%20QT%20SQLite/" class="article-date">
  <time class="dt-published" datetime="2022-11-15T10:09:48.000Z" itemprop="datePublished">2022-11-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/15/QT/database/%E8%AE%BF%E9%97%AE%20QT%20SQLite/">访问 QT SQLite</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="访问-qt-sqlite">访问 QT SQLite</h1>
<p>QLite 是一个开源的<code>嵌入式关系数据库</code>，实现自包容、零配置、支持事务的 SQL 数据库引擎。 其特点是高度便携、使用方便、结构紧凑、高效、可靠。整个数据库(定义、表、索引和数据本身)都在宿主主机上存储在一个单一的文件中。SQLite 支持跨平台，同一个 SQLite 的数据库文件，可以在 Windows，Linux，Mac OS 中使用。SQLite 的使用非常广泛，例如 Firefox，Chrome，Android，iOS 等都使用了 SQLite 来存储数据。SQLite 默认不支持使用用户名密码来连接，如果我们的数据安全性要求不高，那么就可以使用 SQLite 来存储，这样做的好处是数据文件是一个单一的文件，可以和项目一起发布而不需要安装数据库软件就能拥有数据库的功能，这是多么美好的事（想像一下，如果需要模拟数据库的操作，手动用程序通过读写文件的方式向一个文件中插入，更新，删除一条记录需要付出多少的代价，而用 SQLite 的话，就是一条 SQL 语句的事情，用上 SQLite，这简直是鸟枪换炮了啊）。</p>
<p>Qt 默认已经提供了 SQLite 的驱动，直接在代码里就可以访问 SQLite。在 <code>plugins/sqldrivers</code> 目录下可以找到 SQLite 的数据库驱动插件。</p>
<h2 id="qt-访问-sqlite-的步骤">Qt 访问 SQLite 的步骤:</h2>
<ul>
<li>1 加载 <code>SQLite</code> 驱动</li>
<li>2 设置 <code>数据库文件名</code></li>
<li>3 打开数据库，也就是创建数据库连接</li>
<li>4 创建 query 对象，执行 SQL 语句</li>
<li>5 处理 query 执行得到的结果</li>
</ul>
<h2 id="下面演示-qt-访问-sqlite将">下面演示 Qt 访问 SQLite，将</h2>
<ul>
<li>创建一个名为 sqlitedata.db 的数据库文件</li>
<li>在数据库里创建一个表 user</li>
<li>插入一条数据</li>
<li>查询刚才插入的数据</li>
</ul>
<p>在 <code>QtCreator</code> 里创建控制台工程，然后在工程的 <code>.pro</code> 文件里加入 <code>QT += sql</code> 引入数据库模块，修改 main.cpp 为下面的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QDebug&gt;</span><br><span class="line">#include &lt;QSqlDatabase&gt;</span><br><span class="line">#include &lt;QSqlError&gt;</span><br><span class="line">#include &lt;QSqlQuery&gt;</span><br><span class="line"></span><br><span class="line">void accessSqlite();</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">    Q_UNUSED(argc);</span><br><span class="line">    Q_UNUSED(argv);</span><br><span class="line"></span><br><span class="line">    accessSqlite();</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void accessSqlite()</span><br><span class="line">&#123;</span><br><span class="line">    // [1] 加载 SQLite 数据库驱动</span><br><span class="line">    QSqlDatabase db = QSqlDatabase::addDatabase(&quot;QSQLITE&quot;, &quot;Connection_Name&quot;);</span><br><span class="line"></span><br><span class="line">    // [2] sqlitedata.db 是 SQLite 的数据库文件路径，</span><br><span class="line">    //     可以是绝对路径，也可以是相对于可执行文件的相对路径</span><br><span class="line">    //     如果此文件不存在则自动创建，如果已经存在则使用已经存在的文件</span><br><span class="line">    db.setDatabaseName(&quot;sqlitedata.db&quot;);</span><br><span class="line"></span><br><span class="line">    // [3] 打开数据库连接，成功返回 true，不成功则程序退出</span><br><span class="line">    if (!db.open()) &#123;</span><br><span class="line">        qDebug() &lt;&lt; &quot;Connect to Sqlite error: &quot; &lt;&lt; db.lastError().text();</span><br><span class="line">        exit(128);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // [4] 在数据库中创建表</span><br><span class="line">    QSqlQuery createTableQuery(db);</span><br><span class="line">    QString sql(&quot;CREATE TABLE user(&quot;</span><br><span class="line">                &quot;id integer primary key autoincrement, &quot;</span><br><span class="line">                &quot;username text not null, &quot;</span><br><span class="line">                &quot;password text not null, &quot;</span><br><span class="line">                &quot;email text, &quot;</span><br><span class="line">                &quot;mobile text)&quot;);</span><br><span class="line">    createTableQuery.exec(sql); // 如果表存在，则会创建表失败，但不会影响程序继续运行</span><br><span class="line">    qDebug() &lt;&lt; &quot;Create table error: &quot; &lt;&lt; createTableQuery.lastError().text();</span><br><span class="line"></span><br><span class="line">    // 向表中插入一条数据</span><br><span class="line">    QSqlQuery insertQuery(db);</span><br><span class="line">    insertQuery.exec(&quot;INSERT INTO user (username, password) VALUES (&#x27;Alice&#x27;, &#x27;passw0rd&#x27;)&quot;);</span><br><span class="line"></span><br><span class="line">    // 查询刚才插入的数据</span><br><span class="line">    QSqlQuery selectQuery(db);</span><br><span class="line">    selectQuery.exec(&quot;SELECT id, username, password FROM user&quot;);</span><br><span class="line"></span><br><span class="line">    while (selectQuery.next()) &#123;</span><br><span class="line">        qDebug() &lt;&lt; QString(&quot;Id: %1, Username: %2, Password: %3&quot;)</span><br><span class="line">                        .arg(selectQuery.value(&quot;id&quot;).toInt())</span><br><span class="line">                        .arg(selectQuery.value(&quot;username&quot;).toString())</span><br><span class="line">                        .arg(selectQuery.value(&quot;password&quot;).toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译、运行、程序输出：</p>
<blockquote>
<p>"Id: 1, Username: Alice, Password: passw0rd"</p>
</blockquote>
<p>输出了我们刚刚插入的数据，和我们预料的一样。</p>
<p>在程序的工作目录里（编译出来的可执行文件所在目录）有一个名为 sqlitedata.db 的文件。这是因为 db.setDatabaseName(“sqlitedata.db”) 设置了要访问的 SQLite 的数据库文件名，访问时如果发现没有这个文件，Qt 会为我们创建，如果这个文件已经存在，就继续使用它。使用 SQLite 的工具，查看一下 sqlitedata.db 的结构与数据：</p>
<h2 id="sqlite-数据库管理工具-sqlitestudio">SQLite 数据库管理工具 sqlitestudio</h2>
<p>优点是： 很方便易用，不用安装的单个可执行文件，支持中文。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/15/QT/database/%E8%AE%BF%E9%97%AE%20QT%20SQLite/" data-id="clb4ew65f000tcctjccmzg2bx" data-title="访问 QT SQLite" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/database/" rel="tag">database</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/database/数据库" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/15/QT/database/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="article-date">
  <time class="dt-published" datetime="2022-11-15T02:09:48.000Z" itemprop="datePublished">2022-11-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/15/QT/database/%E6%95%B0%E6%8D%AE%E5%BA%93/">QT数据库简介</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="qt-数据库简介">QT 数据库简介</h1>
<p>Qt 是用 C++ 实现的，那么 C，C++ 访问数据库的方式也同样适用于 Qt，如要访问 MySQL，需要相应的头文件和库文件（例如 Windows 下的 dll 或者 lib，Linux 下的 .so 或者 .a），如果你安装了 MySQL，会在安装目录下找到这些库文件，如果没有安装，也可以在网上找到，在代码里 <code>#include "MySQL Headers"</code>，然后用提供的函数访问 MySQL。访问 Sqlite，Oracle 等任何一个数据库，都和访问 MySQL 差不多，需要它们自己的头文件和库文件，使用它们提供的函数访问数据库。</p>
<p><strong>这样做的缺点很明显：</strong></p>
<ul>
<li>访问不同数据库代码不一样</li>
<li>甚至于在不同的平台下访问同一个数据库的代码都不一样</li>
<li>同一个平台下访问同一个数据库有可能有很多不同的库</li>
<li>切换数据库就需要修改代码</li>
</ul>
<p>为了解决上面八仙过海，各显神通访问数据库的方式，Qt 的 SQL 模块抽象了访问数据库的接口，统一了在 Qt 的程序里访问数据库的方式，实现了在不同的平台，访问不同的数据库用的都是同样的代码。</p>
<p>通过 Qt 的 <code>sql</code> 模块，<code>使用统一的接口访问不同的数据库</code>，也既是说即使更换了数据库，在不同的平台，访问数据库的代码基本上不用修改。为什么说是基本呢？因为有些 SQL 语句需要根据不同的数据库做相应的调整。如果 SQL 语句是写死在代码里的，修改后需要重新编译工程。但如果 SQL 语句不是写在代码里的，而是放在文件里，动态的读取到程序里，那么修改了 SQL 语句后不需要重新编译工程就能生效，会有专门的章节介绍怎么实现这样的技术。</p>
<h2 id="访问数据库常用的类有">访问数据库常用的类有:</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Class</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">QSqlDatabase</td>
<td style="text-align: left;">表示一个数据库连接，好多人和我有同样的想法，这个类叫 QSqlConnection 更合适</td>
</tr>
<tr class="even">
<td style="text-align: left;">QSqlQuery</td>
<td style="text-align: left;">用来执行 SQL 语句</td>
</tr>
<tr class="odd">
<td style="text-align: left;">QSqlRecord</td>
<td style="text-align: left;">Record 表示数据库表中的一行，QSqlRecord 可以操作行的数据，例如获取列的数据，列名，修改列的数据等</td>
</tr>
<tr class="even">
<td style="text-align: left;">QSqlError</td>
<td style="text-align: left;">访问数据库时的错误信息</td>
</tr>
<tr class="odd">
<td style="text-align: left;">QSqlQueryModel</td>
<td style="text-align: left;">只读的数据模型，里面的数据是 SQL 语句执行的结果</td>
</tr>
<tr class="even">
<td style="text-align: left;">QSqlTableModel</td>
<td style="text-align: left;">可读写的数据模型，只支持一个表</td>
</tr>
<tr class="odd">
<td style="text-align: left;">QSqlRelationalTableModel</td>
<td style="text-align: left;">可读写的数据模型，通过关联支持多个表(不一定是外键)</td>
</tr>
</tbody>
</table>
<p>QSqlDatabase 通过数据库驱动和数据库建立连接（底层通过数据库提供的库文件，对我们的代码是透明的），使用 QSqlQuery 和数据库进行交互，得到数据后就可以做想做的事了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/15/QT/database/%E6%95%B0%E6%8D%AE%E5%BA%93/" data-id="clb4ew656000lcctjfu310ioi" data-title="QT数据库简介" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/database/" rel="tag">database</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-tool_use/ts文件如何下载" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/14/tool_use/ts%E6%96%87%E4%BB%B6%E5%A6%82%E4%BD%95%E4%B8%8B%E8%BD%BD/" class="article-date">
  <time class="dt-published" datetime="2022-11-14T09:30:00.000Z" itemprop="datePublished">2022-11-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/14/tool_use/ts%E6%96%87%E4%BB%B6%E5%A6%82%E4%BD%95%E4%B8%8B%E8%BD%BD/">如何下载ts文件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="如何下载-ts-文件">如何下载 ts 文件</h1>
<p>本文章向大家介绍如何下载 ts 文件，主要内容包括其使用实例、应用技巧、基本知识点总结和需要注意事项，具有一定的参考价值，需要的朋友可以参考一下。</p>
<h2 id="什么是-ts-文件格式">什么是 TS 文件格式</h2>
<p><strong>TS (Transport Stream，传输流)</strong> 是一种封装的格式，它的全称为<strong>MPEG2-TS</strong>。 MPEG2-TS 是一种标准数据容器格式，传输与存储音视频、节目与系统信息协议数据，主要应用于数字广播系统，譬如 DVB、ATSC 与 IPTV。传输流最初是为广播而设计的。后来，通过在标准的 188 字节数据包中添加 4 字节的时间码（TC），从而使该数据包成为 192 字节的数据包，使其适用于数码摄像机，录像机和播放器。</p>
<h2 id="网页中是如何播放-ts-文件">网页中是如何播放 ts 文件</h2>
<p>网页中是如何播放 ts 文件的：网页中一般是在一个文件中描述排列顺序，这个文件一般都以 m3u8 为后缀，然后通过分片段不断请求数据来播放。 咱们通过一个例子来演示一下。打开央视的<a target="_blank" rel="noopener" href="http://tv.cctv.com/2019/05/05/VIDEaTxhKY2GfXwaH7AuVpQe190505.shtml?spm=C28340.P9dhkRStLqPh.E7riSj4uZibW.1">《开讲啦》</a></p>
<p>我们通过 F12 打开”开发者工具”，点击“network”监听网页请求，然后点击播放按钮，我们会看到不断有这样的请求过来：</p>
<p>这实际上就是被分成片段的 ts 文件.</p>
<p>那么如何保存网页中的视频呢？</p>
<h2 id="何保存网页中的-ts-视频的方法">何保存网页中的 ts 视频的方法</h2>
<h3 id="简单粗暴的-ffmpg-方法">1 简单粗暴的 ffmpg 方法</h3>
<p>我们在要下载视频的页面先 F12 打开”开发者工具”，点击“network”，然后 F5 刷新一下页面，稍等 然后 ctrl + F 搜索 “m3u8” 会搜到一个以 .m3u8 结尾的文件，点击它，然后 copy 链接地址。然后 下载安装格式化工厂最新版，软件会自带一个 mmpeg 的工具</p>
<p>一般会在软件安装目录，我们打开安装目录，在上面的地址栏，直接敲 cmd 然后回车 进入 命令行。最后一步 使用命令一键下载并自动合成 mp4 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i http://xxx.com:8891/1231/index.m3u8 -c copy -bsf:a aac_adtstoasc output.mp4　　　　-- -i 后面的链接替换为你复制的m3u8文件地址</span><br></pre></td></tr></table></figure>
<p>稍等片刻，同级目录下应该会多出一个 output.mp4 文件了，这个就是我们要的视频文件啦。</p>
<h3 id="要有点编程基础">2 要有点编程基础</h3>
<p>其实下载 ts 类型的文件我们只需三步走就可以了：</p>
<ul>
<li>第一，找到播放文件的顺序（下载 m3u8 文件）；</li>
<li>第二，下载所有的 ts 文件；</li>
<li>第三，合并 ts 文件。我们来逐一讲解。</li>
</ul>
<p>首先，找到播放文件的顺序，这个比较容易，直接搜索 m3u8 文件，并下载下来就可以了，前面已经描述过，这里就不赘述了。 其次，下载 ts 文件，利用下载工具，比如迅雷的批量下载、利用 IDM，或者利用 360 的扩展包“视频下载神器”都可以下载完整的所有的 ts 文件。 最后，合并文件，编写 python 代码（前提是你的机器上安装了 Python3）</p>
<p>最后执行 Python 脚本，执行结束，看看新文件已经创建成功了，也能打开正常观看了。 还有一种合并视频的方法，就是利用命令行工具。使用 Win + R 打开运行窗口，输入“cmd”，点击“确定”.打开命令行工具</p>
<p>输入命令行：“copy /b D:f*.ts D:fnew.ts”，然后回车。</p>
<p>在 D 盘目录下 new.ts 就是合并好的文件</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/14/tool_use/ts%E6%96%87%E4%BB%B6%E5%A6%82%E4%BD%95%E4%B8%8B%E8%BD%BD/" data-id="clb4ew6520006cctjgq509ea5" data-title="如何下载ts文件" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-QT/openGL/QOpenGLWidget显示图片" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/12/QT/openGL/QOpenGLWidget%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87/" class="article-date">
  <time class="dt-published" datetime="2022-11-12T11:20:00.000Z" itemprop="datePublished">2022-11-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/12/QT/openGL/QOpenGLWidget%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87/">QOpenGLWidget显示图片</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="qopenglwidget-显示图片">QOpenGLWidget 显示图片</h1>
<p>Qt 显示图片的控件有很多，QLabel，QPushButton 等。 QOpenGLWidget 是 Qt5 之后用来渲染 OpenGL 控件，使程序员对 OpenGL 的操作更简单. 本文讲解用 QOpenGLWidget 来显示图片，当然 QOpenGLWidget 也可以来显示视频。</p>
<p>下面介绍如何显示图片，基本步骤如下：</p>
<h2 id="在控件栏找到-openglwidget拖到界面上">1 在控件栏找到 OpenGLWidget，拖到界面上</h2>
<figure>
<img src="https://s2.loli.net/2022/11/12/HI1cYUbXofEe9rs.png" alt="OpenGL_Widget_place.png" /><figcaption aria-hidden="true">OpenGL_Widget_place.png</figcaption>
</figure>
<p>控件布局效果如下：</p>
<h2 id="右键该控件提升为-myglwidget">2 右键该控件提升为 MyGLWidget</h2>
<h3 id="如何提升控件">如何提升控件？</h3>
<p>在 <code>OpenGL Widget</code> 控件上鼠标“右击”----》选择<code>promoted widget</code>(中文版是 <code>提升为...</code>)</p>
<figure>
<img src="https://s2.loli.net/2022/11/12/FUH6jgZYh25Sae7.png" alt="widget提升为.png" /><figcaption aria-hidden="true">widget提升为.png</figcaption>
</figure>
<h2 id="创建一个-qt-类-myglwidget">3 创建一个 QT 类 MyGLWidget，</h2>
<p>创建一个 C/c++的 QT 类 MyGLWidget, 选择 widget，创建后，<strong>把<code>QWidget</code>改成<code>QOpenGLWidget</code></strong> 即 Qt 类 MyGLWidget,使其派生于 QOpenGLWidget</p>
<figure>
<img src="https://s2.loli.net/2022/11/12/ONWMqKdu2iRyDxz.png" alt="myglwidget_new.png" /><figcaption aria-hidden="true">myglwidget_new.png</figcaption>
</figure>
<p>myglwidget.h 头文件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#ifndef MYGLWIDGET_H</span><br><span class="line">#define MYGLWIDGET_H</span><br><span class="line"></span><br><span class="line">#include &lt;QOpenGLWidget&gt;</span><br><span class="line">#include &lt;QPainter&gt;</span><br><span class="line"></span><br><span class="line">class MyGLWidget : public QOpenGLWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">public:</span><br><span class="line">    explicit MyGLWidget(QWidget* parent = nullptr);</span><br><span class="line">    ~MyGLWidget();</span><br><span class="line"></span><br><span class="line">    //重写paintEvent方法</span><br><span class="line">    void paintEvent(QPaintEvent* e);</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">#endif // MYGLWIDGET_H</span><br></pre></td></tr></table></figure>
<p>myglwidget.cpp 文件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;myglwidget.h&quot;</span><br><span class="line"></span><br><span class="line">#include &lt;QDebug&gt;</span><br><span class="line"></span><br><span class="line">MyGLWidget::MyGLWidget(QWidget* parent)</span><br><span class="line">    : QOpenGLWidget(parent)</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyGLWidget::~MyGLWidget()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void MyGLWidget::paintEvent(QPaintEvent* e)</span><br><span class="line">&#123;</span><br><span class="line">    QPainter painter;</span><br><span class="line">    painter.begin(this);</span><br><span class="line"></span><br><span class="line">    QImage img;</span><br><span class="line">    img.load(&quot;D:/1.jpg&quot;);</span><br><span class="line"></span><br><span class="line">    qDebug() &lt;&lt; &quot;haha load 1.jpg success&quot;;</span><br><span class="line"></span><br><span class="line">    //设置图像自适应窗口大小</span><br><span class="line">    QImage result = img.scaled(this-&gt;width(), this-&gt;height(), Qt::KeepAspectRatio, Qt::SmoothTransformation);</span><br><span class="line"></span><br><span class="line">    painter.drawImage(QPoint(0, 0), result);</span><br><span class="line">    painter.end();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="编译运行如下">4 编译运行如下：</h2>
<figure>
<img src="https://s2.loli.net/2022/11/12/acEtq1TZCRW9LUI.png" alt="opengl_show_picture.png" /><figcaption aria-hidden="true">opengl_show_picture.png</figcaption>
</figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/12/QT/openGL/QOpenGLWidget%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87/" data-id="clb4ew65g0010cctje9d3dcrm" data-title="QOpenGLWidget显示图片" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenGL/" rel="tag">OpenGL</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-education/幼儿园小学教育/英语原版分级阅读--起步以及进阶分析" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/%E8%8B%B1%E8%AF%AD%E5%8E%9F%E7%89%88%E5%88%86%E7%BA%A7%E9%98%85%E8%AF%BB--%E8%B5%B7%E6%AD%A5%E4%BB%A5%E5%8F%8A%E8%BF%9B%E9%98%B6%E5%88%86%E6%9E%90/" class="article-date">
  <time class="dt-published" datetime="2022-11-10T09:52:48.745Z" itemprop="datePublished">2022-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/">幼儿园小学教育</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/%E8%8B%B1%E8%AF%AD%E5%8E%9F%E7%89%88%E5%88%86%E7%BA%A7%E9%98%85%E8%AF%BB--%E8%B5%B7%E6%AD%A5%E4%BB%A5%E5%8F%8A%E8%BF%9B%E9%98%B6%E5%88%86%E6%9E%90/">英语原版分级阅读</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h1 id="英语零基础--原版分级阅读">英语零基础--原版分级阅读</h1>
<h2 id="牛津树究竟适不适合-0-基础启蒙---不适合">牛津树究竟适不适合 0 基础启蒙？ --不适合</h2>
<ul>
<li>语言学习的规律是从单词，到词组，再到短句，长句，</li>
<li>而牛津树的 1+就直接是短句，而且还有大量的过去时态，各种一般疑问句，特殊疑问句。</li>
<li>在连各种基础认知词汇都不具备的情况下，是非常难理解这些文字的，尽管也只是 5-6 个词的句子。</li>
<li>大家还记得 RAZ 的分级吗？RAZ 是到 D 级才出现了过去时，之前的 4 个级别都是在描述现在发生的事情。这样更符合 0 基础听说的积累，毕竟大部分的日常对话都是在描述当下发生的事情。</li>
</ul>
<p><strong>所以，RAZ 这个类型的分级阅读更适合 0 基础英语启蒙的小朋友。</strong></p>
<h2 id="牛津树从什么时候开始----适合已经读完类似-raz-c-级的具备一定听说基础的小朋友">牛津树从什么时候开始？ -- 适合已经读完类似 RAZ C 级的(具备一定听说基础的小朋友)</h2>
<p>原因分析：</p>
<ul>
<li>英语 0 基础阶段，最需要的是图文一致，最好的是直接认图片的时候直接说出对应的文字，而牛津树在这一方面是不匹配的。</li>
<li>自然拼读更是不能 0 基础学习，需要比较强的听说基础。在英语母语国家的小朋友，是在幼儿园开始学习，这时候他们的听说词汇大约在 5000 左右。（有研究发现，不同家庭背景的孩子在学前的听说词汇差距很大，2000-5000 不等，这里的词汇量只做参考。）</li>
<li>即使通过自然拼读的技巧学会了读单词，但是不懂意思，也是无效的学习。</li>
</ul>
<p>结论： 综合起来，从文字，故事情节，插画，内容几个方面来看，牛津树都不适合 0 基础启蒙。更适合已经读完类似 RAZ C 级的，或者具备一定听说基础的小朋友来阅读。</p>
<h2 id="什么时候开始自然拼读">什么时候开始自然拼读？</h2>
<h3 id="自然拼读的blending难关">自然拼读的“blending”难关</h3>
<p>自然拼读的重要性大家应该都清楚了，是把听说词汇通过拼读规则转化成阅读词汇的重要工具。这里想再次提醒大家的是，自然拼读固然重要，但是不建议盲目的学习。学习自然拼读的最大前提是需要足够的听说词汇，至少要有 1000 以上，建议 2000 词。而且年龄建议在 4 岁以上，太早不易理解规则。</p>
<p>如果有想开始自然拼读的家长，请参考以上两个重要条件：</p>
<ul>
<li><strong>1 听说词汇至少 1000，建议 2000 词</strong></li>
<li><strong>2 年龄在 4 岁左右，已经能理解单个音素和拼读规则。</strong></li>
</ul>
<p>关于如何评定孩子的听说词汇，我觉得确实不容易。但有一个小办法可以分享给大家。</p>
<ul>
<li>1 首先我们来看 vocabulary 的定义，一个词包含词意，词音和用法三个纬度。 具体如何做？
<ul>
<li>可以利用家里的单词大书，一般都是 1000 词汇一本。打开一本书，用“where is XX?”的句型来问，让他们自己找到正确的图片。</li>
<li>如果正确找到了，说明听懂了问句，还知道关键词的发音，并且懂了意思。</li>
<li>这时，家长可以再进一步根据关键词来提问。 比如：sweater。可以问“do you have a sweater?”, “how does it look like?”, “could you put on sweater by yourslef?” 在这个问答中，可以检测孩子是否掌握这个词的用法和意思。 虽然略显粗暴，但还是很有用的。</li>
</ul></li>
</ul>
<h2 id="牛津树raz海曼尼--阅读级别对照表">牛津树、RAZ、海曼尼--阅读级别对照表</h2>
<figure>
<img src="https://s2.loli.net/2022/11/10/aJlASd7Rk5tyInL.webp" alt="牛津阅读树的流程_补充RAZ以及海曼尼_.webp" /><figcaption aria-hidden="true">牛津阅读树的流程_补充RAZ以及海曼尼_.webp</figcaption>
</figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/%E8%8B%B1%E8%AF%AD%E5%8E%9F%E7%89%88%E5%88%86%E7%BA%A7%E9%98%85%E8%AF%BB--%E8%B5%B7%E6%AD%A5%E4%BB%A5%E5%8F%8A%E8%BF%9B%E9%98%B6%E5%88%86%E6%9E%90/" data-id="clb4ew655000fcctj75ozh08n" data-title="英语原版分级阅读" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RAZ/" rel="tag">RAZ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%89%9B%E6%B4%A5%E6%A0%91/" rel="tag">牛津树</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-education/幼儿园小学教育/3_英语启蒙看什么动画片--3部适合完全零基础的孩子" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/3_%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E7%9C%8B%E4%BB%80%E4%B9%88%E5%8A%A8%E7%94%BB%E7%89%87--3%E9%83%A8%E9%80%82%E5%90%88%E5%AE%8C%E5%85%A8%E9%9B%B6%E5%9F%BA%E7%A1%80%E7%9A%84%E5%AD%A9%E5%AD%90/" class="article-date">
  <time class="dt-published" datetime="2022-11-10T09:52:48.742Z" itemprop="datePublished">2022-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/">幼儿园小学教育</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/3_%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E7%9C%8B%E4%BB%80%E4%B9%88%E5%8A%A8%E7%94%BB%E7%89%87--3%E9%83%A8%E9%80%82%E5%90%88%E5%AE%8C%E5%85%A8%E9%9B%B6%E5%9F%BA%E7%A1%80%E7%9A%84%E5%AD%A9%E5%AD%90/">3_英语启蒙看什么动画片</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>来源： https://mp.weixin.qq.com/s/HrngGWIVLHigz9hP1EMnKQ</p>
<h1 id="英语启蒙看什么动画片-3-部适合完全零基础的孩子">英语启蒙看什么动画片？ 3 部适合完全零基础的孩子</h1>
<p>真正适合零基础的英语启蒙动画片。</p>
<p>在上期视频中，我们讲过，选动画片要结合孩子的认知水平和语言水平，让他可理解，以及 i+1 和孩子是否喜欢这三个原则。</p>
<h2 id="英语启蒙动画片的要点">英语启蒙动画片的要点</h2>
<ul>
<li>1 时间要短</li>
<li>2 语速要慢</li>
<li>3 要有重复的句型和高频词</li>
<li>4 贴近生活，方便孩子去对应理解</li>
</ul>
<h2 id="第一部-didis-day">第一部 Didi's Day</h2>
<figure>
<img src="https://s2.loli.net/2022/11/10/ZhetFlVMEHUxo2u.png" alt="didi_s_day.png" /><figcaption aria-hidden="true">didi_s_day.png</figcaption>
</figure>
<p>来自韩国，不得不说，还是非母语国家更懂英语启蒙的痛点。</p>
<p>它呢，画风简洁，语速慢，简单易懂，非常适合零基础的小宝宝。</p>
<p>每集 2 到 3 分钟，共 31 集，每集两个日常用语，在不同的生活场景中反复重复，来告诉孩子这些句子、语音代表什么，要怎么作用。</p>
<h2 id="第二部-yakka-dee">第二部 Yakka Dee</h2>
<figure>
<img src="https://s2.loli.net/2022/11/10/xmpNlEcR1DybVfw.png" alt="yakka_dee.png" /><figcaption aria-hidden="true">yakka_dee.png</figcaption>
</figure>
<p>是专门学习词汇的，每集 5 分钟，围绕一个单词，搭配不同的形容词或动词，结合画面反复的重复，孩子很容易对应理解。</p>
<p>全季看下来可以掌握 200 个左右的单词，其中包含 60 多个常见的高频名词。</p>
<p>而且呢，它有真人小朋友出镜，很有代入感，还会多次鼓励孩子开口，跟着一起说。</p>
<h2 id="第三部-english-singsing">第三部 English Singsing</h2>
<figure>
<img src="https://s2.loli.net/2022/11/10/OApSUB1hntQ4ywH.png" alt="english_singsing.png" /><figcaption aria-hidden="true">english_singsing.png</figcaption>
</figure>
<p>它画风比较成熟，比较适合零基础的大童。</p>
<p>不仅有歌曲，还有很多的启蒙动画，包含基础的字母、单词，日常对话，以及自然拼读，是阶梯型的系列教学动画。</p>
<p><strong>每集 5 分钟</strong>左右，很强烈的<strong>TPR 教学法</strong>，孩子更容易接受理解。</p>
<p>下期视频，再分享 3 部进阶的学习型动画片，让孩子再积累 600 到 700 个听力词汇，记得关注。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/3_%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E7%9C%8B%E4%BB%80%E4%B9%88%E5%8A%A8%E7%94%BB%E7%89%87--3%E9%83%A8%E9%80%82%E5%90%88%E5%AE%8C%E5%85%A8%E9%9B%B6%E5%9F%BA%E7%A1%80%E7%9A%84%E5%AD%A9%E5%AD%90/" data-id="clb4ew654000bcctj2ajhc1xu" data-title="3_英语启蒙看什么动画片" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99/" rel="tag">英语启蒙</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-education/幼儿园小学教育/1_如何做好英语启蒙--3个工具和要点" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/1_%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99--3%E4%B8%AA%E5%B7%A5%E5%85%B7%E5%92%8C%E8%A6%81%E7%82%B9/" class="article-date">
  <time class="dt-published" datetime="2022-11-10T09:52:48.740Z" itemprop="datePublished">2022-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/">幼儿园小学教育</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/1_%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99--3%E4%B8%AA%E5%B7%A5%E5%85%B7%E5%92%8C%E8%A6%81%E7%82%B9/">1_如何做好英语启蒙</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>来源： https://mp.weixin.qq.com/s?__biz=Mzg2NTYxNzY3MQ==&amp;mid=2247483785&amp;idx=1&amp;sn=78c4ca9eb844a695b7de018dd1d26c4c</p>
<h1 id="如何做好英语启蒙这组路线图告诉你-3-个工具和要点英语渣渣必看">1 如何做好英语启蒙？这组路线图告诉你 3 个工具和要点，英语渣渣必看。</h1>
<p>英语启蒙的目标和计划要如何安排？</p>
<p>英语渣的家长有什么捷径和资源做呢？</p>
<p>今天呢，我跟大家分享一组，适合大多数家庭的<strong>英语启蒙路线图</strong>，每个阶段都有相应的操作要点和好用的免费资源。</p>
<h2 id="英语启蒙路线图">英语启蒙路线图</h2>
<p>下面是 0-3 岁的规划：</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 54%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><span style="display:inline-block;width:30px">年龄</span></th>
<th style="text-align: center;"><span style="display:inline-block;width:50px">目标:</span></th>
<th style="text-align: left;"><span style="display:inline-block;width:400px">培养兴趣，锻炼辨音能力，积累 500 词汇</span></th>
<th style="text-align: left;"><span style="display:inline-block;width:100px">说明</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0-3 岁</td>
<td style="text-align: center;">内容</td>
<td style="text-align: left;">要点</td>
<td style="text-align: left;">免费资源</td>
</tr>
<tr class="even">
<td style="text-align: center;">听</td>
<td style="text-align: center;">儿歌</td>
<td style="text-align: left;">不能当背景音，<strong>家长要用 PTR 的方式跟孩子互动</strong>，<br> 边唱边做动作，把语音、动作和使用情景对应起来。<br><strong>建议：优先生活类</strong>，<br>比如动物、水果、颜色、身体部位、生活用品等，<br>每周最多三首，反复多听多互动</td>
<td style="text-align: left;">Super simple songs</td>
</tr>
<tr class="odd">
<td style="text-align: center;">说</td>
<td style="text-align: center;">指物训练</td>
<td style="text-align: left;">根据学过的儿歌，用配套的闪卡或食物，家长对孩子说,<br>做到<strong>物和词能正确对应。</strong><br><strong>建议:</strong> 日常生活中随时进行，英语好的家长尽量全英语情景进行<br><strong>孩子不愿意说千万别勉强</strong>，大量输入才是关键</td>
<td style="text-align: left;">儿歌配套资源</td>
</tr>
<tr class="even">
<td style="text-align: center;">读</td>
<td style="text-align: center;">简单绘本</td>
<td style="text-align: left;">最好是儿歌配套的拓展资源，或者句式重复的简单绘本。<br><strong>家长反复读，孩子听</strong>，读的时候尽量省钱并茂有互动</td>
<td style="text-align: left;">儿歌配套资</td>
</tr>
<tr class="odd">
<td style="text-align: center;">写</td>
<td style="text-align: center;">/</td>
<td style="text-align: left;">/</td>
<td style="text-align: left;">/</td>
</tr>
</tbody>
</table>
<p>下面是 3-5 岁的规划：</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 62%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><span style="display:inline-block;width:30px">年龄</span></th>
<th style="text-align: center;"><span style="display:inline-block;width:50px">目标:</span></th>
<th style="text-align: left;"><span style="display:inline-block;width:350px">积累 1000 词汇，能开口</span></th>
<th style="text-align: left;"><span style="display:inline-block;width:100px">说明</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">3-5 岁</td>
<td style="text-align: center;">内容</td>
<td style="text-align: left;">要点</td>
<td style="text-align: left;">免费资源</td>
</tr>
<tr class="even">
<td style="text-align: center;">听</td>
<td style="text-align: center;">儿歌<br>原版动画片<br>分级读物</td>
<td style="text-align: left;"><strong>继续儿歌</strong>，TPR 方式<br><strong>原版动画片</strong>,选与孩子认知水平和英语水平匹配的，<strong>能够有效输入可理解的</strong>，最好有配套学习资源的。每天半小时内，家长陪看，增加互动，看不懂需解释，可重复看。睡前可播放看过的动画片的音频磨耳朵。<br><strong>分级读物</strong>,选低级别读物，看图片，家长念或播放音频，<strong>积累听力词汇</strong></td>
<td style="text-align: left;">Yakka Dee<br>Didi's Day<br>Big Muzzy<br>Super Simple Songs</td>
</tr>
<tr class="odd">
<td style="text-align: center;">说</td>
<td style="text-align: center;">亲子对话</td>
<td style="text-align: left;">大量输入是这个阶段的关键，鼓励开口，不会也没关系。<strong>孩子开口的基础是大量输入。</strong><br>想跟孩子一起进步的家长可以看《美国家庭万用亲子英文》学习亲子对话</td>
<td style="text-align: left;">儿歌、动画片配套资源</td>
</tr>
<tr class="even">
<td style="text-align: center;">读</td>
<td style="text-align: center;">亲子阅读</td>
<td style="text-align: left;">重点在通过亲子阅读培养阅读习惯，<strong>与儿歌和动画片构建日常英语输入环境，</strong>选互动性强，简单易懂的故事，<strong>家长读，孩子听</strong></td>
<td style="text-align: left;">epic<br>Khan Academy Kids</td>
</tr>
<tr class="odd">
<td style="text-align: center;">写</td>
<td style="text-align: center;">/</td>
<td style="text-align: left;">/</td>
<td style="text-align: left;">/</td>
</tr>
</tbody>
</table>
<p>下面是 5-6 岁的规划：</p>
<p>接下来，会跟大家说三个方面：</p>
<ul>
<li>1 这组图的最终目标是什么？以及为什么适合大多数家庭。</li>
<li>2 聊一下英语渣的家长怎么做英语启蒙，以及好用的三个资源。</li>
<li>3 最后，讲讲线路图里的免费资源怎么找怎么用。</li>
</ul>
<h3 id="零基础英语启蒙最终目标是什么以及为什么适合大多数家庭">1 零基础英语启蒙最终目标是什么？以及为什么适合大多数家庭。</h3>
<p>这组图呢，我只规划了 0 到 6 岁，目标是在孩子学习语言的关键期，培养他的英语兴趣和英语思维，再通过一段时间的读，写，希望可以在小学一年级达到 KET，也就是剑桥通用英语的初级水平。</p>
<p>大家根据自己的目标进行调整，上下错个一年两年，也是非常正常的。</p>
<p>这里呢，先给你一个忠告，不管你的目标是什么，都<strong>不要完全依靠培训机构</strong>，我女儿上了两年双语幼儿园，也只能说一些相对简单的英语单词。</p>
<p>就是，不管什么类型的培训，如果家长不帮助孩子在家里进行强化，只靠课上那一点时间，进步真的是极其有限的。</p>
<p>更何况是英语，要靠大量的输入才会有效果。</p>
<p>你看，绕了一圈还是回到了家里，所以我说这组路线图，适合大多数家庭。</p>
<p>我把每个阶段的听说读写，所对应的内容、要点和资源都列出来了。你可以根据孩子的情况，选择对应的内容和资源，进行启蒙和强化。</p>
<p>这些资源大部分都是免费的，对于初期的英语启蒙是完全够用的。</p>
<p>等孩子有了基础，再去机构，他的进步会很快。</p>
<h3 id="英语渣的家长怎么做英语启蒙以及好用的三个资源">2 英语渣的家长怎么做英语启蒙，以及好用的三个资源。</h3>
<p>聊聊英语渣的家长怎么做英语启蒙，再分享三个好用的资源。</p>
<p>第一个，学会 <strong>TPR</strong>，那什么是 TPR 呢？</p>
<p><strong>TPR</strong>，（<strong>Total Physical Response</strong>）即<strong>全身反应学习法</strong>，是上世纪 60 年代美国心理学教授 James Asher 提出的。</p>
<p>最简单的理解就是教师通过全身的动作和表情，把语言、动作、事物之间的联系表达出来，使学生不通过母语翻译便能理解教师的语言。</p>
<p>是一种把语言和行为联系在一起，通过身体动作教授外语的方法。</p>
<p>你也可以回想一下，你老公指着自己教孩子喊爸爸的情景，基本就这个意思。</p>
<p><strong>TPR，切记，它不需要母语翻译</strong>，不要说宝宝这是鼓掌，鼓掌就是 clap your hands，你就直接说 baby，clap your hands。</p>
<p>不用担心孩子听不懂，如果指令和情景动作都没问题，只要给孩子足够多的输入，他自然就会领悟，慢慢形成属于自己的语言逻辑。</p>
<p>TPR 常用指令：</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th><span style="display:inline-block;width:20px">.</span></th>
<th style="text-align: left;"><span style="display:inline-block;width:600px">TPR 常用指令</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>面部动作</td>
<td style="text-align: left;">smile 微笑     laugh 大笑      cry 哭      sneeze 打喷嚏      cough 咳嗽<br>Open your mouth 张开嘴      Close your eyes 闭上眼睛      Blink youreyes 眨眼睛</td>
</tr>
<tr class="even">
<td>常见动作</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td>肢体动作</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p>这里是 70 句超实用的日常 TPR 指令表，你可以先用起来。</p>
<p>学会 TPR，你的英语启蒙道路会轻松很多，你可以把 TPR 跟儿歌结合，TPR 跟生活场景结合，甚至跟游戏和分级读物结合。</p>
<p>我后面的儿歌详解会更仔细的讲 TPR 以及拓展方法，你可以关注一下。</p>
<h3 id="启蒙的免费资源怎么找怎么用">3 启蒙的免费资源怎么找怎么用。</h3>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/10/education/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/1_%E5%A6%82%E4%BD%95%E5%81%9A%E5%A5%BD%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99--3%E4%B8%AA%E5%B7%A5%E5%85%B7%E5%92%8C%E8%A6%81%E7%82%B9/" data-id="clb4ew653000acctj5vfb0742" data-title="1_如何做好英语启蒙" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99/" rel="tag">英语启蒙</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/tips/qt_for_window_setting" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/05/QT/tips/qt_for_window_setting/" class="article-date">
  <time class="dt-published" datetime="2022-11-05T08:47:00.000Z" itemprop="datePublished">2022-11-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/05/QT/tips/qt_for_window_setting/">Qt 窗口操作函数（窗口最大化，全屏，隐藏最大化最小化按钮）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="qt-窗口操作函数窗口最大化全屏隐藏最大化最小化按钮">Qt 窗口操作函数（窗口最大化，全屏，隐藏最大化最小化按钮）</h1>
<h2 id="qt-主窗口没有最小化最大化按钮且最大化显示">Qt 主窗口没有最小化，最大化按钮且最大化显示</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    QApplication a(argc, argv);</span><br><span class="line">    TestQtForWinCE w;</span><br><span class="line"></span><br><span class="line">    w.setWindowFlags(w.windowFlags()&amp; ~Qt::WindowMaximizeButtonHint&amp; ~Qt::WindowMinimizeButtonHint);</span><br><span class="line">    w.showMaximized();</span><br><span class="line"></span><br><span class="line">    return a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里的“&amp;~”是取反以后再按位与的意思，下面的“|”是按位或的意思</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//同时禁止最大化最小化按钮</span><br><span class="line">Qt::WindowMinMaxButtonsHint</span><br><span class="line"></span><br><span class="line">//也禁止关闭</span><br><span class="line">w.setWindowFlags(w.windowFlags() &amp;~ (Qt::WindowMinMaxButtonsHint | Qt::WindowCloseButtonHint));</span><br></pre></td></tr></table></figure>
<h2 id="qt-全屏显示函数">Qt 全屏显示函数</h2>
<p>1、window.showFullScreen()//此方法只对顶级窗口有效，对子窗口无效</p>
<p>2、yourwidget-&gt;setWindowFlags(Qt::window | Qt::FramelessWindowHint); （第一个 Qt::window 表示此 widget 是窗口类型，第二个参数使用无框架就是没有标题，状态栏和边框）</p>
<ul>
<li>Qt 最大化显示函数 window.showMaximized()</li>
<li>Qt 最小化显示函数 window.showMinimized()</li>
<li>Qt 固定尺寸显示函数 window.resize(x,y)</li>
</ul>
<h3 id="子窗口全屏显示">子窗口全屏显示：</h3>
<p>QT 中窗口部件 QWidget 成员函数 showFullScreen();是用于将窗口部件全屏显示，但是他只对窗口模式的部件有用。子窗口的特征是 Qt::SubWindow，不是独立的窗口。因此对其调用 showFullScreen（）无效。通过对对子窗口调用：setWindowFlags（Qt::Dialog）；或 setWindowFlags（Qt::Window）；将其设为窗口模式后，即可调用 showFullScreen();进行全屏显示了。</p>
<p>如果要还原为普通窗口，调用 setWindowFlags(Qt::subwindow)将子窗口设置为非顶级窗口，再调用 showNormal()还原子窗口显示。</p>
<p>参考： 相对于子窗口的全屏显示方法，不得不提的是子窗口退出全屏的方法。</p>
<p>MFC 中，子窗口退出全屏的方法简单直接，直接调用 SetWindowPos（）函数将子窗口显示到预定的位置即可。</p>
<p>QT 中，直接使用 move 和 resize 对窗口定位是没有效果的。需要先将子窗口设位非窗口模式。之后再将窗口移到理想位置。 即先调用 setWindowFlags（Qt::Dialog）；或者 setWindowFlags（Qt::SubWindow）；在调用 move 和 resize 函数。</p>
<p>有人提到退出全屏时，调用 showNormal（），再调 setWindowFlags（Qt::SubWindow）。</p>
<p>这有两个问题：1）showNormal（）也是只对顶级窗口有效。2）可以考虑先调用 showNormal（）将窗口设为原来大小，在将窗口设为子窗口模式。但这样窗口回到父窗口之中也不会显示原来的大小。</p>
<h2 id="获取屏幕宽度和高度">获取屏幕宽度和高度</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QApplication::desktop()-&gt;width() ;</span><br><span class="line">QApplication::desktop()-&gt;height() ;</span><br></pre></td></tr></table></figure>
<p>即得到屏幕分辨率,如 1024<em>768,800</em>600</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/11/05/QT/tips/qt_for_window_setting/" data-id="clb4ew65i0016cctj57ynh4bl" data-title="Qt 窗口操作函数（窗口最大化，全屏，隐藏最大化最小化按钮）" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QT-tips/" rel="tag">QT_tips</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/QT/">QT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool-use/">tool_use</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%86%E5%8F%B2/">历史</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B9%BC%E5%84%BF%E5%9B%AD%E5%B0%8F%E5%AD%A6%E6%95%99%E8%82%B2/">幼儿园小学教育</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenGL/" rel="tag">OpenGL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/QT/" rel="tag">QT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/QT-tips/" rel="tag">QT_tips</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAZ/" rel="tag">RAZ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/V4L2/" rel="tag">V4L2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode/" rel="tag">VSCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vulkan/" rel="tag">Vulkan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/" rel="tag">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openCV/" rel="tag">openCV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%86%E5%8F%B2/" rel="tag">历史</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E5%8D%9A/" rel="tag">微博</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6/" rel="tag">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%9B%E6%B4%A5%E6%A0%91/" rel="tag">牛津树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99/" rel="tag">英语启蒙</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/OpenGL/" style="font-size: 11.67px;">OpenGL</a> <a href="/tags/QSS/" style="font-size: 20px;">QSS</a> <a href="/tags/QT/" style="font-size: 10px;">QT</a> <a href="/tags/QT-tips/" style="font-size: 10px;">QT_tips</a> <a href="/tags/RAZ/" style="font-size: 10px;">RAZ</a> <a href="/tags/SpringBoot/" style="font-size: 16.67px;">SpringBoot</a> <a href="/tags/V4L2/" style="font-size: 10px;">V4L2</a> <a href="/tags/VSCode/" style="font-size: 10px;">VSCode</a> <a href="/tags/Vulkan/" style="font-size: 10px;">Vulkan</a> <a href="/tags/database/" style="font-size: 15px;">database</a> <a href="/tags/openCV/" style="font-size: 10px;">openCV</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/%E5%8E%86%E5%8F%B2/" style="font-size: 13.33px;">历史</a> <a href="/tags/%E5%BE%AE%E5%8D%9A/" style="font-size: 18.33px;">微博</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 15px;">数学</a> <a href="/tags/%E7%89%9B%E6%B4%A5%E6%A0%91/" style="font-size: 10px;">牛津树</a> <a href="/tags/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99/" style="font-size: 11.67px;">英语启蒙</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/28/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_2_mysql_mybatis/">SpringBoot 2.7教程：SpringBoot 整合 Mysql 项目应用 Mybatis-Plus</a>
          </li>
        
          <li>
            <a href="/2022/11/24/tool_use/java/SpringBoot/SpingBoot%E5%AD%A6%E4%B9%A0_1_helloworld/">SpringBoot学习_1_helloworld</a>
          </li>
        
          <li>
            <a href="/2022/11/24/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_2_mysql/">SpringBoot学习_2_mysql</a>
          </li>
        
          <li>
            <a href="/2022/11/24/tool_use/java/SpringBoot/SpringBoot%E5%AD%A6%E4%B9%A0_3_%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%A7%92%E8%89%B2/">SpringBoot学习_3_项目的三层架构与代码角色</a>
          </li>
        
          <li>
            <a href="/2022/11/24/tool_use/java/VSCode%E6%90%AD%E5%BB%BASpringBoot%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">VSCode搭建SpringBoot开发环境</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 akebee<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>