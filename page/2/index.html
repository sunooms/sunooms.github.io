<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>akebee</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="用来记录akebee的随笔以及技术记录的微博">
<meta property="og:type" content="website">
<meta property="og:title" content="akebee">
<meta property="og:url" content="https://sunooms.github.io/page/2/index.html">
<meta property="og:site_name" content="akebee">
<meta property="og:description" content="用来记录akebee的随笔以及技术记录的微博">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="akebee">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="akebee" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">akebee</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">akebee blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://sunooms.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-QT/qss/QSS_Subcontrol" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/22/QT/qss/QSS_Subcontrol/" class="article-date">
  <time class="dt-published" datetime="2022-10-22T02:31:04.000Z" itemprop="datePublished">2022-10-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/22/QT/qss/QSS_Subcontrol/">QSS-subcontrol</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="qss-subcontrol">QSS Subcontrol</h1>
<p>普通的 QSS 和 CSS 没什么区别，难度不大，但除此之外，想要使用好 QSS，还必须得掌握好 subcontrol，这个在 CSS 里没有，是 Qt 独有的。</p>
<p>什么是 subcontrol？一个复杂的 widget 由多个部分组成，它们可以是一个 widget，也可以是逻辑上的部件，例如 QCheckBox 由 icon 和 text 两个部分组成，不仅可以定义 text 的样式，还可以定义 icon 相关的样式，icon 部分就是 QCheckBox 的 <code>subcontrol ::indicator</code>。</p>
<p>在 Qt 的帮助文档里有所有 subcontrol 的说明，但是相信很多人看了还是不明白每个 subcontrol 具体是什么，这一节将使用可视化的方式标记出 subcontrol，介绍使用 QSS 自定义有 subcontrol 的常用 widget，这里的重心是怎么去 QSS subcontrol 而不是样式效果，复杂漂亮的界面需要大量的图片和更多的 QSS，这里不作介绍，以免陷入细节，掩盖本节主题。只要知道了原理，结合已经掌握的 QSS，找美工提供一套界面切图，就能很容易实现出来很专业效果了。</p>
<p>Subcontrol 的 QSS 和大多数 widget 的差不多，也支持盒子模型，可以自定义 color, background, background-color, background-image, border, padding, margin, width, height 等，也支持 Pseudo-States。</p>
<p>Subcontrol 的绘制位置由 subcontrol-origin、subcontrol-position, top, left 来指定，就先从这几个属性开始入手。</p>
<h1 id="subcontrol-origin">Subcontrol-Origin</h1>
<p><code>subcontrol-origin</code> 定义在 parent widget 中绘制 subcontrol 的参考矩形，默认在 padding 的矩形中绘制。</p>
<blockquote>
<p>The origin rectangle of the subcontrol within the parent element. If this property is not specified, the default is padding.</p>
</blockquote>
<p>subcontrol-origin 有 4 个值可选：</p>
<ul>
<li>margin</li>
<li>border</li>
<li>padding</li>
<li>content</li>
</ul>
<p>下图展示了 subcontrol-origin 的值不同时，在 parent widget 的不同位置进行绘制 subcontrol：</p>
<!--![](./images/QSS-Subcontrol-Origin.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/22/hPYidQWNSmXC7af.png" alt="QSS-Subcontrol-Origin.png" /><figcaption aria-hidden="true">QSS-Subcontrol-Origin.png</figcaption>
</figure>
<h2 id="subcontrol-position">Subcontrol-Position</h2>
<p>已经知道 subcontrol 要在 parent widget 的某个矩形区域里绘制，如 padding rectangle，这个矩形这么大，具体要在这个矩形的哪个位置绘制呢？使用 subcontrol-position 来指定，相对于 subcontrol-origin。不同的 subcontrol 的 subcontrol-position 默认值不同，例如 QSlider 的 handle 的默认值是 center center，QSpinBox 的 up-button 的默认值是 right top。</p>
<blockquote>
<p>The alignment of the subcontrol within the origin rectangle specified by subcontrol-origin. If this property is not specified, it defaults to a value that depends on the subcontrol.</p>
</blockquote>
<p>subcontrol-position 水平方向有 3 个值可选：</p>
<ul>
<li>left</li>
<li>center</li>
<li>right</li>
</ul>
<p>subcontrol-position 垂直方向有 3 个值可选：</p>
<ul>
<li>top</li>
<li>center</li>
<li>bottom</li>
</ul>
<h1 id="用-top-和-left-微调-subcontrol-的位置">用 Top 和 Left 微调 Subcontrol 的位置</h1>
<p>Top 和 left 的主要作用是 :hover，:pressed 等发生时，用 top 和 left 偏移一点 subcontrol，这样就看到 subcontrol 的鼠标动作了，偏移是相对于 subcontrol-orign 和 subcontrol-position 确定的位置，top 和 left 的默认值是 0</p>
<p><strong>用下面的 QSS 总结一下 subcontrol-origin, subcontrol-position, top, left：</strong></p>
<ul>
<li>QSpinBox 的 up-button 放置在 QSpinBox 的左边垂直居中</li>
<li>当鼠标放到 up-button 上时，将其向右下角偏移 1px</li>
<li>当鼠标离开 up-button 后，up-button 移回到原来的位置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">QSpinBox::up-button &#123;</span><br><span class="line">    subcontrol-origin: margin;</span><br><span class="line">    subcontrol-position: left center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSpinBox::up-button:hover &#123;</span><br><span class="line">    top: 1px;</span><br><span class="line">    left: 1px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来就具体的介绍每一个 Widget 有哪些 subcontrol，怎么 QSS 它们。</p>
<h1 id="qcheckbox">QCheckBox</h1>
<p>QCheckBox 的 subcontrol 有 ::indicator，比较有意思的是，text 总是显示在 indicator 右边，所以如果 indicator 靠右边显示的话，text 很可能就看不到了。</p>
<blockquote>
<p>QRadioButton 的 QSS 和 QCheckBox 的一样，所以就不在重复介绍。</p>
</blockquote>
<figure>
<img src="https://s2.loli.net/2022/10/22/7EWPDFMY4ov3wmT.png" alt="QSS-Subcontrol-CheckBox.png" /><figcaption aria-hidden="true">QSS-Subcontrol-CheckBox.png</figcaption>
</figure>
<p>下面 QSS 的效果如图：</p>
<figure>
<img src="https://s2.loli.net/2022/10/22/kZGV2WRN7zQyoed.png" alt="QSS-Subcontrol-CheckBox-1.png" /><figcaption aria-hidden="true">QSS-Subcontrol-CheckBox-1.png</figcaption>
</figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox &#123;</span><br><span class="line">    color: lightgray;</span><br><span class="line">    background: rgb(44, 44, 44);</span><br><span class="line">    border: 10px solid rgb(76, 76, 76);</span><br><span class="line">    spacing: 10px; /* indicator 和 text 的间隔 */</span><br><span class="line">    padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QCheckBox::indicator &#123;</span><br><span class="line">    subcontrol-origin: border;</span><br><span class="line">    subcontrol-position: left center;</span><br><span class="line">    background: white;</span><br><span class="line">    border: 2px solid rgb(170, 170, 170);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QCheckBox::indicator:checked &#123;</span><br><span class="line">    background: rgb(76, 76, 76);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改 subcontrol-origin 和 subcontrol-position 为不同的值看看效果是什么。</p>
</blockquote>
<h1 id="qcombobox">QComboBox</h1>
<p>QComboBox 的 subcontrol 有 drop-down。</p>
<figure>
<img src="https://s2.loli.net/2022/10/22/pWlcitwoF5jC76O.png" alt="QSS-Subcontrol-ComboBox.png" /><figcaption aria-hidden="true">QSS-Subcontrol-ComboBox.png</figcaption>
</figure>
<p>下面 QSS 的效果如图： <img src="https://s2.loli.net/2022/10/22/OuHFfgER5DsKz6C.png" alt="QSS-Subcontrol-ComboBox-1.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">QComboBox &#123;</span><br><span class="line">    color: lightgray;</span><br><span class="line">    background: rgb(44, 44, 44);</span><br><span class="line">    border: 10px solid rgb(76, 76, 76);</span><br><span class="line">    spacing: 10px; /* indicator 和 text 的间隔 */</span><br><span class="line">    padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QComboBox::drop-down &#123;</span><br><span class="line">    width: 15px;</span><br><span class="line">    height: 10px;</span><br><span class="line">    subcontrol-origin: border;</span><br><span class="line">    subcontrol-position: right center;</span><br><span class="line">    background: white;</span><br><span class="line">    border: 2px solid rgb(170, 170, 170);</span><br><span class="line">    border-radius: 3px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QComboBox::drop-down:hover &#123;</span><br><span class="line">    background: rgb(76, 76, 76);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QComboBox::drop-down:on &#123;</span><br><span class="line">    background: black;</span><br><span class="line">    top: 1px;</span><br><span class="line">    left: 1px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="qspinbox-qdateedit-qtimeedit-qdatetimeedit">QSpinBox, QDateEdit, QTimeEdit, QDateTimeEdit</h1>
<p>QSpinBox 的 subcontrol 有 <code>::up-button</code>, <code>::down-button</code>, <code>::up-arrow</code>, <code>::down-arrow</code>。</p>
<ul>
<li>up-button 显示在 QSpinBox 里，它的 subcontrol-origin 是相对于 QComboBox 的</li>
<li>down-button 显示在 QSpinBox 里，它的 subcontrol-origin 是相对于 QComboBox 的</li>
<li>up-arrow 显示在 up-button 里，它的 subcontrol-origin 是相对于 up-button 的</li>
<li>down-arrwo 显示在 down-button 里，它的 subcontrol-origin 是相对于 down-button 的</li>
</ul>
<figure>
<img src="https://s2.loli.net/2022/10/22/JEYDxl6cmvV5Qao.png" alt="QSS-Subcontrol-SpinBox.png" /><figcaption aria-hidden="true">QSS-Subcontrol-SpinBox.png</figcaption>
</figure>
<blockquote>
<p>QDateEdit, QTimeEdit, QDateTimeEdit 的 subcontrol 和 QSpinBox 是一样的，只需要把下面 QSS 里的 QSpinBox 换成 QDateEdit，QTimeEdit 或 QDateTimeEdit 即可。</p>
</blockquote>
<p>下面 QSS 的效果如图，down-button 靠左垂直居中，up-button 靠右垂直居中： <img src="https://s2.loli.net/2022/10/22/Px5HXZSRi4GsfVA.png" alt="QSS-Subcontrol-SpinBox-1.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">QSpinBox &#123;</span><br><span class="line">    color: lightgray;</span><br><span class="line">    background: rgb(44, 44, 44);</span><br><span class="line">    border: 10px solid rgb(76, 76, 76);</span><br><span class="line">    padding: 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSpinBox::down-button, QSpinBox::up-button &#123;</span><br><span class="line">    subcontrol-origin: border;</span><br><span class="line">    width: 16px;</span><br><span class="line">    height: 10px;</span><br><span class="line">    background: white;</span><br><span class="line">    border: 2px solid rgb(170, 170, 170);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSpinBox::down-button &#123;</span><br><span class="line">    subcontrol-position: center left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSpinBox::up-button &#123;</span><br><span class="line">    subcontrol-position: center right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSpinBox::up-arrow,  QSpinBox::down-arrow &#123;</span><br><span class="line">    subcontrol-origin: content;</span><br><span class="line">    subcontrol-position: center center;</span><br><span class="line">    width: 6px;</span><br><span class="line">    height: 6px;</span><br><span class="line">    background: rgb(76, 76, 76);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="qslider">QSlider</h1>
<p>QSlider 的 subcontrol 有 <code>::groove（槽）</code>，<code>::handle</code>，<code>::add-page</code> 和 <code>::sub-page</code>。</p>
<ul>
<li>groove 显示在 QSlider 里，它的 subcontrol-origin 是相对于 QSlider 的</li>
<li>handle 显示在 groove 里，它的 subcontrol-origin 是相对于 groove 的</li>
<li>sub-page 显示在 groove 里，它的 subcontrol-origin 是相对于 groove 的</li>
<li>add-page 显示在 groove 里，它的 subcontrol-origin 是相对于 groove 的</li>
<li>handle, sub-page, add-page 虽然都显示在 groove 里，但是都可以把它们扩展到 groove 外</li>
</ul>
<figure>
<img src="https://s2.loli.net/2022/10/22/CTJAcoHPpMQkB2F.png" alt="QSS-Subcontrol-Slider.png" /><figcaption aria-hidden="true">QSS-Subcontrol-Slider.png</figcaption>
</figure>
<p>下面 QSS 的效果如图： <img src="https://s2.loli.net/2022/10/22/EVLyBA3tN9KDkdb.png" alt="QSS-Subcontrol-Slider-1.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">QSlider &#123;</span><br><span class="line">    background: rgb(170, 170, 170);</span><br><span class="line">    padding: 2px;</span><br><span class="line">    height: 40px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSlider::groove:horizontal &#123;</span><br><span class="line">    subcontrol-origin: content;</span><br><span class="line">    background: rgb(76, 76, 76);</span><br><span class="line"></span><br><span class="line">    /* the groove expands to the size of the slider by default.</span><br><span class="line">    by giving it a height, it has a fixed size */</span><br><span class="line">    height: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSlider::handle:horizontal &#123;</span><br><span class="line">    background-color: rgb(50, 50, 50);</span><br><span class="line">    width: 40px;</span><br><span class="line">    border-radius: 20px;</span><br><span class="line"></span><br><span class="line">    /* handle is placed by default on the contents rect of the groove.</span><br><span class="line">    Expand outside the groove */</span><br><span class="line">    margin: -10px 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSlider::sub-page:horizontal &#123;</span><br><span class="line">    background: #999;</span><br><span class="line">    margin: 5px;</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QSlider::add-page:horizontal &#123;</span><br><span class="line">    background: #666;</span><br><span class="line">    margin: 5px;</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Groove 的默认高度和 QSlider content rectangle 的高度一样，给它一个高度值就可以让他有固定的高度了，把 groove 的 height 去掉试试。</p>
<p>Handle 的默认高度和 groove content rectangle 的高度一样，为了让起显示超出 groove，需要设置 margin 为负值，如果这个负值太小，显示超出 QSlider 的部分将看不到。Handle 的 subcontrol-position 没有作用，因为 handle 不是固定在一个地方的，而是根据 QSlider 的值动态计算显示的位置。</p>
<h1 id="qprogressbar">QProgressBar</h1>
<p>QProgressBar 的 subcontrol 有 <code>::chunk</code>。</p>
<figure>
<img src="https://s2.loli.net/2022/10/22/YFz5RdLI2xjTaNf.png" alt="QSS-Subcontrol-ProgressBar.png" /><figcaption aria-hidden="true">QSS-Subcontrol-ProgressBar.png</figcaption>
</figure>
<p>对于 QProgressBar 的 QSS，大多数都是想把 chunk 定义为圆角矩形的样子，但是当它的 value 比较小时，chunk 的圆角会变成直角，即使使用图片都不行，效果很不理想，所以如果要修改 QProgressBar 的外观的话，推荐继承 QProgressBar 自己绘制或者使用 QStyle。</p>
<h1 id="qgroupbox">QGroupBox</h1>
<p>QGroupBox 的 subcontrol 有 <code>::title</code> 和 <code>::indicator</code>。</p>
<ul>
<li>title 相对于 QGroupBox</li>
<li>indicator 的 subcontrol-origin 和 subcontrol-position 自定义无效</li>
</ul>
<figure>
<img src="https://s2.loli.net/2022/10/22/IfHyVb7UkElqFtC.png" alt="QSS-Subcontrol-GroupBox.png" /><figcaption aria-hidden="true">QSS-Subcontrol-GroupBox.png</figcaption>
</figure>
<p>下面 QSS 的效果如图： <img src="https://s2.loli.net/2022/10/22/noGQ23kZvamDgM6.png" alt="QSS-Subcontrol-GroupBox-1.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">QGroupBox &#123;</span><br><span class="line">    background-color: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1,</span><br><span class="line">                      stop: 0 #E0E0E0, stop: 1 #EEEEEE);</span><br><span class="line">    border: 2px solid gray;</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">    margin-top: 10px; /* leave space at the top for the title */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QGroupBox::title &#123;</span><br><span class="line">    subcontrol-origin: margin;</span><br><span class="line">    subcontrol-position: top center; /* position at the top center */</span><br><span class="line">    padding: 2px 3px;</span><br><span class="line">    color: white;</span><br><span class="line">    margin-top: 2px;</span><br><span class="line">    background-color: gray;</span><br><span class="line">    border-radius: 3px;</span><br><span class="line">    spacing: 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QGroupBox::indicator &#123;</span><br><span class="line">    width: 13px;</span><br><span class="line">    height: 13px;</span><br><span class="line">    border: 1px solid black;</span><br><span class="line">    background: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QGroupBox::indicator:checked &#123;</span><br><span class="line">    background: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="qtableview">QTableView</h1>
<p>QTableView 相关的 subcontrol 有 QTableView 的 <code>::item</code>，QHeaderView 的 <code>::section</code> 和 左上角的 QTableCornerButton 的 <code>::section</code>。</p>
<blockquote>
<p>QTableView 的 QSS 对于 QTableWidget 也是生效的。</p>
</blockquote>
<figure>
<img src="https://s2.loli.net/2022/10/22/9A75fNS1KQqhacB.png" alt="QSS-Subcontrol-TableView.png" /><figcaption aria-hidden="true">QSS-Subcontrol-TableView.png</figcaption>
</figure>
<p>下面 QSS 的效果如图： <img src="https://s2.loli.net/2022/10/22/ZMyCObuT8YP5Uq6.png" alt="QSS-Subcontrol-TableView-1.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">QTableView, QHeaderView, QTableView::item &#123;</span><br><span class="line">	background: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTableView::item:alternate &#123;</span><br><span class="line">    background: rgb(209, 231, 254);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTableView::item:selected &#123; /*被选中的index*/</span><br><span class="line">    color: black;</span><br><span class="line">    background: qlineargradient(</span><br><span class="line">        x1: 0, y1: 0, x2: 0, y2: 1,</span><br><span class="line">        stop: 0 #FAFBFE,</span><br><span class="line">        stop: 1 #DCDEF1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QHeaderView::section:horizontal, QTableCornerButton::section &#123;</span><br><span class="line">    background-color: qlineargradient(spread:reflect,</span><br><span class="line">        x1:0, y1:0, x2:0, y2:1,</span><br><span class="line">        stop:0 rgba(255, 255, 255, 255),</span><br><span class="line">        stop:1 rgba(164, 164, 164, 255));</span><br><span class="line">	border: 1px solid rgb(153, 153, 153);</span><br><span class="line">    border-width: 0 1px 1px 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QHeaderView::section:vertical &#123;</span><br><span class="line">	background: #DDD;</span><br><span class="line">	border: 1px solid rgb(153, 153, 153);</span><br><span class="line">    border-width: 0 1px 1px 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意: QTableView::item 设置 padding, margin 没有的效果。</p>
</blockquote>
<h1 id="qtreeview">QTreeView</h1>
<p>QTreeView 相关的 subcontrol 有 <code>QHeaderView::section</code>（和上面 QTableView 的 header view 的 QSS 一样，其实就是一个东西），<code>QTreeView::item</code> 和 <code>QTreeView::branch</code>。</p>
<blockquote>
<p>QTreeView 的 QSS 对于 QTreeWidget 也是生效的。</p>
</blockquote>
<figure>
<img src="https://s2.loli.net/2022/10/22/8qiMer92Kshja4z.png" alt="QSS-Subcontrol-TreeView.png" /><figcaption aria-hidden="true">QSS-Subcontrol-TreeView.png</figcaption>
</figure>
<p>QTreeView 的 subcontrol 并不多，但是 branch 有很多种不同的状态，关键就是理解这些状态，不同状态时使用不同的背景，下面 QSS 的效果如图： <img src="https://s2.loli.net/2022/10/22/B6XcbkhJzfUo7Qu.png" alt="QSS-Subcontrol-TreeView-1.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">QHeaderView::section:horizontal &#123;</span><br><span class="line">    background-color: qlineargradient(spread:reflect,</span><br><span class="line">        x1:0, y1:0, x2:0, y2:1,</span><br><span class="line">        stop:0 rgba(255, 255, 255, 255),</span><br><span class="line">        stop:1 rgba(164, 164, 164, 255));</span><br><span class="line">    border: 1px solid rgb(153, 153, 153);</span><br><span class="line">    border-width: 0 1px 1px 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::item &#123;</span><br><span class="line">    border-bottom: 1px solid lightgray;</span><br><span class="line">    selection-color: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::item:selected &#123; /*被选中的index*/</span><br><span class="line">    background: qlineargradient(</span><br><span class="line">        x1: 0, y1: 0, x2: 0, y2: 1,</span><br><span class="line">        stop: 0 #FAFBFE,</span><br><span class="line">        stop: 1 #DCDEF1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::branch &#123;</span><br><span class="line">        background: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::branch:has-siblings:!adjoins-item &#123;</span><br><span class="line">        background: cyan;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::branch:has-siblings:adjoins-item &#123;</span><br><span class="line">        background: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::branch:!has-children:!has-siblings:adjoins-item &#123;</span><br><span class="line">        background: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::branch:closed:has-children:has-siblings &#123;</span><br><span class="line">        background: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::branch:has-children:!has-siblings:closed &#123;</span><br><span class="line">        background: gray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::branch:open:has-children:has-siblings &#123;</span><br><span class="line">        background: magenta;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTreeView::branch:open:has-children:!has-siblings &#123;</span><br><span class="line">        background: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>哦，哦，哦……，这一堆 QSS 是不是很熟悉，好像在哪里看到过？那就对了，说明你看书不少，吼吼，就是来源于 Qt 的帮助文档。上面的 QSS 是不实用的，直接这么用到项目里，肯定被咔嚓，但是把各种状态的 branch 标记为不同的颜色，这样在做设计的时候就能很容易的分辨出各种 branch，然后根据需求设计出不同的图片放到对应的 branch。其实 Qt 的帮助文档里对 QTreeView 的 QSS 已经有一个很完善的例子，在 QtCreator 的帮助里搜索 <code>style sheets examples</code>，定位到 <code>Customizing QTreeView</code> 就可以看到这个例子了，开发的时候，照葫芦画瓢的做就可以了：</p>
<figure>
<img src="https://s2.loli.net/2022/10/22/bWTL5EXHqpcrK72.png" alt="QSS-Subcontrol-TreeView-2.png" /><figcaption aria-hidden="true">QSS-Subcontrol-TreeView-2.png</figcaption>
</figure>
<h1 id="qtabwidget">QTabWidget</h1>
<p>QTabWidget 相关的 subcontrol 有：</p>
<ul>
<li>QTabWidget::pane</li>
<li>QTabWidget::tab-bar</li>
<li>QTabBar::tab</li>
<li>QTabBar::close-button</li>
<li>QTabBar::tear</li>
<li>QTabBar::scroller</li>
<li>QTabBar QToolButton::left-arrow</li>
<li>QTabBar QToolButton::right-arrow</li>
</ul>
<figure>
<img src="https://s2.loli.net/2022/10/22/m9ly1zcJP2W8ngZ.png" alt="QSS-Subcontrol-TabWidget.png" /><figcaption aria-hidden="true">QSS-Subcontrol-TabWidget.png</figcaption>
</figure>
<p>不幸的是，在我看来，QTabWidget 还有一些 bug，例如：</p>
<ul>
<li>QTabBar::close-button 只能定位在 tab 的左边或者右边，不能调整和文本之间的间隔</li>
<li>Tab 互相遮盖的情况下，如我们的例子的样式，拖动 tab 时某些 tab 会被截断</li>
<li>QTabBar::scroller 的定位也是个问题，不能自由定位到需要的位置</li>
<li>QTabBar 和 QTabWidget 不一样宽</li>
</ul>
<figure>
<img src="https://s2.loli.net/2022/10/22/QuvZV361g9AWowi.png" alt="QSS-Subcontrol-TabWidget-2.png" /><figcaption aria-hidden="true">QSS-Subcontrol-TabWidget-2.png</figcaption>
</figure>
<p>上图是 SublimeText 的截图，很多应用中的 tab widget 也差不多是上面这个样，至少这几个 bug 决定了 QTabWidget 使用 QSS 我还做不到这么好，其实用性大受限制，所以就不对 QTabWidget 做太多介绍，只给出一个小例子，展示一下简单的定制 QTabWidget，满足一般的需求，复杂的需要我们自己实现一个 tab widget。</p>
<p>下面 QSS 的效果如图： <img src="https://s2.loli.net/2022/10/22/dw5F9SrBAmHTzlM.png" alt="QSS-Subcontrol-TabWidget-1.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">QTabWidget::pane &#123; /* The tab widget frame */</span><br><span class="line">    border: 2px solid rgb(69, 69, 69);</span><br><span class="line">    margin-top: -2px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTabWidget::tab-bar &#123;</span><br><span class="line">    left: 5px; /* move to the right by 5px */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTabBar::tab &#123;</span><br><span class="line">    color: gray;</span><br><span class="line">    min-width: 40px;</span><br><span class="line">    height: 28px;</span><br><span class="line">    border-width: 0 18px 0 18px;</span><br><span class="line">    border-image: url(:/img/tab-inactive.png) 0 18 0 18 stretch stretch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTabBar::tab:selected &#123;</span><br><span class="line">    color: #DDD;</span><br><span class="line">    height: 28px;</span><br><span class="line">    border-width: 0 18px 0 18px;</span><br><span class="line">    border-image: url(:/img/tab-active.png) 0 18 0 18 stretch stretch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTabBar::tab:!first &#123;</span><br><span class="line">    margin-left: -20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QTabBar::tab:hover &#123;</span><br><span class="line">    color: #DDD;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">tab-active.png</th>
<th style="text-align: left;">tab-inactive.png</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/22/uyoIpHPeYJKFmxr.png" alt="tab-active.png" /></td>
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/22/PB8IRJnGap5zgM1.png" alt="tab-inactive.png" /></td>
</tr>
</tbody>
</table>
<p>QTabWidget 的关闭按钮可如下定义样式:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QTabBar::close-button &#123;</span><br><span class="line">    image: url(close.png);</span><br><span class="line">    subcontrol-position: left;</span><br><span class="line">&#125;</span><br><span class="line">QTabBar::close-button:hover &#123;</span><br><span class="line">    image: url(close-hover.png)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="qscrollbar">QScrollBar</h1>
<p>QScrollBar 相关的 subcontrol 挺多的，仔细观察的话，有点像 QSpinBox 和 QSlider 的合体：</p>
<ul>
<li>::sub-line, ::add-line</li>
<li>::sub-page, ::add-page</li>
<li>::up-arrow, ::down-arrow</li>
<li>::left-arrow, ::right-arrow</li>
</ul>
<figure>
<img src="https://s2.loli.net/2022/10/22/tDZ8dpoEKOF7nXJ.png" alt="QSS-Subcontrol-ScrollBar.png" /><figcaption aria-hidden="true">QSS-Subcontrol-ScrollBar.png</figcaption>
</figure>
<p>很多时候并不是每一个 subcontrol 都需要处理的，例如下面的 QSS 中，arrow 没有处理，直接绘制在 ::sub-line 和 ::add-line 的背景里，也没有处理 ::sub-page 和 ::add-page，效果如图： <img src="https://s2.loli.net/2022/10/22/wAEBphuDCJFWOYz.png" alt="QSS-Subcontrol-ScrollBar-1.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">QScrollBar:horizontal &#123;</span><br><span class="line">    height: 16px;</span><br><span class="line">    border-width: 0px 10px 0px 10px;</span><br><span class="line">    border-image: url(:/img/horizontal-track.png) 0 10 0 10 repeat stretch;</span><br><span class="line">    margin-left: 6px;</span><br><span class="line">    margin-right: 16px;</span><br><span class="line">    padding-right: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QScrollBar::handle:horizontal &#123;</span><br><span class="line">    min-width: 40px;</span><br><span class="line">    border-width: 0 17px 0 17px;</span><br><span class="line">    border-image: url(:/img/horizontal-handle.png) 0 17 0 17 repeat repeat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QScrollBar::sub-line:horizontal &#123;</span><br><span class="line">    width: 20px;</span><br><span class="line">    height: 17px;</span><br><span class="line">    subcontrol-position: left;</span><br><span class="line">    subcontrol-origin: margin;</span><br><span class="line">    background-image: url(:/img/horizontal-sub-line.png)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QScrollBar::add-line:horizontal &#123;</span><br><span class="line">    width: 20px;</span><br><span class="line">    height: 17px;</span><br><span class="line">    subcontrol-position: right;</span><br><span class="line">    subcontrol-origin: border;</span><br><span class="line">    background-image: url(:/img/horizontal-add-line.png)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QScrollBar:vertical &#123;</span><br><span class="line">    width: 16px;</span><br><span class="line">    border-width: 10px 0px 10px 0px;</span><br><span class="line">    border-image: url(:/img/vertical-track.png) 10 0 10 0 repeat repeat;</span><br><span class="line">    margin-top: 6px;</span><br><span class="line">    margin-bottom: 16px;</span><br><span class="line">    padding-bottom: 6px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QScrollBar::handle:vertical &#123;</span><br><span class="line">    min-height: 40px;</span><br><span class="line">    border-width: 17px 0px 17px 0px;</span><br><span class="line">    border-image: url(:/img/vertical-handle.png) 17 0 17 0 repeat repeat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QScrollBar::sub-line:vertical &#123;</span><br><span class="line">    width: 17px;</span><br><span class="line">    height: 22px;</span><br><span class="line">    subcontrol-position: top left;</span><br><span class="line">    subcontrol-origin: margin;</span><br><span class="line">    background-image: url(:/img/vertical-sub-line.png)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QScrollBar::add-line:vertical &#123;</span><br><span class="line">    width: 17px;</span><br><span class="line">    height: 22px;</span><br><span class="line">    subcontrol-position: bottom;</span><br><span class="line">    subcontrol-origin: border;</span><br><span class="line">    background-image: url(:/img/vertical-add-line.png)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>QTableView 的 QSS 这里没有给出，请参考上面 QTableView 的 subcontrol 的内容。</p>
</blockquote>
<p>QScrollBar 使用的背景图：</p>
<p><img src="https://s2.loli.net/2022/10/22/mNgfvWJ1UrFE3kC.png" alt="horizontal-add-line.png" /> <img src="https://s2.loli.net/2022/10/22/eML8gZSClyci9xY.png" alt="horizontal-sub-line.png" /> <img src="https://s2.loli.net/2022/10/22/QIr4ACkbxEgJuaw.png" alt="horizontal-handle.png" /> <img src="https://s2.loli.net/2022/10/22/OwthLbW3PlKz7ep.png" alt="horizontal-track.png" /> <img src="https://s2.loli.net/2022/10/22/iKfISvxHRTsGugq.png" alt="vertical-add-line.png" /> <img src="https://s2.loli.net/2022/10/22/ESUkdBxXFOQDYCv.png" alt="vertical-sub-line.png" /> <img src="https://s2.loli.net/2022/10/22/Vze4C1g9xYL57op.png" alt="vertical-handle.png" /> <img src="https://s2.loli.net/2022/10/22/iDh3Tx1kaqo5uI8.png" alt="vertical-track.png" /></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/22/QT/qss/QSS_Subcontrol/" data-id="cl9y15qf60006cwtjfki1f5ac" data-title="QSS-subcontrol" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-tool_use/blog/图床介绍" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/19/tool_use/blog/%E5%9B%BE%E5%BA%8A%E4%BB%8B%E7%BB%8D/" class="article-date">
  <time class="dt-published" datetime="2022-10-19T02:00:00.000Z" itemprop="datePublished">2022-10-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/19/tool_use/blog/%E5%9B%BE%E5%BA%8A%E4%BB%8B%E7%BB%8D/">在线图床介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="图床介绍">图床介绍</h1>
<p>写博客记录平时的技术细节，遇到图片不好解决，因为 markdown 文档图片本地能显示，上传到网上就不能。 需要一个在线图床，实现 markdown 文档的图片展现问题。</p>
<h2 id="sm.ms-图床服务器">SM.MS 图床服务器</h2>
<p><a target="_blank" rel="noopener" href="https://sm.ms">SM.MS</a>是一个免费的图片服务器，上传图片即可返回图片的网络 url，这样就省的自己维护和搭建专门的图片服务器了。 网址是： [https://sm.ms]这个被封了。新的网站： https://smms.app/</p>
<p>默认有 5G 空间限制。 写微博够了。</p>
<h2 id="使用">使用</h2>
<ul>
<li>1 登录 SM.M 网站，输入用户名密码</li>
<li>2 上传图片</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/19/tool_use/blog/%E5%9B%BE%E5%BA%8A%E4%BB%8B%E7%BB%8D/" data-id="cl9y15qfk001tcwtj5hk1hu7m" data-title="在线图床介绍" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BE%AE%E5%8D%9A/" rel="tag">微博</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/qss/border-Image" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/18/QT/qss/border-Image/" class="article-date">
  <time class="dt-published" datetime="2022-10-18T02:31:04.000Z" itemprop="datePublished">2022-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/18/QT/qss/border-Image/">border-Image</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="border-image">Border Image</h1>
<p>好多程序员有可能同时身兼数职，不仅要写代码，还要做美工，当 DBA，干运维，修电脑，搞得像孙悟空似的，什么都会变：</p>
<!--![](./images/QSS-BorderImage-Wukong.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/9dzwJsV7GojlSPQ.png" alt="QSS-BorderImage-Wukong.png" /><figcaption aria-hidden="true">QSS-BorderImage-Wukong.png</figcaption>
</figure>
<p>这个这个，还是回到写代码，除了写代码，其他的我们都不专业，美工的活还是让美工去做吧，那些界面很炫的效果，都是由美工设计并提供切好的图交给程序员，然后实现出来的。</p>
<p>例如由美工提供左边的按钮背景图，我们需要实现右边的效果，并且背景随着按钮的大小自动变化：</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">圆角按钮背景</th>
<th style="text-align: left;">圆角按钮效果</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/19/nV6QNmpjBJk1ZPT.png" alt="QSS-BorderImage-Round-Button.png" /></td>
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/19/vTkLUGno7PE5Fam.png" alt="QSS-BorderImage-Buttons.png" /></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;"><!--                                                                                    | ![](./images/QSS-BorderImage-Round-Button.png)                                     | ![](./images/QSS-BorderImage-Buttons.png) | --></td>
<td style="text-align: left;"></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>前面我们学习过的和修改背景相关的知识有 background-image，如果背景图和按钮一样大时使用 background-image 没有任何问题，但是当按钮和背景图不一样大时，背景图要么显示不全，要么重复平铺到按钮上，显然满足不了这里的需求。不过 QSS 也支持 <code>border-image</code>，使用 <code>border-image</code> 就能很快的做出上面的效果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.QPushButton &#123;</span><br><span class="line">	border-width: 12px 12px 12px 12px;</span><br><span class="line">	border-image: url(:/img/round-button.png) 12 12 12 12 repeat stretch;</span><br><span class="line"></span><br><span class="line">	min-height: 24px; /* 避免按钮太小 */</span><br><span class="line">	padding: -10px 0 -10px 0; /* 调整文字与边界的距离 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><code>border-width</code> 后面的四个数字按顺序分别为:</strong></p>
<ul>
<li>1 <code>border-top</code> 的高 12px</li>
<li>2 <code>border-right</code> 的宽 12px</li>
<li>3 <code>border-bottom</code> 的高 12px</li>
<li>4 <code>border-left</code> 的宽 12px</li>
</ul>
<p><strong><code>border-image</code> 后面的参数按顺序分别为:</strong></p>
<ul>
<li>1 背景图的路径，可以是绝对路径，相对路径，资源文件里的路径</li>
<li>2 四个数字按顺序分别为
<ul>
<li>1 背景图中 <code>最上面的 12px 高的图像</code> 填充到 Widget 的 <code>border-top</code></li>
<li>2 背景图中 <code>最右边的 12px 宽的图像</code> 填充到 Widget 的 <code>border-right</code></li>
<li>3 背景图中 <code>最下边的 12px 高的图像</code> 填充到 Widget 的 <code>border-bottom</code></li>
<li>4 背景图中 <code>最左边的 12px 宽的图像</code> 填充到 Widget 的 <code>border-left</code></li>
</ul></li>
<li>3 数字后面的第一个参数 repeat|round|stretch 指定 <code>水平方向的缩放或者平铺</code></li>
<li>4 数字后面的第二个参数 repeat|round|stretch 指定 <code>垂直方向的缩放或者平铺</code> 注：平铺(repeated)、铺满(rounded)或拉伸(stretched)</li>
</ul>
<blockquote>
<p>注意： border-width 后的数字有单位 border-image 后的数字没有单位 min-height 和 padding 不是必须的，这里用来细微的调节按钮的效果</p>
</blockquote>
<p>Border-Image 从名字上看，像是用来图片来设置 border 的，其实是用图片来设置整个 widget 的背景的，我曾经就被这个名字迷惑过。</p>
<h1 id="思考">思考</h1>
<hr />
<h2 id="border-image-的内容到此也可以说是介绍完了但是">Border-Image 的内容到此也可以说是介绍完了，但是:</h2>
<ul>
<li>上面 QSS 中的内容都清楚了吗？</li>
<li>那些数值可以随便填写吗？</li>
<li>Border-Image 的实现原理是什么？</li>
<li>如果不用 QSS，而是用 QPainter 自己绘制实现同样的效果要怎么绘制呢？</li>
</ul>
<h2 id="border-image-原理">Border-Image 原理</h2>
<p>下图是理解 Border-Image 的核心，又称为九宫格，看懂这个图，也就能理解 Border-Image 了:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">圆角按钮背景</th>
<th style="text-align: left;">圆角按钮效果</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/19/cdrJek8yPqOXUip.png" alt="QSS-BorderImage-9Patch.png" /></td>
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/19/KslYetfHWiA57vg.png" alt="QSS-BorderImage-9Patch-Widget.png" /></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;"><!--                                                                              | ![](./images/QSS-BorderImage-9Patch.png)                                                 | ![](./images/QSS-BorderImage-9Patch-Widget.png) | --></td>
<td style="text-align: left;"></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>QSS 把背景图和 widget 都分割成如图 9 个部分:</strong></p>
<ul>
<li>背景图的 <code>1</code>, <code>3</code>, <code>7</code>, <code>9</code> 分别缩放填充到 widget 的 <code>1,</code> <code>3</code>, <code>7</code>, <code>9</code></li>
<li>背景图的 <code>2</code> 和 <code>8</code> 根据水平参数缩放或平铺到 widget 的 <code>2</code> 和 <code>8</code></li>
<li>背景图的 <code>4</code> 和 <code>6</code> 根据垂直参数缩放或平铺到 widget 的 <code>4</code> 和 <code>6</code></li>
<li>背景图的 <code>5</code> 同时根据水平和垂直参数缩放或平铺到 widget 的 <code>5</code></li>
</ul>
<p>使用 <code>Border-Image</code>，主要是设置 <code>border-width</code> 和 <code>border-image</code>。Widget 的 <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>, <code>6</code>, <code>7</code>, <code>8</code>, <code>9</code> 表示 Widget 的边 Border，如果不设置 <code>border-width</code>，会出现不可意料的效果，<code>border-width</code> 里的数值当然可以随意设置，但是如果设置不当，效果就很难达到我们的要求。</p>
<blockquote>
<p>一定要设置同时 border-width 和 border-image。</p>
</blockquote>
<p><strong>为了实现最佳效果，应当:</strong></p>
<ul>
<li>Widget 的 <code>2</code> 的高和背景图的 <code>2</code> 一样高</li>
<li>Widget 的 <code>8</code> 的高和背景图的 <code>8</code> 一样高</li>
<li>Widget 的 <code>4</code> 的宽和背景图的 <code>4</code> 一样宽</li>
<li>Widget 的 <code>6</code> 的宽和背景图的 <code>6</code>一样宽</li>
</ul>
<p>如果不这么设置，四个角就会使用缩放填充，圆角的效果有可能出现模糊。</p>
<p><strong>填充模式:</strong></p>
<ul>
<li><code>stretch</code>：用拉伸方式来填充边框背景图</li>
<li><code>repeat</code>：用平铺方式来填充边框背景图，当图片碰到边界时，如果超过则被截断</li>
<li><code>round</code>：用平铺方式来填充边框背景图，图片会根据边框的尺寸动态调整图片的大小直至正好可以铺满整个边框</li>
</ul>
<p>为了直观的理解 repeat 和 round 的区别，下面的例子水平方向使用 repeat，垂直方向使用 round：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.QLabel &#123;</span><br><span class="line">    border-width: 27px;</span><br><span class="line">    border-image: url(:/img/repeat-round.png) 27 27 repeat round;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">背景图</th>
<th style="text-align: left;">效果图</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/19/gkWvdZrfhKnomEL.png" alt="QSS-BorderImage-Repeat-Round.png" /></td>
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/19/XIL7dz9nrM8oT1b.png" alt="QSS-BorderImage-Repeat-Round-Widget.png" /></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;"><!--                                                                                    | ![](./images/QSS-BorderImage-Repeat-Round.png)                                                 | ![](./images/QSS-BorderImage-Repeat-Round-Widget.png) | --></td>
<td style="text-align: left;"></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>水平方向使用 <code>repeat</code>，黄色的菱形 <code>没有被缩放</code>，一个接着一个的向右绘制，最右边宽度不够，只绘制了一部分，被截断了</li>
<li>垂直方向使用 <code>round</code>，黄色的菱形 <code>被缩放了</code>，垂直方向的高度大于 2 个菱形的高度，小于 3 个菱形的高度，所以压缩绘制了 3 个菱形</li>
</ul>
<p>QSS 的 Border-Image 和 CSS3 的 Border-Image 是一样的，可以搜索参考 CSS3 的例子深入学习。</p>
<h1 id="qpainter-绘制实现-border-image-效果">QPainter 绘制实现 Border-Image 效果</h1>
<p>不用 QSS 的 Border-Image，而是使用 QPainter 手动地绘制出同样的效果，原理和 Border-Image 一样，把图片分割成 9 个部分，Widget 也分割成 9 个部分，把图片上的 9 个部分绘制到 Widget 上对应的 9 个部分里面。下图是使用 QPainter 实现的效果图，和使用 QSS 的效果一样。</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">圆角按钮背景</th>
<th style="text-align: left;">QPainter 绘制的圆角按钮效果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/19/nV6QNmpjBJk1ZPT.png" alt="QSS-BorderImage-Round-Button.png" /></td>
<td style="text-align: left;"><img src="https://s2.loli.net/2022/10/22/2y4mCAEg9MtWYbN.png" alt="QSS-BorderImage-Painted.png" /></td>
</tr>
</tbody>
</table>
<p>类 PaintedBorderImageWidget 继承自 QWidget，用于演示 Border-Image 的 QPainter 实现，定义了 4 条边的宽和 9 个 pixmap，对应背景图边宽和 9 个部分。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">// 文件名: PaintedBorderImageWidget.h</span><br><span class="line"></span><br><span class="line">#ifndef PAINTEDBORDERIMAGEWIDGET_H</span><br><span class="line">#define PAINTEDBORDERIMAGEWIDGET_H</span><br><span class="line"></span><br><span class="line">#include &lt;QWidget&gt;</span><br><span class="line">#include &lt;QList&gt;</span><br><span class="line"></span><br><span class="line">class PaintedBorderImageWidget : public QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">public:</span><br><span class="line">    explicit PaintedBorderImageWidget(QWidget *parent = 0);</span><br><span class="line"></span><br><span class="line">protected:</span><br><span class="line">    void paintEvent(QPaintEvent *event) Q_DECL_OVERRIDE;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    void prepareBorderImages(const QString &amp;imagePath);</span><br><span class="line">    void drawBorderImages(QPainter *painter, const QRect &amp;rect) const;</span><br><span class="line">    QList&lt;QRect&gt; calculateNineRects(const QRect &amp;rect,</span><br><span class="line">                                    int top,</span><br><span class="line">                                    int right,</span><br><span class="line">                                    int bottom,</span><br><span class="line">                                    int left) const;</span><br><span class="line">    QPixmap scaleImage(const QPixmap &amp;pixmap, const QSize &amp;size) const;</span><br><span class="line"></span><br><span class="line">    int top;    // 上边的宽</span><br><span class="line">    int right;  // 右边的宽</span><br><span class="line">    int bottom; // 下边的宽</span><br><span class="line">    int left;   // 左边的宽</span><br><span class="line"></span><br><span class="line">    QPixmap topLeftPixmap;      // 左上角的图片</span><br><span class="line">    QPixmap topPixmap;          // 顶部的图片</span><br><span class="line">    QPixmap topRightPixmap;     // 右上角的图片</span><br><span class="line">    QPixmap leftPixmap;         // 左边的图片</span><br><span class="line">    QPixmap centerPixmap;       // 中间的图片</span><br><span class="line">    QPixmap rightPixmap;        // 右边的图片</span><br><span class="line">    QPixmap bottomLeftPixmap;   // 左下角的图片</span><br><span class="line">    QPixmap bottomPixmap;       // 底部的图片</span><br><span class="line">    QPixmap bottomRightPixmap;  // 右下角的图片</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">#endif // PAINTEDBORDERIMAGEWIDGET_H</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">// 文件名: PaintedBorderImageWidget.cpp</span><br><span class="line"></span><br><span class="line">#include &quot;PaintedBorderImageWidget.h&quot;</span><br><span class="line">#include &lt;QPainter&gt;</span><br><span class="line">#include &lt;QPixmap&gt;</span><br><span class="line"></span><br><span class="line">PaintedBorderImageWidget::PaintedBorderImageWidget(QWidget *parent) : QWidget(parent) &#123;</span><br><span class="line">    // 边宽，我们这里选择的图片比较简单，边宽都是 12px</span><br><span class="line">    top = 12;</span><br><span class="line">    right = 12;</span><br><span class="line">    bottom = 12;</span><br><span class="line">    left = 12;</span><br><span class="line"></span><br><span class="line">    // 背景图存储在资源文件里，当然可以是文件系统里的文件</span><br><span class="line">    prepareBorderImages(&quot;:/img/round-button.png&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void PaintedBorderImageWidget::paintEvent(QPaintEvent *) &#123;</span><br><span class="line">    QPainter painter(this);</span><br><span class="line">    drawBorderImages(&amp;painter, rect()); // 绘制的区域是整个 Widget</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void PaintedBorderImageWidget::prepareBorderImages(const QString &amp;imagePath) &#123;</span><br><span class="line">    // 加载背景图</span><br><span class="line">    QPixmap pixmap(imagePath);</span><br><span class="line"></span><br><span class="line">    // 把圆角背景图分割成 9 个部分</span><br><span class="line">    QRect pixmapRect(0, 0, pixmap.width(), pixmap.height());</span><br><span class="line">    QList&lt;QRect&gt; rects = calculateNineRects(pixmapRect, top, right, bottom, left);</span><br><span class="line"></span><br><span class="line">    topLeftPixmap  = pixmap.copy(rects.at(0));</span><br><span class="line">    topPixmap      = pixmap.copy(rects.at(1));</span><br><span class="line">    topRightPixmap = pixmap.copy(rects.at(2));</span><br><span class="line"></span><br><span class="line">    leftPixmap   = pixmap.copy(rects.at(3));</span><br><span class="line">    centerPixmap = pixmap.copy(rects.at(4));</span><br><span class="line">    rightPixmap  = pixmap.copy(rects.at(5));</span><br><span class="line"></span><br><span class="line">    bottomLeftPixmap  = pixmap.copy(rects.at(6));</span><br><span class="line">    bottomPixmap      = pixmap.copy(rects.at(7));</span><br><span class="line">    bottomRightPixmap = pixmap.copy(rects.at(8));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void PaintedBorderImageWidget::drawBorderImages(QPainter *painter, const QRect &amp;rect) const &#123;</span><br><span class="line">    // 把要绘制的 Rect 分割成 9 个部分，上，右，下，左 4 边的宽和背景图的一样</span><br><span class="line">    QList&lt;QRect&gt; rects = calculateNineRects(rect, top, right, bottom, left);</span><br><span class="line"></span><br><span class="line">    QRect topLeftRect  = rects.at(0);</span><br><span class="line">    QRect topRect      = rects.at(1);</span><br><span class="line">    QRect topRightRect = rects.at(2);</span><br><span class="line"></span><br><span class="line">    QRect leftRect   = rects.at(3);</span><br><span class="line">    QRect centerRect = rects.at(4);</span><br><span class="line">    QRect rightRect  = rects.at(5);</span><br><span class="line"></span><br><span class="line">    QRect bottomLeftRect  = rects.at(6);</span><br><span class="line">    QRect bottomRect      = rects.at(7);</span><br><span class="line">    QRect bottomRightRect = rects.at(8);</span><br><span class="line"></span><br><span class="line">    // 把背景图片上的 9 个部分使用缩放的方式绘制到 Rect 上对应的 9 个部分</span><br><span class="line">    painter-&gt;drawPixmap(topLeftRect, scaleImage(topLeftPixmap, topLeftRect.size()));</span><br><span class="line">    painter-&gt;drawPixmap(topRect, scaleImage(topPixmap, topRect.size()));</span><br><span class="line">    painter-&gt;drawPixmap(topRightRect, scaleImage(topRightPixmap,topRightRect.size()));</span><br><span class="line"></span><br><span class="line">    painter-&gt;drawPixmap(leftRect, scaleImage(leftPixmap, leftRect.size()));</span><br><span class="line">    painter-&gt;drawPixmap(centerRect, scaleImage(centerPixmap, centerRect.size()));</span><br><span class="line">    painter-&gt;drawPixmap(rightRect, scaleImage(rightPixmap, rightRect.size()));</span><br><span class="line"></span><br><span class="line">    painter-&gt;drawPixmap(bottomLeftRect, scaleImage(bottomLeftPixmap, bottomLeftRect.size()));</span><br><span class="line">    painter-&gt;drawPixmap(bottomRect, scaleImage(bottomPixmap, bottomRect.size()));</span><br><span class="line">    painter-&gt;drawPixmap(bottomRightRect, scaleImage(bottomRightPixmap, bottomRightRect.size()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QList&lt;QRect&gt; PaintedBorderImageWidget::calculateNineRects(const QRect &amp;rect,</span><br><span class="line">                                                          int top,</span><br><span class="line">                                                          int right,</span><br><span class="line">                                                          int bottom,</span><br><span class="line">                                                          int left) const &#123;</span><br><span class="line">    // 根据给定的 4 个边的宽和高，把 Rect 从上到下，从左到右分割成 9 个部分</span><br><span class="line">    int x = rect.x();</span><br><span class="line">    int y = rect.y();</span><br><span class="line">    int cw = rect.width() - left - right;</span><br><span class="line">    int ch = rect.height() - top - bottom;</span><br><span class="line"></span><br><span class="line">    QRect topLeftRect(x, y, left, top);</span><br><span class="line">    QRect topRect(x + left, y, cw, top);</span><br><span class="line">    QRect topRightRect(x + left + cw, y, right, top);</span><br><span class="line"></span><br><span class="line">    QRect leftRect(x, y + top, left, ch);</span><br><span class="line">    QRect centerRect(x + left, y + top, cw, ch);</span><br><span class="line">    QRect rightRect(x + left + cw, y + top, right, ch);</span><br><span class="line"></span><br><span class="line">    QRect bottomLeftRect(x, y + top + ch, left, bottom);</span><br><span class="line">    QRect bottomRect(x + left, y + top + ch, cw, bottom);</span><br><span class="line">    QRect bottomRightRect(x + left + cw, y + top + ch, right, bottom);</span><br><span class="line"></span><br><span class="line">    return QList&lt;QRect&gt;() &lt;&lt; topLeftRect &lt;&lt; topRect &lt;&lt; topRightRect</span><br><span class="line">                          &lt;&lt; leftRect &lt;&lt; centerRect &lt;&lt; rightRect</span><br><span class="line">                          &lt;&lt; bottomLeftRect &lt;&lt; bottomRect &lt;&lt; bottomRightRect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QPixmap PaintedBorderImageWidget::scaleImage(const QPixmap &amp;pixmap, const QSize &amp;size) const &#123;</span><br><span class="line">    // 缩放的时候忽略图片的高宽比，使用平滑缩放的效果</span><br><span class="line">    return pixmap.scaled(size, Qt::IgnoreAspectRatio, Qt::SmoothTransformation);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们这里选择的图片比较简单，边宽都是 12px，如果换成其他图片，边宽也要做出相应的修改。calculateNineRects() 根据给定的 4 个边的宽和高，把 Rect 从上到下，从左到右分割成 9 个部分，分割图片和 Widget 都会用到，prepareBorderImages() 中加载圆角按钮的背景图，并分割为 9 个子图片。drawBorderImages() 里把 Widget 的绘制区分割为 9 个区，然后把背景图里的每个部分填充到 Widget 的对应区域。因为缩放图片的操作比较多，所以提取为函数 scaleImage()。 这里使用的是 stretch 的算法，对于 repeat，round 想必对大家来说也不是问题了。</p>
<p>如果把 drawBorderImages() 里的 calculateNineRects(rect, top, right, bottom, left) 换成 calculateNineRects(rect, 24, 24, 24, 24)，也既是 Widget 的边宽大于背景的边宽，就出现了圆角模糊的情况，这也是前面我们提到的，背景图的边宽和 Widget 的边宽设置时最好一样，不能随意给几个数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 文件名: main.cpp</span><br><span class="line"></span><br><span class="line">#include &quot;PaintedBorderImageWidget.h&quot;</span><br><span class="line">#include &lt;QApplication&gt;</span><br><span class="line">#include &lt;QWidget&gt;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[]) &#123;</span><br><span class="line">    QApplication a(argc, argv);</span><br><span class="line"></span><br><span class="line">    QWidget *window = new QWidget();</span><br><span class="line">    window-&gt;setWindowTitle(&quot;Painted Border Image&quot;);</span><br><span class="line">    window-&gt;resize(340, 300);</span><br><span class="line"></span><br><span class="line">    PaintedBorderImageWidget *w1 = new PaintedBorderImageWidget(window);</span><br><span class="line">    w1-&gt;setGeometry(20, 20, 300, 50);</span><br><span class="line"></span><br><span class="line">    PaintedBorderImageWidget *w2 = new PaintedBorderImageWidget(window);</span><br><span class="line">    w2-&gt;setGeometry(20, 80, 100, 120);</span><br><span class="line"></span><br><span class="line">    PaintedBorderImageWidget *w3 = new PaintedBorderImageWidget(window);</span><br><span class="line">    w3-&gt;setGeometry(20, 210, 80, 25);</span><br><span class="line"></span><br><span class="line">    PaintedBorderImageWidget *w4 = new PaintedBorderImageWidget(window);</span><br><span class="line">    w4-&gt;setGeometry(130, 80, 190, 200);</span><br><span class="line"></span><br><span class="line">    window-&gt;show();</span><br><span class="line"></span><br><span class="line">    return a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="思考-1">思考</h2>
<ul>
<li>每次调用 paintEvent() 都要计算，把 Widget 分割成 9 个 rects，然后分块绘制，有什么缺点？</li>
<li>可不可以在 resizeEvent() 里把 Widget 分割成 9 个 rects，在 paintEvnet() 里直接使用？</li>
<li>可不可以在 resizeEvent() 里把背景绘制在一个和 Widget 一样大的 QPixmap 背景图里，调用 paintEvent() 的时候绘制这个背景图？</li>
<li>怎么把绘制背景的内容提取出来写成一个公共的类以便复用，而不是每个需要用的类都重复的实现一次。</li>
<li>Android 实现同样功能的技术称为 NinePatch，不过他们把边宽的数据使用特殊技术放在了背景图里，怎么进一步扩展我们的实现，做到和 NinePatch 一样？</li>
</ul>
<h1 id="确定背景图的边宽">确定背景图的边宽</h1>
<p>通过上面的解说，我们已经知道怎么使用 Border-Image 给 Widget 设置背景，再加上个好的美工，酷炫的界面唾手可得（即使没有美工，网上也有很多免费的酷炫界面的 PSD 文件，自己学学切图也是分分钟的事）。但是，还有一个问题，得到背景图后，怎么确定每个边的宽度是多少？如果设置不好，效果很有可能大打折扣。当然可以不停的试，然后看效果，还不满意，继续试，直到满意为止，不过，这样做工作效率低了些。</p>
<p>这里提供一个小技巧，可以用来快速地确定边宽，非常简单，说穿了一文不值：用图片编辑软件例如 Photoshop 把背景图按像素比例放大（不能用 Windows 的图片预览哦），然后就可以清晰的看到像素数据，边宽也就一目了然了。</p>
<p>例如上面的圆角按钮图片的边宽使用了 12px，为什么是 12px，而不是 8px，15px 呢？使用这里的方法，如下图所示，是不是一下就明白过来了！</p>
<!--![](./images/QSS-BorderImage-Border-Width.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/22/YVQR2i1eg7xwqjE.png" alt="QSS-BorderImage-Border-Width.png" /><figcaption aria-hidden="true">QSS-BorderImage-Border-Width.png</figcaption>
</figure>
<h1 id="padding-的设置">Padding 的设置</h1>
<p>以开头圆角按钮为例，border-width: 12px; min-height: 24px;，如果不设置 padding（即为 0px），那么按钮的最小高度为 12 + 0 + 24 + 0 + 12 为 48px（参考盒子模型一节）：</p>
<!--![](./images/QSS-BorderImage-Round-Button-Min-Height.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/22/itE1u2CWOP5cjxo.png" alt="QSS-BorderImage-Round-Button-Min-Height.png" /><figcaption aria-hidden="true">QSS-BorderImage-Round-Button-Min-Height.png</figcaption>
</figure>
<p>高 48px 的按钮，很多时候都太大了，为了减小按钮的高度，可以设置 marging 和 padding 为负值，具体理论请参考 盒子模型 一节。为了不影响 border 的绘制效果，则不能设置 margin 为负值，否则有可能要把 border 绘制到不可见区域了，剩下就是修改 padding 为负值了，这里我们用了 padding: -10px 0 -10px 0;，也可以根据情况调整为其他值。</p>
<p>使用 Border-Image 时调整 padding 是很重要的小技巧，需要根据背景图和需求来判断调整的数值。</p>
<h1 id="作业">作业</h1>
<p>使用下面的 2 个背景图实现如图的聊天界面。</p>
<figure>
<img src="https://s2.loli.net/2022/10/22/bPD6GJNa9jgsKCI.png" alt="QSS-BorderImage-Chat.png" /><figcaption aria-hidden="true">QSS-BorderImage-Chat.png</figcaption>
</figure>
<p>然后再思考一下，怎么把一张图片缩放铺满一个 Widget (提示: background-image 做不到，除非图片和 Widget 一样大)。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/18/QT/qss/border-Image/" data-id="cl9y15qfb000mcwtj7wd5cdhb" data-title="border-Image" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/qss/QSS选择器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/18/QT/qss/QSS%E9%80%89%E6%8B%A9%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2022-10-18T02:30:52.000Z" itemprop="datePublished">2022-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/18/QT/qss/QSS%E9%80%89%E6%8B%A9%E5%99%A8/">QSS选择器</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="qss-选择器">QSS 选择器</h1>
<p>选择器决定了 style sheet 作用于哪些 widget，QSS 支持 <a target="_blank" rel="noopener" href="http://www.w3.org/TR/REC-CSS2/selector.html#q1">CSS2 定义的所有选择器</a>。</p>
<h1 id="qss-的选择器有">QSS 的选择器有</h1>
<ul>
<li>通用选择器 <code>*</code></li>
<li>类型选择器</li>
<li>类选择器</li>
<li>ID 选择器</li>
<li>属性选择器</li>
<li>包含选择器</li>
<li>子元素选择器</li>
<li>伪类选择器</li>
<li>Subcontrol 选择器</li>
</ul>
<p>很多时候，可以使用不同的选择器实现相同效果的样式，使用非常灵活。</p>
<h1 id="通用选择器">通用选择器 <code>*</code></h1>
<p><code>*</code> 作为选择器，作用于所有的 widget。</p>
<h1 id="类型选择器">类型选择器</h1>
<p><code>类名</code> 作为选择器，作用于它自己和它的所有子类。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QFrame &#123;</span><br><span class="line">   background: gray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用了类型选择器 QFrame，所以 QFrame 和它的子类 QLable，QLCDNumber，QTableWidget 等的背景会是灰色的，QPushButton 不是 QFrame 的子类，所以不受影响：</p>
<!--![](./images/QSS-Selector-Type-Selector.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/KOQIeBYxvpGkPld.png" alt="QSS-Selector-Type-Selector.png" /><figcaption aria-hidden="true">QSS-Selector-Type-Selector.png</figcaption>
</figure>
<h1 id="类选择器">类选择器</h1>
<p><code>. + 类名</code> 或者 <code>. + class 的属性值</code> 作为选择器（使用 setProperty(“class”, “QSSClassName”) 设置），只会作用于它自己，它的子类不受影响，注意和类型选择器的区别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QApplication&gt;</span><br><span class="line">#include &lt;QPushButton&gt;</span><br><span class="line">#include &lt;QHBoxLayout&gt;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[]) &#123;</span><br><span class="line">    QApplication app(argc, argv);</span><br><span class="line"></span><br><span class="line">    app.setStyleSheet(&quot;QWidget &#123; background: gray; &#125;&quot;);</span><br><span class="line"></span><br><span class="line">    QWidget *window = new QWidget();</span><br><span class="line">    QPushButton *openButton  = new QPushButton(&quot;打开&quot;, window);</span><br><span class="line">    QPushButton *closeButton = new QPushButton(&quot;关闭&quot;, window);</span><br><span class="line">    QPushButton *saveButton  = new QPushButton(&quot;保存&quot;, window);</span><br><span class="line"></span><br><span class="line">    QHBoxLayout *layout = new QHBoxLayout(window);</span><br><span class="line">    layout-&gt;addWidget(openButton);</span><br><span class="line">    layout-&gt;addWidget(closeButton);</span><br><span class="line">    layout-&gt;addWidget(saveButton);</span><br><span class="line">    window-&gt;setLayout(layout);</span><br><span class="line">    window-&gt;show();</span><br><span class="line"></span><br><span class="line">    return app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>window, openButton, closeButton 和 saveButton 的背景都变成灰色的了，如果只想要 window 的背景是灰色的，按钮的背景不变，可以使用类选择器 <code>.QWidget</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* 把 QWidget 改成 .QWidget */</span><br><span class="line">app.setStyleSheet(&quot;.QWidget &#123;background: gray;&#125;&quot;)</span><br></pre></td></tr></table></figure>
<p>如果 openButton 和 closeButton 的背景是洋红色的，但是 saveButton 不受影响，则可以使用 . ＋ class 的属性值 作为类选择器来设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.setStyleSheet(&quot;.QWidget &#123; background: gray; &#125;&quot;</span><br><span class="line">                  &quot;.RedButton &#123; background: magenta; &#125;&quot;);</span><br><span class="line"></span><br><span class="line">// .RedButton 将作为类选择器</span><br><span class="line">openButton-&gt;setProperty(&quot;class&quot;,  &quot;RedButton&quot;);</span><br><span class="line">closeButton-&gt;setProperty(&quot;class&quot;, &quot;RedButton&quot;);</span><br></pre></td></tr></table></figure>
<!--![](./images/QSS-Selector-Class-Selector.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/VJiyubrRFaXmfL2.png" alt="QSS-Selector-Class-Selector.png" /><figcaption aria-hidden="true">QSS-Selector-Class-Selector.png</figcaption>
</figure>
<h1 id="id-选择器">ID 选择器</h1>
<p><code># + objectName</code> 作为选择器，只作用于用此 objectName 的对象（多个对象可以使用同一个 objectName，但是不推荐这么做，既然是 ID，那么语义上就表示唯一了）。如上面的程序， openButton 和 closeButton 的背景是洋红色的，但是 saveButton 不受影响，也可以使用 <code>ID 选择器</code> 来实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// #openButton 和 #closeButton 作为 ID 选择器</span><br><span class="line">app.setStyleSheet(&quot;.QWidget &#123; background: gray; &#125;&quot;</span><br><span class="line">                  &quot;#openButton, #closeButton &#123; background: magenta; &#125;&quot;);</span><br><span class="line"></span><br><span class="line">openButton-&gt;setObjectName(&quot;openButton&quot;);</span><br><span class="line">closeButton-&gt;setObjectName(&quot;closeButton&quot;);</span><br></pre></td></tr></table></figure>
<h1 id="属性选择器">属性选择器</h1>
<p><code>选择器[属性="值"]</code> 作为选择器，这个属性可用通过 <code>object-&gt;property(propertyName)</code> 访问的，Qt 里称为 <code>Dynamic Properties</code>。</p>
<p>如上面的程序， openButton 和 closeButton 的背景是洋红色的，但是 saveButton 不受影响，也可以使用属性选择器来实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.setStyleSheet(&quot;.QWidget &#123; background: gray; &#125;&quot;</span><br><span class="line">                  &quot;QPushButton[level=&#x27;dangerous&#x27;] &#123; background: magenta; &#125;&quot;);</span><br><span class="line"></span><br><span class="line">openButton-&gt;setProperty(&quot;level&quot;,  &quot;dangerous&quot;);</span><br><span class="line">closeButton-&gt;setProperty(&quot;level&quot;, &quot;dangerous&quot;);</span><br></pre></td></tr></table></figure>
<p>QSS 会把所有 QPushButton 中属性 level 值为 dangerous 按钮的背景绘制为洋红色，其他按钮的背景色不受这个 QSS 影响。</p>
<blockquote>
<p>注意: 程序运行时属性值变化后 QSS 不会自动生效， 需要调用 <code>widget-&gt;setStyleSheet("/**/")</code> 或者 <code>widget-&gt;style()-&gt;polish(widget)</code> 强制刷新 QSS 才行。</p>
</blockquote>
<p>属性的值可以用单引号、双引号括起来，如果值没有空格甚至可以不用引号 (不推荐这么做)，以下三种写法都是有效的:</p>
<ul>
<li><code>.QPushButton[level="dangerous"]</code></li>
<li><code>.QPushButton[level='dangerous']</code></li>
<li><code>.QPushButton[level=dangerous]</code></li>
</ul>
<h1 id="包含选择器">包含选择器</h1>
<p>英语叫做 <code>Descendant Selector</code>，descendant 的表达比较到位。</p>
<p><code>选择器之间用空格隔开</code>，作用于 Widget 的 <code>子Widget</code>，<code>子Widget 的 子Widget</code>，……，子子孙孙，无穷尽也。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">QFrame &#123;</span><br><span class="line">	background: gray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 设置 QFrame 中的 QPushButton 的 QSS */</span><br><span class="line">QFrame QPushButton &#123;</span><br><span class="line">    border: 2px solid magenta;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    background: white;</span><br><span class="line">    padding: 2px 15px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>顶部的 QPushButton 是 QFrame 的 descendant，所以 QSS 生效了，左下角的 QPushButton 的 parent 是 QWidget，所以 QSS 不起作用:</p>
<!--![](./images/QSS-Selector-Descendant-Selector.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/FwsZkSWB5g9vq7A.png" alt="QSS-Selector-Descendant-Selector.png" /><figcaption aria-hidden="true">QSS-Selector-Descendant-Selector.png</figcaption>
</figure>
<h1 id="子元素选择器">子元素选择器</h1>
<p><code>选择器之间用 &gt; 隔开</code>，作用于 Widget 的直接 <code>子Widget</code>，注意和包含选择器的区别。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QFrame &#123;</span><br><span class="line">	background: gray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QFrame &gt; QPushButton &#123;</span><br><span class="line">    border: 2px solid magenta;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    background: white;</span><br><span class="line">    padding: 2px 15px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>按钮 <code>Child of QGroupBox</code> 的 parent 是 QGroupBox，QGroupBox 的 parent 是 QFrame，所以 <code>Child of QGroupBox</code> 虽然是 QFrame 的 <code>子Widget</code> 的 <code>子Widget</code>，但不是 QFrame 的直接 <code>子Widget</code>，故 QSS 不起作用，而 按钮 <code>Child of QFrame</code> 的 parent 是 <code>QFrame</code>，所以它的样式改变了:</p>
<!--![](./images/QSS-Selector-Child-Selector.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/wU9cqutODTVnpxh.png" alt="QSS-Selector-Child-Selector.png" /><figcaption aria-hidden="true">QSS-Selector-Child-Selector.png</figcaption>
</figure>
<h1 id="伪类选择器">伪类选择器</h1>
<p><code>选择器:状态</code> 作为选择器，支持 <code>!</code>操作符，表示<code>非</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QPushButton:hover &#123; color: white &#125;</span><br><span class="line">QCheckBox:checked &#123; color: white &#125;</span><br><span class="line">QCheckBox:!checked &#123; color: red &#125;</span><br></pre></td></tr></table></figure>
<p>鼠标放到 QPushButton 上时，它的文字为白色，QCheckBox 选中时文字为白色，未选中时为红色。</p>
<p>伪类选择器还支持链式规则：<code>选择器:状态1:状态2:状态3</code>，状态之间使用逻辑与，同时满足条件样式才生效 ​</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox:hover:checked &#123; color: white &#125;</span><br></pre></td></tr></table></figure>
<p>鼠标 <code>放到</code> <code>选中的</code> QCheckBox 上时，它的字体为白色。</p>
<p><strong>常用伪类选择器有：</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">伪类</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">:disabled</td>
<td style="text-align: left;">Widget 被禁用时</td>
</tr>
<tr class="even">
<td style="text-align: left;">:enabled</td>
<td style="text-align: left;">Widget 可使用时</td>
</tr>
<tr class="odd">
<td style="text-align: left;">:focus</td>
<td style="text-align: left;">Widget 得到输入焦点</td>
</tr>
<tr class="even">
<td style="text-align: left;">:hover</td>
<td style="text-align: left;">鼠标放到 Widget 上</td>
</tr>
<tr class="odd">
<td style="text-align: left;">:pressed</td>
<td style="text-align: left;">鼠标按下时</td>
</tr>
<tr class="even">
<td style="text-align: left;">:checked</td>
<td style="text-align: left;">被选中时</td>
</tr>
<tr class="odd">
<td style="text-align: left;">:unchecked</td>
<td style="text-align: left;">未选中时</td>
</tr>
<tr class="even">
<td style="text-align: left;">:has-children</td>
<td style="text-align: left;">Item 有子 item，例如 QTreeView 的 item 有子 item 时</td>
</tr>
<tr class="odd">
<td style="text-align: left;">:has-siblings</td>
<td style="text-align: left;">Item 有 兄弟，例如 QTreeView 的 item 有兄弟 item 时</td>
</tr>
<tr class="even">
<td style="text-align: left;">:open</td>
<td style="text-align: left;">打开或展开状态，例如 QTreeView 的 item 展开，QPushButton 的菜单弹出时</td>
</tr>
<tr class="odd">
<td style="text-align: left;">:closed</td>
<td style="text-align: left;">关闭或者非展开状态</td>
</tr>
<tr class="even">
<td style="text-align: left;">:on</td>
<td style="text-align: left;">Widget 状态是可切换的（toggle）, 在 on 状态</td>
</tr>
<tr class="odd">
<td style="text-align: left;">:off</td>
<td style="text-align: left;">Widget 状态是可切换的（toggle）, 在 off 状态</td>
</tr>
</tbody>
</table>
<p>伪类的说明写成中文怎么感觉都很别扭，惭愧，表达能力欠佳，在此仅作为抛砖引玉吧，更多更详细的内容请参考 Qt 的帮助文档，搜索 <code>Qt Style Sheets Reference</code>，查看最下面的 <code>List of Pseudo-States</code>。</p>
<p>当然，这些伪类并不是对任何 widget 都起作用，例如 QLabel 没有 :checked 状态，即使设置了样式 QLabel:checked {color: red}，对 QLabel 也是没有效果的，只有 widget 支持某个状态，那么对应的伪类的样式才有作用。</p>
<h1 id="subcontrol-选择器">Subcontrol 选择器</h1>
<p><code>选择器::subcontrol</code> 作为选择 Subcontrol 的选择器。</p>
<p>有些 widget 是由多个部分组合成的，例如 QCheckBox 由 icon(indicator) 和 text 组成，可以使用 <code>选择器::subcontrol</code> 来设置 subcontrol 的样式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox::indicator &#123;</span><br><span class="line">    width: 20px;</span><br><span class="line">    height: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QCheckBox &#123;</span><br><span class="line">    spacing: 8px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!--![](./images/QSS-Selector-Subcontrol-Selector.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/zXAVTEiOFxSbYLs.png" alt="QSS-Selector-Subcontrol-Selector.png" /><figcaption aria-hidden="true">QSS-Selector-Subcontrol-Selector.png</figcaption>
</figure>
<h2 id="常用的-subcontrol-有">常用的 Subcontrol 有:</h2>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Subcontrol</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">::indicator</td>
<td style="text-align: left;">A QCheckBox, QRadioButton, checkable QMenu item, <br>or a checkable QGroupBox’s indicator</td>
</tr>
<tr class="even">
<td style="text-align: left;">::menu-indicator</td>
<td style="text-align: left;">A QPushButton’s menu indicator</td>
</tr>
<tr class="odd">
<td style="text-align: left;">::item</td>
<td style="text-align: left;">A QMenu, QMenuBar, or QStatusBar’s item</td>
</tr>
<tr class="even">
<td style="text-align: left;">::up-button</td>
<td style="text-align: left;">A QSpinBox or QScrollBar’s up button</td>
</tr>
<tr class="odd">
<td style="text-align: left;">::down-button</td>
<td style="text-align: left;">A QSpinBox or QScrollBar’s down button</td>
</tr>
<tr class="even">
<td style="text-align: left;">::up-arrow</td>
<td style="text-align: left;">A QSpinBox, QScrollBar, or QHeaderView’s up arrow</td>
</tr>
<tr class="odd">
<td style="text-align: left;">::down-arrow</td>
<td style="text-align: left;">A QSpinBox, QScrollBar, or QHeaderView’s down arrow</td>
</tr>
<tr class="even">
<td style="text-align: left;">::drop-down</td>
<td style="text-align: left;">A QComboBox’s drop-down arrow</td>
</tr>
<tr class="odd">
<td style="text-align: left;">::title</td>
<td style="text-align: left;">A QGroupBox or QDockWidget’s title</td>
</tr>
<tr class="even">
<td style="text-align: left;">::groove</td>
<td style="text-align: left;">A QSlider’s groove</td>
</tr>
<tr class="odd">
<td style="text-align: left;">::chunk</td>
<td style="text-align: left;">A QProgressBar’s progress chunk</td>
</tr>
<tr class="even">
<td style="text-align: left;">::branch</td>
<td style="text-align: left;">A QTreeView’s branch indicator</td>
</tr>
</tbody>
</table>
<p>Subcontrol 选择器的应用比较复杂，所以专门开辟了 <a href="">QSS Subcontrol</a> 一章来介绍。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/18/QT/qss/QSS%E9%80%89%E6%8B%A9%E5%99%A8/" data-id="cl9y15qfa000hcwtj5stsa299" data-title="QSS选择器" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/qss/盒子模型" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/18/QT/qss/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/" class="article-date">
  <time class="dt-published" datetime="2022-10-18T02:30:42.000Z" itemprop="datePublished">2022-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/18/QT/qss/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/">盒子模型</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="盒子模型">盒子模型</h1>
<p>每个 Widget 所在的范围都是一个矩形区域（无规则窗口也是一个矩形，只是有的地方是透明的，看上去不是一个矩形），像是一个盒子一样。QSS 支持盒子模型（Box Model），和 CSS 的盒子模型是一样的，由 4 个部分组成：content, padding, border, margin，也就是说，Widget 的矩形区域，用这 4 个矩形表示</p>
<!--![](./images/QSS-BoxModel-1.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/eNAicRsqBOmjGVv.png" alt="QSS-BoxModel-1.png" /><figcaption aria-hidden="true">QSS-BoxModel-1.png</figcaption>
</figure>
<ul>
<li><code>content</code>: 绘制内容的矩形区域（如绘制文本、图片），Qt 自带的 widget 都是在 content 区里绘制内容，这只是一个约定，只要你愿意，也可以在绘制到 padding, border, margin 区</li>
<li><code>padding</code>: 内容区和边框之间的间隔</li>
<li><code>border</code>: 边框，可视化的显示一个 widget 的逻辑范围，而不一定是 widget 所占矩形区域的实际大小</li>
<li><code>margin</code>: 想像 widget 的矩形区域有一个隐形的边框，margin 就是 border 和这个隐形边框之间的间隔</li>
</ul>
<p>QWidget 的 content, padding, border, margin 的矩形区域都是一样大的，也就是说，margin, border, padding 的值为 0，content 的矩形和 QWidget 的矩形一样大，但是 QPushButton 默认的 margin, border, padding 的值不为 0（可以试试 <code>setFlat(true)</code> 后再看看这几个值是什么）。</p>
<p>Margin，Border，Padding 都分为 4 个部分：上、右、下、左，它们的值可以不同：</p>
<!--![](./images/QSS-BoxModel-2.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/roHCkj7RL9J3Pgu.png" alt="QSS-BoxModel-2.png" /><figcaption aria-hidden="true">QSS-BoxModel-2.png</figcaption>
</figure>
<h1 id="padding-的语法">padding 的语法</h1>
<p><code>padding: 2px 3px 4px 5px</code>，表示:</p>
<ul>
<li>padding-top 为 2px</li>
<li>padding-right 为 3px</li>
<li>padding-bottom 为 4px</li>
<li>padding-left 为 5px</li>
</ul>
<p><code>padding: 2px 4px</code> 表示:</p>
<ul>
<li>padding-top 和 padding-bottom 为 2px</li>
<li>padding-right 和 padding-left 为 4px</li>
</ul>
<p><code>padding: 2px</code> 表示:</p>
<ul>
<li>padding-top、padding-right、padding-bottom、padding-left 都为 2px</li>
</ul>
<p>margin 的语法和 padding 的一样，border 除了分成 4 个部分外，还有颜色，圆角等。</p>
<p>也许你也有和我一样的疑问，为什么上面表示的顺序不是从左开始，而是从上开始？对我来说，从左开始更习惯一些，但是 CSS 和 QSS 里就是这么规定的，没办法，既然不能反抗，那么就享受吧！</p>
<h1 id="padding-是什么">padding 是什么</h1>
<p>可能你还是不明白 margin, padding 具体是什么，下面用例子具体的的介绍它们。在 Qt Designer 里用 QGridLayout 布局，拖放一个 QLabel 到窗口上，让其占据整个窗口，用下面的 QSS 把 QLabel 的 margin, border, padding 都设置为 50px：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QLabel &#123;</span><br><span class="line">    margin: 50px;</span><br><span class="line">    border: 50px solid rgb(74, 74, 74);</span><br><span class="line">    padding: 50px;</span><br><span class="line">    background: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!--![](./images/QSS-BoxModel-0.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/yctb1sZ2JRodrUA.png" alt="QSS-BoxModel-0.png" /><figcaption aria-hidden="true">QSS-BoxModel-0.png</figcaption>
</figure>
<h2 id="在-qt-designer-里选中-qlabel">在 Qt Designer 里选中 QLabel:</h2>
<ul>
<li>8 个蓝色小方块内就是 QLabel，外面是 parent widget 的，不属于 QLabel</li>
<li>标记为 margin 的部分是 margin，为 50px</li>
<li>标记为 padding 的部分是 padding，为 50px</li>
<li>用工具测量一下，得到 border 的宽也是 50px</li>
<li>小虚线方框内是 content rectangle，QLabel 就是在它里面绘制文本，图片等，不会绘制到 padding, border, margin 等上面（如果你自己想继承 QLabel 然后绘制到它们上面当然没问题）</li>
<li>当拖动修改窗口的大小后，QLabel 的大小随着改变了，但是 margin, border（宽）, padding 的大小都不会变，变化的只有 content rectangle</li>
<li>Margin 是不可见的，不绘制任何东西</li>
<li>Padding 是不可见的，但是 QLabel 的背景会绘制到它里面</li>
<li>Border 是可见的，在背景上面绘制 border（如果 border 是半透明的时候可以看到和背景的融合效果），也就是说，背景会绘制到 padding, border, content 3 个部分上</li>
<li>Content 是可见的，在背景上绘制 QLabel 的内容：文本，图片</li>
</ul>
<h1 id="计算-border-和-content-的矩形">计算 border 和 content 的矩形</h1>
<p>Padding 和 margin 都是不可见的，用它们来控制间隔，让绘制的效果更好，只有 border 和 content 是可见的。Border 和 content 要绘制在它们自己的矩形区域内，那么这些矩形怎么计算呢？Content 的矩形一定要在 border 的矩形内吗？</p>
<p>##设定:</p>
<ul>
<li>Widget 的矩形为 widgetRect，其实就是 (0, 0, width, height)</li>
<li>Border 的矩形为 borderRect</li>
<li>Content 的矩形为 contentRect</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 计算 border 的矩形</span><br><span class="line">borderRect.x = marginLeft</span><br><span class="line">borderRect.y = marginTop</span><br><span class="line">borderRect.width  = widgetRect.width  - marginLeft - marginRight</span><br><span class="line">borderRect.height = widgetRect.height - marginTop  - marginBottom</span><br><span class="line"></span><br><span class="line">// 计算 content 的矩形</span><br><span class="line">contentRect.x = marginLeft + borderLeft + paddingLeft</span><br><span class="line">contentRect.y = marginTop  + borderTop  + paddingTop</span><br><span class="line">contentRect.width  = widgetRect.width -</span><br><span class="line">    marginLeft     - borderLeft   - paddingLeft -</span><br><span class="line">    paddingRight   - borderRight  - marginRight;</span><br><span class="line">contentRect.height = widgetRect.height -</span><br><span class="line">    marginTop      - borderTop    - paddingTop -</span><br><span class="line">    paddingBottom  - borderBottom - marginBottom;</span><br></pre></td></tr></table></figure>
<h2 id="为了简单起见下面的-margin-指的是它对应的-4-个值而且都一样大padding-也一样">为了简单起见，下面的 margin 指的是它对应的 4 个值，而且都一样大，padding 也一样:</h2>
<ul>
<li>Margin 大于 0 时，borderRect 在 widgetRect 内</li>
<li>Margin 小于 0 时，borderRect 包含 widgetRect</li>
<li>Padding 大于 0 时，contentRect 在 borderRect 内</li>
<li>Padding 小于 0 时，contentRect 和 borderRect 中绘制 border 的区域相交，甚至包含 borderRect</li>
</ul>
<p>Qt 绘制自带的 Widget 时，先绘制 border，然后才绘制 content 的内容，所以，padding 小于 0 时，可以看到 content 绘制到了 border 上，在 Border-Image 一节里，就会使用这个特点，使得实现的效果更好。</p>
<h2 id="需要注意的是">需要注意的是:</h2>
<ul>
<li>QWidget::contentsRect() 和上面的 contentRect 一样</li>
<li>QWidget::contentsMargins() 不是 margin，而是 margin + border + padding 的和: content 离边框的距离</li>
<li>QWidget::size() 返回的是 margin + border + padding + content 的和</li>
<li>需要注意一点: QSS 中设置的 width, height, min-width, max-height 等设置的都是 content width 和 content height，而 QWidget::size() 返回的却是整个 QWidget 的大小</li>
</ul>
<h1 id="可视化盒子模型">可视化盒子模型</h1>
<p>下面的程序，可以直观地验证盒子模型的理论，有助于加深理解，界面虽然俗气了点，但效果却是不凡，正所谓：大俗即大雅。顶级窗口的 content margin 和 spacing 设置为 0，有 4 个 QLabel，它们只有 border 的颜色不一样，还有一个 QPushButton，按下 QPushButton 时输出左上角 flagLabel 的 size(), contentsRect() 和 contentsMargins()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MainWidget::MainWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent), ui(new Ui::MainWidget) &#123;</span><br><span class="line">    ui-&gt;setupUi(this);</span><br><span class="line"></span><br><span class="line">    // 为了简化代码，使用了 C++11 才支持的 Lambda 语法的信号槽连接</span><br><span class="line">    connect(ui-&gt;dumpButton, &amp;QPushButton::clicked, [this]() &#123;</span><br><span class="line">        qDebug() &lt;&lt; &quot;Label size: &quot; &lt;&lt; ui-&gt;flagLabel-&gt;size();</span><br><span class="line">        qDebug() &lt;&lt; &quot;Contents rect: &quot; &lt;&lt; ui-&gt;flagLabel-&gt;contentsRect();</span><br><span class="line">        qDebug() &lt;&lt; &quot;Contents margins: &quot; &lt;&lt; ui-&gt;flagLabel-&gt;contentsMargins();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">QLabel &#123;</span><br><span class="line">    margin: 0px;</span><br><span class="line">    padding: 0px;</span><br><span class="line">    border-width: 30px;</span><br><span class="line">    border-style: solid;</span><br><span class="line">    background: white;</span><br><span class="line">    min-width: 140px;  /* 设置 content rect 的最小 width，不是 widget 的 width() */</span><br><span class="line">    min-height: 140px; /* 设置 content rect 的最小 heightd，不是 widget 的 height()*/</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#flagLabel &#123;</span><br><span class="line">    border-color: qlineargradient(</span><br><span class="line">    spread:pad, x1:0,</span><br><span class="line">    y1:0, x2:0, y2:1,</span><br><span class="line">    stop:0 rgba(0, 0, 0, 255),</span><br><span class="line">    stop:0.33 rgba(0, 0, 0, 255),</span><br><span class="line">    stop:0.34 rgba(255, 30, 30, 255),</span><br><span class="line">    stop:0.66 rgba(255, 0, 0, 255),</span><br><span class="line">    stop:0.67 rgba(255, 255, 0, 255),</span><br><span class="line">    stop:1 rgba(255, 255, 0, 255));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#greenLabel &#123;</span><br><span class="line">    border-color: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#blueLabel &#123;</span><br><span class="line">    border-color: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#yellowLabel &#123;</span><br><span class="line">    border-color: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr />
<p>初始 QSS 如上，效果为:</p>
<!--![](./images/QSS-BoxModel-3.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/61L8xA7lC3eSnaO.png" alt="QSS-BoxModel-3.png" /><figcaption aria-hidden="true">QSS-BoxModel-3.png</figcaption>
</figure>
<blockquote>
<p>点击 <code>Dump</code> 按钮，输出: Label size: QSize(200, 200) Contents rect: QRect(30,30 140x140) Contents margins: QMargins(30, 30, 30, 30)</p>
</blockquote>
<p><strong>由于 margin 为 0px，padding 为 0px，border-width 为 30px, 所以:</strong></p>
<ul>
<li><strong>label width</strong>：0 + 30 + 0 + 140 + 0 + 30 + 0，为 200</li>
<li><strong>label height</strong>：0 + 30 + 0 + 140 + 0 + 30 + 0，为 200</li>
<li><strong>content rect 的 x</strong>: 0 + 30 + 0，为 30</li>
<li><strong>content rect 的 y</strong>: 0 + 30 + 0，为 30</li>
<li><strong>content margin：0 + 30</strong>，为 30</li>
</ul>
<hr />
<p>修改 margin: 20px; padding: 0px;，效果为:</p>
<!--![](./images/QSS-BoxModel-4.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/yfu6U4DSARcW3aP.png" alt="QSS-BoxModel-4.png" /><figcaption aria-hidden="true">QSS-BoxModel-4.png</figcaption>
</figure>
<blockquote>
<p>点击 <code>Dump</code> 按钮，输出: Label size: QSize(240, 240) Contents rect: QRect(50,50 140x140) Contents margins: QMargins(50, 50, 50, 50)</p>
</blockquote>
<p><strong>由于 margin 为 20px，padding 为 0px，所以</strong></p>
<ul>
<li><strong>label width</strong>：20 + 30 + 0 + 140 + 0 + 30 + 20，为 240</li>
<li><strong>label height</strong>：20 + 30 + 0 + 140 + 0 + 30 + 20，为 240</li>
<li><strong>content rect 的 x</strong>: 20 + 30 + 0，为 50</li>
<li><strong>content rect 的 y</strong>: 20 + 30 + 0，为 50</li>
<li><strong>content margin</strong>：20 + 30 + 0，为 50</li>
</ul>
<p>左上角 QLabel 的大小为红框括起来的范围，而不是可见的 border 括起来的范围，因为 margin 为 20px。</p>
<hr />
<p>修改 margin: 0px; padding: -20px;，效果为:</p>
<!--![](./images/QSS-BoxModel-5.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/dXpCy3x9GtBzcf2.png" alt="QSS-BoxModel-5.png" /><figcaption aria-hidden="true">QSS-BoxModel-5.png</figcaption>
</figure>
<blockquote>
<p>点击 <code>Dump</code> 按钮，输出: Label size: QSize(160, 160) Contents rect: QRect(10,10 140x140) Contents margins: QMargins(10, 10, 10, 10)</p>
</blockquote>
<p><strong>由于 margin 为 0px，padding 为 -20px，所以:</strong></p>
<ul>
<li><strong>label width</strong>：0 + 30 + -20 + 140 + -20 + 30 + 0，为 160</li>
<li><strong>label height</strong>：0 + 30 + -20 + 140 + -20 + 30 + 0，为 160</li>
<li><strong>content rect</strong> 的 x: 0 + 30 + -20，为 10</li>
<li><strong>content rect</strong> 的 y: 0 + 30 + -20，为 10</li>
<li><strong>content margin</strong>：0 + 30 + -20，为 10</li>
</ul>
<p>contentRect 和 borderRect 中绘制 border 的区域相交，所以 QLabel 的文本 Flag 被绘制到了 border 上面。</p>
<hr />
<p>修改 margin: -10px; padding: -20px;，效果为：</p>
<!--![](./images/QSS-BoxModel-6.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/2WSmEV1yAOeRCq9.png" alt="QSS-BoxModel-6.png" /><figcaption aria-hidden="true">QSS-BoxModel-6.png</figcaption>
</figure>
<blockquote>
<p>点击 <code>Dump</code> 按钮，输出: Label size: QSize(140, 140) Contents rect: QRect(0,0 140x140) Contents margins: QMargins(0, 0, 0, 0)</p>
</blockquote>
<p><strong>由于 margin 为 -10px，padding 为 -20px，所以</strong></p>
<ul>
<li><strong>label width</strong>：-10 + 30 + -20 + 140 + -20 + 30 + -10，为 140</li>
<li><strong>label height</strong>：-10 + 30 + -20 + 140 + -20 + 30 + -10，为 140</li>
<li><strong>content rect 的 x</strong>: -10 + 30 + -20，为 0</li>
<li><strong>content rect 的 y</strong>: -10 + 30 + -20，为 0</li>
<li><strong>content margin</strong>：-10 + 30 + -20，为 0</li>
</ul>
<p>因为 margin 为 -10px，border-width 为 30px，所以上边的 border 应该从 (-10, -10) 开始绘制，有三分之一给绘制到了 QLabel 的不可见区域，所以从图中看不到，这里我们使用了一个三色的 border，能直观的看到 border 的变化。</p>
<hr />
<p>QSS 里盒子模型是很关键的，相信大家现在已经明白了，但是，古人云：纸上得来终觉浅，绝知此事要躬行，请自己尝试修改不同的 margin, border, padding, min-width, min-height 等，计算、对比输出的结果，这样才会有更深刻的体会。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/18/QT/qss/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B/" data-id="cl9y15qfd000ucwtj5sky1q3t" data-title="盒子模型" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/qss/加载QSS" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/18/QT/qss/%E5%8A%A0%E8%BD%BDQSS/" class="article-date">
  <time class="dt-published" datetime="2022-10-18T02:30:23.000Z" itemprop="datePublished">2022-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/18/QT/qss/%E5%8A%A0%E8%BD%BDQSS/">加载QSS</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="加载-qss">加载 QSS</h1>
<p>前一章节我们已经知道怎么写简单的 QSS 了，但是，应该把它们放在什么地方才能生效呢？</p>
<h1 id="加载-qss-有三种方式">加载 QSS 有三种方式:</h1>
<ul>
<li>1 Widget 的对象调用 setStyleSheet(qss) 函数加载 QSS，QSS 的作用域是 widget 自己和它的所有子 widget</li>
<li>2 QApplication 的对象 setStyleSheet(qss) 函数加载 QSS，QSS 的作用域是整个程序里的所有 widget</li>
<li>3 在 Qt Designer 的 Change styleSheet... 打开的 QSS 编辑器中添加 QSS，在哪个 widget 上添加的，QSS 的作用域是那个 widget 自己和它的所有子 widget，其实和 1 是一样的，只不这里过是在 Qt Designer 里添加，不是我们自己手动写 C++ 代码添加而已。打开 ui 文件生成的代码(ui_xxxx.h)，可以看到里面也是自动生成代码调用 setStyleSheet(qss) 添加 QSS 的，和我们写代码添加没有区别，只是在 Qt Designer 里添加的话，有时候方便一些，也可以实时看到 QSS 的效果</li>
</ul>
<h1 id="widget-加载-qss">Widget 加载 QSS</h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QApplication&gt;</span><br><span class="line">#include &lt;QVBoxLayout&gt;</span><br><span class="line">#include &lt;QWidget&gt;</span><br><span class="line">#include &lt;QFrame&gt;</span><br><span class="line">#include &lt;QPushButton&gt;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[]) &#123;</span><br><span class="line">    QApplication app(argc, argv);</span><br><span class="line"></span><br><span class="line">    // 顶部的 topFrame，里面放了 topButton</span><br><span class="line">    QFrame *topFrame = new QFrame();</span><br><span class="line">    topFrame-&gt;setFrameShape(QFrame::StyledPanel);</span><br><span class="line">    topFrame-&gt;setFrameShadow(QFrame::Raised);</span><br><span class="line">    QPushButton *topButton = new QPushButton(&quot;Top Button&quot;);</span><br><span class="line">    QVBoxLayout *topLayout = new QVBoxLayout();</span><br><span class="line">    topLayout-&gt;addWidget(topButton);</span><br><span class="line">    topFrame-&gt;setLayout(topLayout);</span><br><span class="line"></span><br><span class="line">    // 中部的 bottomFrame，里面放了 middleButton</span><br><span class="line">    QFrame *middleFrame = new QFrame();</span><br><span class="line">    middleFrame-&gt;setFrameShape(QFrame::StyledPanel);</span><br><span class="line">    middleFrame-&gt;setFrameShadow(QFrame::Raised);</span><br><span class="line">    QPushButton *middleButton = new QPushButton(&quot;Middle Button&quot;);</span><br><span class="line">    QVBoxLayout *middleLayout = new QVBoxLayout();</span><br><span class="line">    middleLayout-&gt;addWidget(middleButton);</span><br><span class="line">    middleFrame-&gt;setLayout(middleLayout);</span><br><span class="line"></span><br><span class="line">    // 底部的 bottomButton</span><br><span class="line">    QPushButton *bottomButton = new QPushButton(&quot;Bottom Button&quot;);</span><br><span class="line"></span><br><span class="line">    // 程序的主窗口 mainWidget</span><br><span class="line">    QWidget *mainWidget = new QWidget();</span><br><span class="line">    QVBoxLayout *mainLayout = new QVBoxLayout();</span><br><span class="line">    mainWidget-&gt;setWindowTitle(&quot;加载 QSS&quot;);</span><br><span class="line">    mainLayout-&gt;addWidget(topFrame);</span><br><span class="line">    mainLayout-&gt;addWidget(middleFrame);</span><br><span class="line">    mainLayout-&gt;addWidget(bottomButton);</span><br><span class="line">    mainWidget-&gt;setLayout(mainLayout);</span><br><span class="line"></span><br><span class="line">    mainWidget-&gt;show();</span><br><span class="line"></span><br><span class="line">    // QSS 样式</span><br><span class="line">    QString qss = &quot;QFrame &#123;&quot;</span><br><span class="line">                  &quot;    background: #AAA;&quot;</span><br><span class="line">                  &quot;    border: 2px dashed gray;&quot;</span><br><span class="line">                  &quot;&#125;&quot;</span><br><span class="line">                  &quot;QPushButton &#123;&quot;</span><br><span class="line">                  &quot;    font-size: 20px;&quot;</span><br><span class="line">                  &quot;    padding: 5px 20px;&quot;</span><br><span class="line">                  &quot;    color: black;&quot;</span><br><span class="line">                  &quot;    border: 4px solid gray;&quot;</span><br><span class="line">                  &quot;    background-color: rgb(230, 250, 250);&quot;</span><br><span class="line">                  &quot;&#125;&quot;;</span><br><span class="line"></span><br><span class="line">    // 加载 QSS</span><br><span class="line">    topFrame-&gt;setStyleSheet(qss);</span><br><span class="line"></span><br><span class="line">    return app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用 topFrame-&gt;setStyleSheet(qss)，QSS 的作用域是 topFrame 和它的的子 widget topButton, 而 middleFrame，middleButton 和 bottomButton 不受影响，效果如图：</p>
<!--![](./images/QSS-Load-Widget.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/RNwDJ6ZqQgjFT8P.png" alt="QSS-Load-Widget.png" /><figcaption aria-hidden="true">QSS-Load-Widget.png</figcaption>
</figure>
<blockquote>
<p>注：topFrame-&gt;setStyleSheet("border: 3px solid gray") 这里的 QSS 没有选择器，则 topFrame 和它的所有子 widget 都会使用 QSS border: 3px solid gray 设置 border。</p>
</blockquote>
<h1 id="qapplication-加载-qss">QApplication 加载 QSS</h1>
<p>把上面程序中的 topFrame-&gt;setStyleSheet(qss) 换成 app.setStyleSheet(qss)，则 QSS 的作用域是整个程序，所有 QFrame 和 QPushButton 都会受到影响，效果如图，所有的 QFrame 和 QPushButton 的样式改变了：</p>
<!--![](./images/QSS-Load-Application.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/1FNuaSiMRObyBPU.png" alt="QSS-Load-Application.png" /><figcaption aria-hidden="true">QSS-Load-Application.png</figcaption>
</figure>
<h1 id="qt-designer-里写-qss">Qt Designer 里写 QSS</h1>
<h2 id="在-qwidget-里按上面的程序放置-2-个-qframe-和-3-个-qpushbutton">1 在 QWidget 里按上面的程序放置 2 个 QFrame 和 3 个 QPushButton</h2>
<!--![](./images/QSS-Load-Designer-1.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/9Lr1gkZdxNpu7El.png" alt="QSS-Load-Designer-1.png" /><figcaption aria-hidden="true">QSS-Load-Designer-1.png</figcaption>
</figure>
<h2 id="在最外层的-qwidget-上单击右键然后点击-change-stylesheet...">2 在最外层的 QWidget 上单击右键，然后点击 <code>Change styleSheet...</code></h2>
<!--![](./images/QSS-Load-Designer-2.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/7j4lBFXOwMQnmhr.png" alt="QSS-Load-Designer-2.png" /><figcaption aria-hidden="true">QSS-Load-Designer-2.png</figcaption>
</figure>
<h2 id="在弹出的窗口里添加上面的-qss然后点击-apply-按钮可以看到-qss-生效了">3 在弹出的窗口里添加上面的 QSS，然后点击 Apply 按钮，可以看到 QSS 生效了：</h2>
<!--![](./images/QSS-Load-Designer-3.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/wGtEpOP1JIAoqKf.png" alt="QSS-Load-Designer-3.png" /><figcaption aria-hidden="true">QSS-Load-Designer-3.png</figcaption>
</figure>
<!--![](./images/QSS-Load-Designer-4.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/jYBOAtbLGxvdc1Z.png" alt="QSS-Load-Designer-4.png" /><figcaption aria-hidden="true">QSS-Load-Designer-4.png</figcaption>
</figure>
<h2 id="如果在-topframe-上单击右键然后点击-change-stylesheet...添加-qss那么-qss-的作用域为-topframe-和它的子-widget">4 如果在 topFrame 上单击右键，然后点击 <code>Change styleSheet...</code>，添加 QSS，那么 QSS 的作用域为 topFrame 和它的子 widget：</h2>
<!--![](./images/QSS-Load-Designer-5.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/sXUJYl2wFx5mH84.png" alt="QSS-Load-Designer-5.png" /><figcaption aria-hidden="true">QSS-Load-Designer-5.png</figcaption>
</figure>
<h1 id="从文件中加载-qss">从文件中加载 QSS</h1>
<p>如果把 QSS 写死在代码里，修改 QSS 的时候就需要修改程序的源码，就不得不重新编译，打包发布程序，效率低，不灵活，在实际项目里推荐把 QSS 放在文件里，然后读取 QSS 文件内容到程序，调用 setStyleSheet(qss) 加载 QSS，就像下面的代码片段所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">int main(int argc, char *argv[]) &#123;</span><br><span class="line">    QApplication app(argc, argv);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    mainWidget-&gt;show(); // 此处以前的代码和上面的一样</span><br><span class="line"></span><br><span class="line">    // QSS 样式：从文件读取 QSS</span><br><span class="line">    &#123;</span><br><span class="line">        QFile file(&quot;/Users/Biao/Desktop/style.qss&quot;); // QSS 文件路径</span><br><span class="line">        file.open(QIODevice::ReadOnly | QIODevice::Text);</span><br><span class="line">        QString qss(file.readAll());</span><br><span class="line">        app.setStyleSheet(qss);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>QSS 放在文件里的好处是当 QSS 变化后不需要修改源码，重启程序就可以看到修改后的效果。QSS 变化后也可以不用重启程序，重新调用 qApp-&gt;setStyleSheet(qss) 再加载一次 QSS 就可以了（qApp 是 QApplication 的全局唯一对象，和上面的 app 是同一个对象）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qDebug() &lt;&lt; qApp &lt;&lt; &quot;, &quot; &lt;&lt; (&amp;app); // 可以看到它们输出的地址是一样的</span><br><span class="line">// 我这输出：QApplication(0x7fff5975bc90) ,  QApplication(0x7fff5975bc90)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>重新加载 QSS 的方式很多，可以在快捷键的槽函数里加载，也可以点击菜单项或者点击按钮加载，可以是任何方式，只要能加载就可以，管他黑猫白猫，抓住耗子就是好猫。</p>
<h1 id="小技巧">小技巧</h1>
<h2 id="我会常用下面的方式来使用-qss">我会常用下面的方式来使用 QSS:</h2>
<ul>
<li>1 先在 Qt Designer 里写 QSS，能实时的看到效果，满意后把这些 QSS 保存到文件里，然后删除 Qt Designer 里的 QSS</li>
<li>2 从文件读取 QSS 赋值给 QString 变量</li>
<li>3 用 qApp 加载从文件读取到的 QSS</li>
</ul>
<h2 id="我在项目中使用下面的函数来加载-qss">我在项目中使用下面的函数来加载 QSS:</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class UiUtil &#123;</span><br><span class="line">public:</span><br><span class="line">    static void loadQss(); // 为整个应用程序加载 QSS</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QFile&gt;</span><br><span class="line">#include &lt;QStringList&gt;</span><br><span class="line">#include &lt;QDebug&gt;</span><br><span class="line">#include &lt;QApplication&gt;</span><br><span class="line"></span><br><span class="line">void UiUtil::loadQss() &#123;</span><br><span class="line">    // 从配置中读取 QSS 的文件名，QSS 可以分类放在多个文件里</span><br><span class="line">    QStringList qssFileNames = Singleton&lt;Config&gt;::getInstance().getQssFiles();</span><br><span class="line"></span><br><span class="line">    // 需要把所有文件中的 QSS 合并在一起</span><br><span class="line">    QString qss;</span><br><span class="line"></span><br><span class="line">    foreach (QString name, qssFileNames) &#123;</span><br><span class="line">        qDebug() &lt;&lt; QString(&quot;=&gt; 加载 QSS 文件 %1&quot;).arg(name);</span><br><span class="line"></span><br><span class="line">        QFile file(name);</span><br><span class="line">        if (!file.open(QIODevice::ReadOnly)) &#123;</span><br><span class="line">            qDebug() &lt;&lt; QString(&quot;打开 QSS 文件 %1 失败&quot;);</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        qss.append(file.readAll()).append(&quot;\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (!qss.isEmpty()) &#123;</span><br><span class="line">        // qDebug() &lt;&lt; qss;</span><br><span class="line">        qApp-&gt;setStyleSheet(qss);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>UiUtil::loadQss() 可以在运行时多次调用，这样就能在程序运行的时候修改 QSS，然后加载，看到修改后的效果</p>
</blockquote>
<p>把下面的代码放到 main() 函数里，当按下快捷键 ctrl + l 后就会加载一次 QSS，实现 QSS 的动态加载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MainWindow mainWindow; // 程序的主窗口</span><br><span class="line">QShortcut *shortcut = new QShortcut(QKeySequence(Qt::CTRL + Qt::Key_L), &amp;mainWindow);</span><br><span class="line"></span><br><span class="line">QObject::connect(shortcut, &amp;QShortcut::activated, [] &#123;</span><br><span class="line">    UiUtil::loadQss();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/18/QT/qss/%E5%8A%A0%E8%BD%BDQSS/" data-id="cl9y15qfc000pcwtjdilwbowp" data-title="加载QSS" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/qss/QSS基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/18/QT/qss/QSS%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2022-10-18T02:30:00.000Z" itemprop="datePublished">2022-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/18/QT/qss/QSS%E5%9F%BA%E7%A1%80/">QSS基础</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="qss-基础">QSS 基础</h1>
<p>如果你会 CSS，那么 QSS 对你来说将会非常简单，QSS 的语法和 CSS 的愈发非常相似，但也有些不同，有些 CSS 的东西在 QSS 里被去掉了，QSS 也加了些自己特有的东西，不过大多数还是差不多的，下面以修改 QLabel 的样式为例，学习 QSS 的基础语法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">QLabel &#123;</span><br><span class="line">    /* 相当于 font: bold 50px &quot;Snell Roundhand&quot;; */</span><br><span class="line">    font-size: 50px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    font-family: &quot;Snell Roundhand&quot;;</span><br><span class="line"></span><br><span class="line">    /* 文本的颜色 */</span><br><span class="line">    color: white;</span><br><span class="line"></span><br><span class="line">    /* 相当于 background: lightgray url(:/resources/horizontal-add-line.png); */</span><br><span class="line"></span><br><span class="line">    background-color: lightgray;</span><br><span class="line">    background-image: url(:/resources/horizontal-add-line.png);</span><br><span class="line"></span><br><span class="line">    /* 还能使用渐变 */</span><br><span class="line">    background-color: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1,</span><br><span class="line">                      stop: 0 #FFFFFF, stop: 1 #BB000000);</span><br><span class="line"></span><br><span class="line">    /* 相当于 border: 5px solid gray; */</span><br><span class="line">    border-width: 5px;</span><br><span class="line">    border-color: gray;</span><br><span class="line">    border-style: solid;</span><br><span class="line"></span><br><span class="line">    /* 边框圆角 */</span><br><span class="line">    border-radius: 10px;</span><br><span class="line"></span><br><span class="line">    padding: 5px;</span><br><span class="line">    margin: 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下图是上面 QSS 的效果图:</p>
<!--![gitee](https://gitee.com/akebee/images/blob/master/qt/qss/QSS-Base-1.png) -->
<figure>
<img src="https://s2.loli.net/2022/10/19/OSYxuzw7poBmKIH.png" alt="QSS-Base-1.png" /><figcaption aria-hidden="true">QSS-Base-1.png</figcaption>
</figure>
<h1 id="下面具体介绍一下-qss-的基础语法">下面具体介绍一下 QSS 的基础语法</h1>
<ul>
<li>设置字体用<code>font</code>, 语法为：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">font: [font-style] [font-variant] [font-weight] [font-size] [font-family]</span><br><span class="line"></span><br><span class="line">/* 按顺序设置，可以忽略其中某些值，例如：*/</span><br><span class="line">font: italic bold 12px arial, sans-serif;</span><br></pre></td></tr></table></figure>
<p>设置字体用 <code>font-style</code>, <code>font-size</code>, <code>font-weight</code>, <code>font-family</code>（和 CSS 一样，如果字体名字有空格则用双引号引起来，多个字体名字间用逗号分隔，如果第一个字体找不到则用第二个，第二个找不到则用第三个，依此类推）</p>
<ul>
<li>设置文本颜色用 <code>color</code></li>
<li>设置背景颜色用 <code>background-color</code></li>
<li>设置背景使用 <code>background</code>，可以设置如下属性：
<ul>
<li><code>background-color</code></li>
<li><code>background-position</code></li>
<li><del><code>background-size</code></del></li>
<li><code>background-repeat</code></li>
<li><code>background-origin</code></li>
<li><code>background-clip</code></li>
<li><code>background-attachment</code></li>
<li><code>background-image</code> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* 可以忽略其中某些值，例如：*/</span><br><span class="line">background: lightgray url(:/resources/horizontal-add-line.png);</span><br></pre></td></tr></table></figure></li>
<li>url 中的路径可以是：
<ul>
<li>资源文件的路径（<code>:/</code> 开头）</li>
<li>绝对路径</li>
<li>相对于可执行文件的相对路径</li>
</ul></li>
</ul></li>
<li>设置背景图片用 <code>background-image</code>（先绘制背景色，然后再绘制背景图片，如果背景图片是半透明的就可以看到背景色了），默认水平和垂直重复平铺满整个 widget，同时一起设置的还可以有 <code>background-repeat</code>、<code>background-position</code>、<code>background-attachment</code>
<ul>
<li>background-repeat，可选的值有：
<ul>
<li>repeat-x：水平方向重复</li>
<li>repeat-y：垂直方向重复</li>
<li>no-repeat：不重复</li>
</ul></li>
<li>background-position，可选的值有：
<ul>
<li>top left</li>
<li>top center</li>
<li>top right</li>
<li>center left</li>
<li>center center</li>
<li>center right</li>
<li>bottom left</li>
<li>bottom center</li>
<li>bottom right</li>
<li><del>xpos ypos</del></li>
</ul></li>
<li>background-attachment，可选的值有：
<ul>
<li>scroll：背景随滚动条滚动</li>
<li>fixed：背景不随滚动条滚动</li>
</ul></li>
</ul></li>
<li>设置背景还可以用 <code>border-image</code>，请参考 <a href=""><code>Border Image</code></a> 一节</li>
<li>设置边框用 <code>border-width</code>, <code>border-style</code>, <code>border-color</code></li>
<li>设置边框用 border，语法为：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">border: border-width border-style border-color</span><br><span class="line"></span><br><span class="line">/* 例如：*/</span><br><span class="line">border: 1px solid gray;</span><br></pre></td></tr></table></figure>
<ul>
<li>设置圆角边框用 <code>border-radius</code>，但是如果给定的半径大于对应边的一半，圆角就没有效果了，在 CSS 里没有这个问题</li>
<li>支持渐变 <code>gradient</code>: <code>qlineargradient</code>、<code>qradialgradient</code>、<code>qconicalgradient</code>，渐变的坐标不是用像素表示，而是把渐变的坐标的最小值定义为 0，最大值定义为 1，这种技术又叫 <code>Normalization</code>，通俗点说就是用比例表示，开始处用 0 表示，结束处用 1 表示，不管渐变的范围是 200px 还是 500px，按比例都能计算出实际的像素坐标，这样做的好处是，不需要关心渐变的像素坐标范围的具体数值。如果不用 <code>Normalization</code> 技术，widget 的大小一变化，就需要修改 QSS 里的坐标值。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">x1: 0, y1: 0，渐变的开始位置，为 border rectangle 的左上角（请参考盒子模型）</span><br><span class="line">x2: 0, y2: 1，渐变的开始位置，为 border rectangle 的左下角</span><br><span class="line">stop: 0.1 #FF0000，在 0.0 处渐变的颜色为 #FF0000</span><br><span class="line">stop: 0.6 #00FF00，在 0.6 处渐变的颜色为 #00FF00</span><br><span class="line">stop: 1.0 #0000FF，在 1.0 处渐变的颜色为 #0000FF</span><br><span class="line">*/</span><br><span class="line">background-color: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1,</span><br><span class="line">                        stop: 0.1 #FF0000,</span><br><span class="line">                        stop: 0.6 #00FF00,</span><br><span class="line">                        stop: 1.0 #0000FF);</span><br></pre></td></tr></table></figure>
<p>渐变效果比较复杂，可以使用 Qt Desginer 的 QSS 编辑器来帮助我们可视化的实现复杂的渐变效果，如下图:</p>
<!--![](./images/QSS-Base-2.png)-->
<figure>
<img src="https://s2.loli.net/2022/10/19/7aLikNojgbxwBc6.png" alt="QSS-Base-2.png" /><figcaption aria-hidden="true">QSS-Base-2.png</figcaption>
</figure>
<ul>
<li><code>Padding</code> 和 <code>margin</code> 参考<a href="">盒子模型</a>一节</li>
<li>设置图标，如 QToolButton 的图标：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/* 图标大小 */</span><br><span class="line">icon-size: 20px 20px;</span><br><span class="line"></span><br><span class="line">/* 图标文件 */</span><br><span class="line">qproperty-icon: url(:/resources/tabset-left.png);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>设置宽度用 <code>width</code>，高度用 <code>height</code>，设置 <code>subcontrol</code> 的时候比较有用</li>
<li>设置最小宽度用 <code>min-width</code>，最小高度用 <code>min-height</code>（是 content rectangle 的宽和高）</li>
<li>设置最大宽度用 <code>max-width</code>，最大高度用 <code>max-height</code></li>
<li>遗憾的是，QSS 不支持阴影</li>
<li>使用 <code>qproperty-xxx</code> 进行设置，因为在 QWidget 及其子类中使用宏 Q_PROPERTY 定义的 WRITE 函数可以在 QSS 中访问：
<ul>
<li><code>text-align</code> 不支持 QLable，但设置 QLabel 的文本居中可以这样：<code>qproperty-alignment: AlignCenter</code></li>
<li>甚至可以在 QSS 中设置 QLabel，QPushButton 等的文本：<code>qproperty-text: 'It is amazing'</code>，太魔性了</li>
<li>设置 QLabel 的 word wrap: <code>qproperty-wordWrap: true</code></li>
<li>设置对齐方式：
<ul>
<li><code>qproperty-alignment: 'AlignCenter's</code></li>
<li><code>qproperty-alignment: 'AlignBottom | AlignRight'</code></li>
</ul></li>
<li>设置按钮:
<ul>
<li>设置 flat: <code>qproperty-flat: true</code></li>
<li>设置图标: <code>qproperty-icon: url(:/resources/tabset-left.png)</code></li>
</ul></li>
<li>QWidget 及其子类还有很多 Q_PROPERTY 定义的 WRITE 函数，想知道就去查帮助文档吧</li>
<li>我们也可以使用宏 Q_PROPERTY 定义自己的 WRITE 函数，然后在 QSS 中使用</li>
<li>不过 <code>qproperty-xxx</code> 也不是万能的，在 <code>:hover</code>, <code>:pressed</code> 等伪类选择器中不生效</li>
</ul></li>
</ul>
<p>上面的 QSS 的虽然只是基础，但是很重要，大多数的时候都要用到它们，用来修改 QLabel，QPushButton，QFrame，QWidget 等的样式还基本够用了，不过如果要修改复杂一点的 widget 的样式，如 QSpinBox，QScrollBar 等，上面的知识是不够的，要想掌握好 QSS，还必须了解 <a href=""><code>QSS 的选择器</code></a>，<a href=""><code>盒子模型</code></a>，<a href=""><code>Border-Image</code></a>，<a href=""><code>Subcontrol</code></a> 等，这些在后面都有专门的章节介绍。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/18/QT/qss/QSS%E5%9F%BA%E7%A1%80/" data-id="cl9y15qf8000bcwtjhm1a7t6k" data-title="QSS基础" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-QT/qss/Qt_Style_Sheet(QSS)总体描述" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/18/QT/qss/Qt_Style_Sheet(QSS)%E6%80%BB%E4%BD%93%E6%8F%8F%E8%BF%B0/" class="article-date">
  <time class="dt-published" datetime="2022-10-18T02:28:00.000Z" itemprop="datePublished">2022-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/QT/">QT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/18/QT/qss/Qt_Style_Sheet(QSS)%E6%80%BB%E4%BD%93%E6%8F%8F%E8%BF%B0/">Qt Style Sheet (QSS) 总体描述</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="qss-总体描述">QSS 总体描述</h1>
<p>Qt 提供的 widget 的默认外观很多时候都不符合项目的界面需求，必须要改，修改一个 widget 的外观（Look and Feel）有以下的方法：</p>
<ul>
<li>继承 Widget，然后在 paintEvent() 里绘制</li>
<li>继承 QStyle</li>
<li>使用 QSS（Qt Style Sheet）</li>
<li>对于 item view 来说还有一种方式，还可以使用 Delegate</li>
</ul>
<p>这几种方式里最简单灵活的是使用 QSS，虽然有人说 QSS 的效率低，具体有多低没测试过，但是在普通 PC 上从来没感觉出来，再说现在的硬件也不差这么点性能消耗，随便一个写的差点的函数的消耗就比这多的多，作为一个实用主义者，不追求理论上的效率完美，能满足需求的前提下什么好用用什么，QSS 就是修改 widget 外观的首选，什么效果不满意，修改一下 QSS 的文件就可以看到效果，甚至不需要重新编译、打包发布程序（如果把 QSS 放在文件中，并且实现动态加载 QSS）。</p>
<h1 id="qt-官网对-qss-的说明">QT 官网对 QSS 的说明</h1>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/stylesheet.html">QT5.15LTS_QSS 介绍点击此链接</a></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/stylesheet.html"><code>Overview</code></a></li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/stylesheet-syntax.html"><code>The Style Sheet Syntax</code></a></li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/stylesheet-designer.html"><code>Qt Designer Integration</code></a></li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/stylesheet-customizing.html"><code>Customizing Qt Widgets Using Style Sheets</code></a></li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/stylesheet-reference.html"><code>Qt Style Sheets Reference</code></a></li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/stylesheet-examples.html"><code>Qt Style Sheets Examples</code></a></li>
</ul></li>
<li><p>本地查找： QT creator --&gt; 帮助 --&gt;切换到索引</p>
<ul>
<li>搜索：QT Style Sheets Examples
<ul>
<li>Qt Style Sheets Examples 例子很全面</li>
<li>Qt Style Sheets Reference 讲解得非常仔细</li>
</ul></li>
</ul></li>
</ul>
<p><strong>我们按下面的章节来介绍 QSS:</strong></p>
<ul>
<li>QSS 基础</li>
<li>加载 QSS</li>
<li>盒子模型</li>
<li>QSS 选择器</li>
<li>Border-Image</li>
<li>QSS Subcontrol</li>
<li>QSS CalendarWidget</li>
</ul>
<h1 id="参考资料">参考资料</h1>
<p>此处的 QT 文档来源于网上“公孙二狗”的 <a target="_blank" rel="noopener" href="http://qtdebug.com/qtbook/">QT 杂谈</a></p>
<h2 id="网上有资料为什么还要拷贝过来再写一遍">网上有资料为什么还要拷贝过来，再写一遍？</h2>
<p>原因如下：</p>
<ul>
<li>1 网上文档资料和自己需要的文档资料不一致，网上资料分散在各个不同的地方</li>
<li>2 同一份资料，网上会搜索出很多，有好有坏，自己记录，有个起步的判断标准，不要浪费时间在各个不同资料的比对上面。</li>
<li>3 网上的资料，过一段时间后，有些会消失不见！！如“网易微博”/“腾讯微博”，更不说很多个人网站，随时会消失。</li>
<li>4 自己整理的随笔和技术文档，符合自己的需求，并且集中在一起，直接分门安类查看，方便。 同时打赏在 gitee 上记录，资料不会消失！（电脑坏了可以从 gitee 上回复；gitee 上不行，电脑本地有备份.）</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/18/QT/qss/Qt_Style_Sheet(QSS)%E6%80%BB%E4%BD%93%E6%8F%8F%E8%BF%B0/" data-id="cl9y15qf9000fcwtjf5o5dxcq" data-title="Qt Style Sheet (QSS) 总体描述" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-tool_use/blog/hexo博客使用入门" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/17/tool_use/blog/hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/" class="article-date">
  <time class="dt-published" datetime="2022-10-17T10:09:48.000Z" itemprop="datePublished">2022-10-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/17/tool_use/blog/hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/">hexo博客最简单的入门教程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h1 id="hexo-简介">1 hexo 简介</h1>
<p>Hexo 是一款基于 Nodejs 的，快速、简洁且高效的博客框架。具有丰富的插件和主题，具有超快的速度。支持 Makedown 语法，可以方便快捷的编写博客文档。同时支持 node 命令，可以一键部署到 GitHub Pages, Heroku 或其他平台。</p>
<p>总之，是个写博客的利器。</p>
<h1 id="项目展示">2 项目展示</h1>
<h1 id="事前准备----安装-gitnode.js-以及-npm">3 事前准备 -- 安装 git、Node.js 以及 npm</h1>
<p>使用 hexo 前，首先要保证自己的电脑已经安装了 Git 和 Node。且 Node 版本不低于 10.13。</p>
<h2 id="安装-git">安装 git</h2>
<p>这个就不说明。</p>
<h2 id="node.js-安装以及环境配置之-windows-篇">Node.js 安装以及环境配置之 Windows 篇</h2>
<p>简单的说 Node.js 就是运行在服务端的 JavaScript。Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。Node.js 使用了一个事件驱动、非阻塞式 I/O 的模型，使其轻量又高效。Node.js 的包管理器 npm，是全球最大的开源库生态系统。</p>
<h3 id="下载-node.js">下载 Node.js</h3>
<p>1 下载对应系统的 Node.js 版本：https://nodejs.org/en/download/</p>
<p>2 选择安装目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    这里选择目录：D:\software\nodejs\</span><br><span class="line">    安装完成后后，用“管理员用户”模式打开cmd窗口，运行：</span><br><span class="line">        &gt;node -v</span><br><span class="line">        &gt;npm -v</span><br><span class="line"></span><br><span class="line">此处说明下：新版的Node.js已自带npm，安装Node.js时会一起安装，npm的作用就是对Node.js依赖的包进行管理，</span><br><span class="line">           也可以理解为用来安装/卸载Node.js需要装的东西</span><br></pre></td></tr></table></figure>
<p>3 环境配置 说明：这里的环境配置主要配置的是 npm 安装的全局模块所在的路径，以及缓存 cache 的路径，之所以要配置， 是因为以后在执行类似：npm install express [-g] （后面的可选参数-g，g 代表 global 全局安装的意思）的安装语句时， 会将安装的模块安装到【C:】路径中，占 C 盘空间。 例如：我希望将全模块所在路径和缓存路径放在我 node.js 安装的文件夹中，则在我安装的文件夹【D:】下创建两个文件夹【node_global】及【node_cache】</p>
<p>创建完两个空文件夹之后，打开 cmd 命令窗口，输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;npm config set prefix &quot;D:\software\nodejs\node_global&quot;</span><br><span class="line">&gt;npm config set cache  &quot;D:\software\nodejs\node_cache&quot;</span><br></pre></td></tr></table></figure>
<p>下面设置环境变量： 接下来设置环境变量，关闭 cmd 窗口，“我的电脑”-右键-“属性”-“高级系统设置”-“高级”-“环境变量” 进入环境变量对话框，在【系统变量】下新建【NODE_PATH】，输入【D:_global_modules】， 将【用户变量】下的【Path】修改为【D:_global】</p>
<p>4 测试 配置完后，安装个 module 测试下，我们就安装最常用的 hexo 模块，打开 cmd 窗口， 输入如下命令进行模块的全局安装：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; npm install hexo-cli -g        # -g是全局安装的意思</span><br></pre></td></tr></table></figure>
<p>5 阿里镜像 cnpm 使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
<p>通过 npm 安装模块时都是去国外的镜像下载的，有的时候由于网络原因会导致安装模块失败，好在阿里有团队维护国内镜像:http://npm.taobao.org/ 上面有使用说明</p>
<h1 id="快速入门----安装-hexo">4 快速入门 -- 安装 hexo</h1>
<ul>
<li>安装 hexo-cli</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<ul>
<li>项目初始化 安装 hexo-cli 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。我们以新建一个 hexo-demo 项目为例进行说明。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init hexo-demo</span><br></pre></td></tr></table></figure>
<p>进入 hexo-demo 文件夹，安装依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd hexo-demo</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<ul>
<li>运行项目 安装完依赖以后，执行以下命令，启动 hexo 服务器，运行结果如图。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line"></span><br><span class="line">D:\gitee\blog&gt;hexo s</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<h1 id="hexo-项目结构">5 hexo 项目结构</h1>
<p>进入 hexo-demo 文件夹，我们可以看到 hexo 的目录结构，如下所示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure>
<h2 id="config.yml">_config.yml</h2>
<p>_config.yml 是整个博客网站的配置文件，里面包含了网站的配置、网址配置、目录配置、主题配置等等内容。</p>
<p>你可以根据自己的需要进行修改，我修改了网站配置、网址配置和主题配置，其他的使用默认。</p>
<p>默认的网站配置如下</p>
<h3 id="网站配置">网站配置</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: Hexo</span><br><span class="line">subtitle: &#x27;&#x27;</span><br><span class="line">description: &#x27;&#x27;</span><br><span class="line">keywords:</span><br><span class="line">author: John Doe</span><br><span class="line">language: en</span><br><span class="line">timezone: &#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>修改成我们实际的配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: HexoDemo</span><br><span class="line">subtitle: &#x27;这是一个demo页&#x27;</span><br><span class="line">description: &#x27;hexoDemo用于介绍如何使用hexo&#x27;</span><br><span class="line">keywords: &#x27;hexo,node,博客&#x27;</span><br><span class="line">author: 锅锅复锅锅</span><br><span class="line">language: zh-CN</span><br><span class="line">timezone: &#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>这里面包含了网站标题(title)、副标题(subtitle)、描述(description)、关键字(keywords)等信息，对于做 seo 来说都是挺重要的。 另外一个比较重要的是语言(language)，这里记得要填中文 zh-CN,这样安装不同的主题的时候，就可以显示中文了。</p>
<h3 id="网址配置">网址配置</h3>
<p>url 是博客上线后的网址，会在分享等地方用到，一定要记得修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url:http://example.com</span><br></pre></td></tr></table></figure>
<p>我的修改为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url:http://akebee.gitee.com</span><br></pre></td></tr></table></figure>
<h3 id="主题配置">主题配置</h3>
<p>hexo 默认使用的主题是 landscape。这里我们先用默认主题，在安装主题那一节里，我会详细说下如何安装其他主题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: landscape</span><br></pre></td></tr></table></figure>
<p>想了解更多关于配置信息，可以点击这里<a href="https://link.zhihu.com/?target=https%3A//hexo.io/zh-cn/docs/configuration">配置</a></p>
<h2 id="scaffolds">scaffolds</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">├── draft.md</span><br><span class="line">├── FASTPANEL</span><br><span class="line">├── post.md</span><br></pre></td></tr></table></figure>
<p>模板文件夹，里面存放了 3 个模板文件，依次是草稿模板，页面模板和文章模板。</p>
<p>当我们使用 hexo 命令生成草稿、页面或者文章的时候，就是复制这些模板。</p>
<p>我们以文章模板为例进行说明。默认 post.md 内容为空，头部信息如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>如果我们想所有新生成的文章都带上分类字段。我们可以修改 post.md 的头部。我们给头部添加了 categories 字段。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>这样我们使用<code>hexo new a</code> 生成 a.md 文章的时候，a.md 文章顶部都会带上 categories 字段。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: a</span><br><span class="line">date: 2022-04-01 16:57:55</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h2 id="source">source</h2>
<p>资源文件夹是存放用户资源的地方。除 <em>posts 文件夹之外，开头命名为 </em> (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。</p>
<p>我们使用<code>hexo new ……</code> 命令生成的页面或者文章，都会被放倒 source 文件夹下。</p>
<h2 id="themes">themes</h2>
<p>themes 文件夹存放的就是 hexo 的主题。稍后我们以 <code>hexo-theme-pure</code>主题为例，介绍下如何安装主题。我们先介绍下如何写作。</p>
<h1 id="写博客">6 写博客</h1>
<p>搭建好博客之后，现在我们就可以开始写作了。可以使用 hexo 命令创建文章，也可以直接在 source/_post 文件夹下新建 makedown 文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &lt;title&gt;</span><br></pre></td></tr></table></figure>
<p>现在我们创建 a.md 和 b.md 两篇文章</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new a</span><br><span class="line">hexo new b</span><br></pre></td></tr></table></figure>
<p>这样我们在 source/_posts 文件夹下就多了 a.md 和 b.md 两篇文章。 修改两篇文章内容后，刷新下浏览器。我们就可以在博客里看到这两篇文章了。 截图就不发了。</p>
<h3 id="文章顺序">文章顺序</h3>
<p>hexo 文章是默认是按照创作时间倒序排列的。如果要修改一篇文章的顺序，可以修改顶部 date 字段的时间。</p>
<h3 id="新建文件夹">新建文件夹</h3>
<p>使用 hexo 命令新建文章默认都是放到_post 文件夹下的，如果文章很多，马上就乱的没法看了。</p>
<p>其实我们可以在_post 文件夹下新建文件夹，在文件夹下放我们的文章。比如这样。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">├── _posts</span><br><span class="line">|   ├── book</span><br><span class="line">|       ├──射雕英雄传</span><br><span class="line">|   └── a.md</span><br><span class="line">|   └── b.md</span><br></pre></td></tr></table></figure>
<p>遗憾的是 hexo 目前没有命令支持在指定的文件夹下新建文章。现在只能在_posts 下新建文章后，再复制过去。</p>
<p>关于写作的更多命令，可以查看这里 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/writing">写作</a></p>
<h1 id="安装主题">7 安装主题</h1>
<p>hexo 提供了丰富的主题，需要查找主题的小伙伴可以上这里搜索，<a target="_blank" rel="noopener" href="https://hexo.io/themes/">主题</a></p>
<p>我们这里以 hexo-theme-pure 为例进行说明，因为 github 经常打不开，我们这里使用 gitee 上的仓库，hexo-theme-pure 的在 gitee 上的仓库地址为 <a target="_blank" rel="noopener" href="https://gitee.com/mirrors_cofess/hexo-theme-pure">hexo-theme-pure</a></p>
<h3 id="下载主题">1 下载主题</h3>
<p>进入 themes 文件夹，使用 git 克隆 hexo-theme-pure。</p>
<h3 id="修改-hexo-的_config.yml-文件">2 修改 hexo 的_config.yml 文件</h3>
<p>将主题改成 hexo-theme-pure</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: hexo-theme-pure</span><br></pre></td></tr></table></figure>
<h3 id="重启-server">3 重启 server</h3>
<p>退出 hexo 服务器，再重新执行<code>hexo server</code> 刷新下浏览器就可以看到效果了。</p>
<h3 id="修改配置">4 修改配置</h3>
<p>安装完主题后，我们会发现，主题下也有一个_config.yml 文件，这个是主题的配置文件，主题的配置文件用于配置更多个性化的东西。</p>
<p>关于如何使用这个主题，官方文档上已经有非常详细的描述了。可以点击这里查看</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/mirrors_cofess/hexo-theme-pure">hexo-theme-pure</a></p>
<p><strong>不要安装官方文档上的<code>hexo-generator-baidu-sitemap</code>插件，这个插件会导致程序报错。</strong></p>
<p>我这里再简单说几点。</p>
<h4 id="汉化">汉化</h4>
<p>默认这个主题是英文的，需要我们修改 hexo 根目录下的_config.yml 的 language 属性，把它改成 zh-CN 就可以。</p>
<h4 id="菜单">菜单</h4>
<p>pure 主题默认的菜单如下，作为 demo。我们修改下只显示 Home、Archives 和 Categories</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  Home: .</span><br><span class="line">  Archives: archives  # 归档</span><br><span class="line">  Categories: categories  # 分类</span><br><span class="line">  Tags: tags  # 标签</span><br><span class="line">  Repository: repository  # github repositories</span><br><span class="line">  Books: books  # 豆瓣书单</span><br><span class="line">  Links: links  # 友链</span><br><span class="line">  About: about  # 关于</span><br></pre></td></tr></table></figure>
<h4 id="站内搜索">站内搜索</h4>
<p>关于站内搜索。官方文档描述的并不详细，我这里再补充下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  insight: true # you need to install `hexo-generator-json-content` before using Insight Search</span><br><span class="line">  baidu: false # you need to disable other search engines to use Baidu search</span><br></pre></td></tr></table></figure>
<p>_config.yml 默认是开启站内搜索的，但是实际不能用，原因是没有配置<code>hexo-generator-json-content</code> 插件。</p>
<p>当然首先是安装<code>hexo-generator-json-content</code>，使用 npm 安装即可。安装后还需要在主题的_config.yml 添加如下配置。重启下 server,这样才能真正开启站内搜索了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">jsonContent:</span><br><span class="line">  meta: true</span><br><span class="line">  drafts: false</span><br><span class="line">  file: content.json</span><br><span class="line">  keywords: undefined</span><br><span class="line">  dateFormat: undefined</span><br><span class="line">  pages:</span><br><span class="line">    title: true</span><br><span class="line">    slug: true</span><br><span class="line">    date: true</span><br><span class="line">    updated: true</span><br><span class="line">    comments: true</span><br><span class="line">    path: true</span><br><span class="line">    link: true</span><br><span class="line">    permalink: true</span><br><span class="line">    excerpt: true</span><br><span class="line">    keywords: false</span><br><span class="line">    text: true</span><br><span class="line">    raw: false</span><br><span class="line">    content: false</span><br><span class="line">    author: true</span><br><span class="line">  posts:</span><br><span class="line">    title: true</span><br><span class="line">    slug: true</span><br><span class="line">    date: true</span><br><span class="line">    updated: true</span><br><span class="line">    comments: true</span><br><span class="line">    path: true</span><br><span class="line">    link: true</span><br><span class="line">    permalink: true</span><br><span class="line">    excerpt: true</span><br><span class="line">    keywords: false</span><br><span class="line">    text: true</span><br><span class="line">    raw: false</span><br><span class="line">    content: false</span><br><span class="line">    author: true</span><br><span class="line">    categories: true</span><br><span class="line">    tags: true</span><br></pre></td></tr></table></figure>
<h1 id="部署">8 部署</h1>
<p>我使用的<a target="_blank" rel="noopener" href="https://www.aliyun.com/product/oss">阿里云 oss 对象存储</a>当服务器的。我这里就介绍下如何在阿里云 oss 上部署。其他部署方法，可查看官方文档。 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/one-command-deployment">部署</a></p>
<p>博客不需要后端，所以使用对象存储足够了。而且对象存储极其便宜，一年才几块钱，比买云服务器划算多了。</p>
<p>我这里简单介绍下，如何使用对象存储部署 hexo。</p>
<h2 id="生成静态文件">1 生成静态文件</h2>
<p>执行命令<code>hexo generate</code> 或者 <code>hexo g</code> 就可以生成静态文件。生成的文件存放在根目录的 public 文件夹。</p>
<h2 id="创建存储桶-bucket">2 创建存储桶 bucket</h2>
<p>创建存储桶 bucket，其中<strong>名称</strong>、<strong>地域</strong>、和<strong>读写权限</strong>是必须填的，读写权限选择“公共读”。 存储桶控制台地址，可以点击这里 地址</p>
<h2 id="上传">3 上传</h2>
<p>将刚刚生成的 public<strong>文件夹里</strong>的东西（注意不包括 public 这个文件夹），全部上传到该存储桶里。可以直接在网页上上传，也可以使用阿里云提供的 ossbrowser 工具，建议使用 ossbrowser，因为网页没法批量上传文件夹，一个个上传太麻烦。</p>
<p>ossbrowser 下载和使用地址，<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/209974.html">ossbrowser 安装和使用</a></p>
<h2 id="设置存储桶为静态服务器">4 设置存储桶为静态服务器</h2>
<h3 id="权限管理">4.1 权限管理</h3>
<p>权限管理设置为“公共读”，如果前面已经设置过了，这里就不用再设置了。</p>
<h3 id="设置静态页面">4.2 设置静态页面</h3>
<p>默认首页设置为 index.html，子目录首页一定要开通，文件 404 规则设置为 index，默认 404 页设置成 404.html 即可，如果是 vue 项目，就需要设置成 index.html</p>
<h3 id="绑定域名">4.3 绑定域名</h3>
<p>如果你有域名，就在传输管理-域名管理里，绑定自己的域名，记得勾选<strong>自动添加 CNAME 记录</strong>。 这样就不需要自己设置 dns 了。</p>
<h2 id="查看-dns">5 查看 DNS</h2>
<p>可以在 <a target="_blank" rel="noopener" href="https://dns.console.aliyun.com/">阿里云云解析 DNS</a> 里，查看自己刚刚绑定的域名。</p>
<p>绑定域名 2-3 分钟，最迟 10 分钟后，你就可以用域名访问自己的网站了。HexoDemo</p>
<p>腾讯云和七牛都有相同的业务，方法大同小异，感兴趣的可以试下</p>
<p>自此，我们的博客就搭建完毕了，撒花，庆祝，嘿嘿。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/17/tool_use/blog/hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/" data-id="cl9y15qfj001kcwtjdg2d7fqd" data-title="hexo博客最简单的入门教程" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BE%AE%E5%8D%9A/" rel="tag">微博</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/15/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-10-15T10:09:48.000Z" itemprop="datePublished">2022-10-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/15/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="quick-start">Quick Start</h2>
<h3 id="create-a-new-post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sunooms.github.io/2022/10/15/hello-world/" data-id="cl9y15qex0000cwtj1x318w7b" data-title="Hello World" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BE%AE%E5%8D%9A/" rel="tag">微博</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; zurück</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/QT/">QT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%86%E5%8F%B2/">历史</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/QSS/" rel="tag">QSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/V4L2/" rel="tag">V4L2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode/" rel="tag">VSCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openCV/" rel="tag">openCV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%86%E5%8F%B2/" rel="tag">历史</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E5%8D%9A/" rel="tag">微博</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6/" rel="tag">数学</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/QSS/" style="font-size: 20px;">QSS</a> <a href="/tags/V4L2/" style="font-size: 10px;">V4L2</a> <a href="/tags/VSCode/" style="font-size: 10px;">VSCode</a> <a href="/tags/openCV/" style="font-size: 10px;">openCV</a> <a href="/tags/%E5%8E%86%E5%8F%B2/" style="font-size: 12.5px;">历史</a> <a href="/tags/%E5%BE%AE%E5%8D%9A/" style="font-size: 17.5px;">微博</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 15px;">数学</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/01/tool_use/markdown%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/">markdown数学公式</a>
          </li>
        
          <li>
            <a href="/2022/11/01/history/%E6%95%B0%E5%AD%A6/%E6%84%A4%E6%80%92%E7%9A%84%E7%89%9B%E9%A1%BF_%E6%B1%AA%E6%9C%89/">愤怒的牛顿 汪有</a>
          </li>
        
          <li>
            <a href="/2022/11/01/history/%E6%95%B0%E5%AD%A6/%E5%85%AB%E5%8D%A6%E5%BE%AE%E7%A7%AF%E5%88%86_%E6%B1%AA%E6%9C%89/">八卦微积分 汪有</a>
          </li>
        
          <li>
            <a href="/2022/10/31/tool_use/blog/Hexo%E5%8D%9A%E5%AE%A2%E6%94%AF%E6%8C%81%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/">Hexo博客支持数学公式</a>
          </li>
        
          <li>
            <a href="/2022/10/31/history/%E6%95%B0%E5%AD%A6/%E5%BE%AE%E7%A7%AF%E5%88%86%E7%9A%84%E5%8E%86%E5%8F%B2(%E4%BA%8C)_%E8%B5%B7%E6%BA%90%E4%B9%8B%E7%89%9B%E9%A1%BF/">微积分的历史(二) 起源之牛顿</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 akebee<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>